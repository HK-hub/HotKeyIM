2023-03-10 09:24:32.839  INFO 108804 --- [main] com.hk.im.admin.IMAdminApplication       : Starting IMAdminApplication using Java 17.0.2 on DESKTOP-PICLGLQ with PID 108804 (F:\JavaCode\HotKeyIM\im-web\im-admin\target\classes started by HK意境 in F:\JavaCode\HotKeyIM)
2023-03-10 09:24:32.850  INFO 108804 --- [main] com.hk.im.admin.IMAdminApplication       : The following 1 profile is active: "dev"
2023-03-10 09:24:38.867  INFO 108804 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 09:24:38.868  INFO 108804 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-03-10 09:24:38.903  INFO 108804 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 17 ms. Found 0 JPA repository interfaces.
2023-03-10 09:24:38.975  INFO 108804 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 09:24:38.976  INFO 108804 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-10 09:24:39.000  INFO 108804 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2023-03-10 09:24:39.686  INFO 108804 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvice' of type [com.hk.im.admin.advice.MethodTraceAdvice$$EnhancerBySpringCGLIB$$9f0237c4] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 09:24:39.710  INFO 108804 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 09:24:40.601  INFO 108804 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9090 (http)
2023-03-10 09:24:40.619  INFO 108804 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-03-10 09:24:40.620  INFO 108804 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2023-03-10 09:24:40.918  INFO 108804 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring embedded WebApplicationContext
2023-03-10 09:24:40.918  INFO 108804 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 7896 ms
2023-03-10 09:24:42.241  INFO 108804 --- [main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2023-03-10 09:24:43.341  INFO 108804 --- [main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2023-03-10 09:24:43.557  INFO 108804 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-03-10 09:24:43.768  INFO 108804 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2023-03-10 09:24:44.148  INFO 108804 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-03-10 09:24:44.401  INFO 108804 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2023-03-10 09:24:45.663  INFO 108804 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-03-10 09:24:45.709  INFO 108804 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 09:24:51.564  WARN 108804 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.CollectEmoticon ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:24:57.104  WARN 108804 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.LikePost ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:24:57.329  WARN 108804 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.NoteTag ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:24:59.735  WARN 108804 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.UserCollection ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:25:02.799  INFO 108804 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server address:localhost
2023-03-10 09:25:02.800  INFO 108804 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server port:9870
2023-03-10 09:25:02.801  INFO 108804 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server serializer:Json
2023-03-10 09:25:02.801  INFO 108804 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server path:/channel
2023-03-10 09:25:02.809  INFO 108804 --- [main] c.h.i.s.p.c.SendTextMessageConsumer      : sendMessage consumer bean created
2023-03-10 09:25:04.009  INFO 108804 --- [main] c.h.i.s.p.config.ExecutorConfiguration   : start asyncServiceExecutor
2023-03-10 09:25:04.166  WARN 108804 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-03-10 09:25:05.907  INFO 108804 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:25:05.907  INFO 108804 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sendTextMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-10 09:25:06.066  INFO 108804 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:25:06.066  INFO 108804 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:userConnectedConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2023-03-10 09:25:06.230  INFO 108804 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:25:06.230  INFO 108804 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sentImageMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2023-03-10 09:25:06.571  INFO 108804 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9090 (http) with context path '/admin'
2023-03-10 09:25:06.580  INFO 108804 --- [main] c.h.i.server.chat.ChatServerBootStarter  : IOC 容器准备完毕,准备创建Chat Server: 2023-03-10T09:25:06.580196800
2023-03-10 09:25:06.580  INFO 108804 --- [main] c.h.i.server.chat.ChatServerBootStarter  : 启动Chat Server: class com.hk.im.server.chat.ChatServerBootStarter-2023-03-10T09:25:06.580196800
2023-03-10 09:25:06.619  INFO 108804 --- [main] com.hk.im.admin.IMAdminApplication       : Started IMAdminApplication in 35.007 seconds (JVM running for 39.352)
2023-03-10 09:25:06.902  INFO 108804 --- [Thread-9] c.h.i.s.chat.server.HotKeyChatServer     : websocket 服务启动，ip=localhost,port=9870
2023-03-10 09:29:15.051  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-10 09:29:15.052  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-03-10 09:29:15.055  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2023-03-10 09:29:15.174  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=b4856267-421a-4c6d-8066-b25573523f5c],[ip=127.0.0.1],[uri=/admin/user/login],[method=OPTIONS],[time=2023-03-10T09:29:15.174351]
2023-03-10 09:29:15.535  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=f7020d0e-ecbc-410a-bb19-c5352e3a0b3b],[ip=127.0.0.1],[uri=/admin/user/login],[method=POST],[time=2023-03-10T09:29:15.535079100]
2023-03-10 09:29:18.185  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=7603ccbc-d4c9-47e8-8a1c-a9ea52e4eab2],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=OPTIONS],[time=2023-03-10T09:29:18.185357200]
2023-03-10 09:29:18.211  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=b1ebf376-7336-41d9-bb3f-44c32e4d1d70],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=OPTIONS],[time=2023-03-10T09:29:18.211355700]
2023-03-10 09:29:18.217  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=496c3938-8b91-4e72-b601-253e392a3f4e],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=GET],[time=2023-03-10T09:29:18.217338700]
2023-03-10 09:29:18.218  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@274f9a9b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:29:18.296  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@71394e44,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:29:18.413  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=ab62a821-af59-43d3-a371-4e618ccc3c95],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T09:29:18.413343300]
2023-03-10 09:29:18.414  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@3766297,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:29:18.417  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@71394e44,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:29:18.597  WARN 108804 --- [http-nio-127.0.0.1-9090-exec-8] c.b.m.c.t.support.ReflectLambdaMeta      : Unable to make field private final java.lang.Class java.lang.invoke.SerializedLambda.capturingClass accessible: module java.base does not "opens java.lang.invoke" to unnamed module @6150c3ec
2023-03-10 09:29:19.199  INFO 108804 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:8018
2023-03-10 09:29:19.199  INFO 108804 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:8018
2023-03-10 09:29:19.231  INFO 108804 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,headers=http://localhost:3000,method=GET
2023-03-10 09:29:19.251  INFO 108804 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:29:19.251  INFO 108804 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 09:29:19.613  INFO 108804 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw, extend=null)
2023-03-10 09:29:19.630  INFO 108804 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 09:29:19.806  INFO 108804 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 09:29:19.810  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=d6ac018b-3baa-4dcd-aaf9-6b3000c6585d],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T09:29:19.810338800]
2023-03-10 09:29:19.820  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=80315ead-39fb-4166-89ec-9d3d0f1ec64b],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T09:29:19.820343200]
2023-03-10 09:29:19.821  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@2ab816c6,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:29:19.823  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@71394e44,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:29:19.825  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 09:29:39.440  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=6da9b196-8464-4f43-b1d4-ca43f3a142b8],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T09:29:39.440171300]
2023-03-10 09:29:39.440  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=471631da-1a43-4b94-b73c-740023c6b0b0],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=OPTIONS],[time=2023-03-10T09:29:39.440171300]
2023-03-10 09:29:39.451  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=3888b884-a51a-4a0c-8169-312c6ee7df73],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T09:29:39.451181400]
2023-03-10 09:29:39.451  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@38e003fd,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:29:39.451  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=6f2777a6-0c16-40f8-938c-3cf4fd91d9e0],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=GET],[time=2023-03-10T09:29:39.451181400]
2023-03-10 09:29:39.451  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@149589f6,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:29:39.453  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@55319abe,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:29:39.453  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@370ac9fd,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:29:40.778 ERROR 108804 --- [http-nio-127.0.0.1-9090-exec-6] c.alibaba.druid.filter.stat.StatFilter   : slow sql 1181 millis. SELECT id,sequence,message_feature,message_type,content,url,extra,deleted,create_time,update_time FROM tb_chat_message WHERE id=? [1633752041069252610]
2023-03-10 09:29:40.977 ERROR 108804 --- [http-nio-127.0.0.1-9090-exec-6] c.hk.im.admin.advice.WebExceptionAdvice  : common exception:

org.springframework.web.util.NestedServletException: Handler dispatch failed; nested exception is java.lang.NoSuchMethodError: 'java.util.Map com.hk.im.domain.entity.ChatMessage.getExtra()'
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1082) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:124) ~[druid-1.2.8.jar:1.2.8]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]
Caused by: java.lang.NoSuchMethodError: 'java.util.Map com.hk.im.domain.entity.ChatMessage.getExtra()'
	at com.hk.im.infrastructure.mapstruct.MessageMapStructureImpl.toBO(MessageMapStructureImpl.java:45) ~[classes/:na]
	at com.hk.im.service.service.MessageFlowServiceImpl.lambda$getLatestTalkRecords$0(MessageFlowServiceImpl.java:152) ~[classes/:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:575) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:260) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:616) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:622) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:627) ~[na:na]
	at com.hk.im.service.service.MessageFlowServiceImpl.getLatestTalkRecords(MessageFlowServiceImpl.java:159) ~[classes/:na]
	at com.hk.im.service.service.MessageFlowServiceImpl$$FastClassBySpringCGLIB$$a046c75e.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689) ~[spring-aop-5.3.18.jar:5.3.18]
	at com.hk.im.service.service.MessageFlowServiceImpl$$EnhancerBySpringCGLIB$$65c4525f.getLatestTalkRecords(<generated>) ~[classes/:na]
	at com.hk.im.admin.controller.MessageController.getLastCommunicationRecords(MessageController.java:56) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.20.jar:5.3.20]
	... 42 common frames omitted

2023-03-10 09:30:51.661  INFO 108804 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 09:30:51.662  INFO 108804 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 09:30:51.698  INFO 108804 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 09:30:51.699  INFO 108804 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 09:30:52.707  INFO 108804 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 09:30:52.796  INFO 108804 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:30:52.796  INFO 108804 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:30:52.796  INFO 108804 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:30:52.809  INFO 108804 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 09:30:52.834  INFO 108804 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 09:30:52.834  INFO 108804 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 09:30:52.840  INFO 108804 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 09:30:52.871  INFO 108804 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closing ...
2023-03-10 09:30:52.894  INFO 108804 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2023-03-10 09:37:04.623  INFO 118296 --- [main] com.hk.im.admin.IMAdminApplication       : Starting IMAdminApplication using Java 17.0.2 on DESKTOP-PICLGLQ with PID 118296 (F:\JavaCode\HotKeyIM\im-web\im-admin\target\classes started by HK意境 in F:\JavaCode\HotKeyIM)
2023-03-10 09:37:04.637  INFO 118296 --- [main] com.hk.im.admin.IMAdminApplication       : The following 1 profile is active: "dev"
2023-03-10 09:37:09.155  INFO 118296 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 09:37:09.155  INFO 118296 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-03-10 09:37:09.193  INFO 118296 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 17 ms. Found 0 JPA repository interfaces.
2023-03-10 09:37:09.257  INFO 118296 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 09:37:09.258  INFO 118296 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-10 09:37:09.303  INFO 118296 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2023-03-10 09:37:09.956  INFO 118296 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvice' of type [com.hk.im.admin.advice.MethodTraceAdvice$$EnhancerBySpringCGLIB$$c03bc593] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 09:37:09.977  INFO 118296 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 09:37:10.909  INFO 118296 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9090 (http)
2023-03-10 09:37:10.928  INFO 118296 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-03-10 09:37:10.928  INFO 118296 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2023-03-10 09:37:11.218  INFO 118296 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring embedded WebApplicationContext
2023-03-10 09:37:11.219  INFO 118296 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 6449 ms
2023-03-10 09:37:12.209  INFO 118296 --- [main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2023-03-10 09:37:13.257  INFO 118296 --- [main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2023-03-10 09:37:13.460  INFO 118296 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-03-10 09:37:13.672  INFO 118296 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2023-03-10 09:37:14.089  INFO 118296 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-03-10 09:37:14.405  INFO 118296 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2023-03-10 09:37:14.812  INFO 118296 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-03-10 09:37:14.832  INFO 118296 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 09:37:15.532  WARN 118296 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.CollectEmoticon ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:37:15.973  WARN 118296 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.LikePost ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:37:16.063  WARN 118296 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.NoteTag ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:37:16.238  WARN 118296 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.UserCollection ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:37:17.686  INFO 118296 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server address:localhost
2023-03-10 09:37:17.687  INFO 118296 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server port:9870
2023-03-10 09:37:17.688  INFO 118296 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server serializer:Json
2023-03-10 09:37:17.688  INFO 118296 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server path:/channel
2023-03-10 09:37:17.697  INFO 118296 --- [main] c.h.i.s.p.c.SendTextMessageConsumer      : sendMessage consumer bean created
2023-03-10 09:37:18.547  INFO 118296 --- [main] c.h.i.s.p.config.ExecutorConfiguration   : start asyncServiceExecutor
2023-03-10 09:37:18.646  WARN 118296 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-03-10 09:37:19.855  INFO 118296 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:37:19.856  INFO 118296 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sendTextMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-10 09:37:20.016  INFO 118296 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:37:20.016  INFO 118296 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:userConnectedConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2023-03-10 09:37:20.177  INFO 118296 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:37:20.177  INFO 118296 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sentImageMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2023-03-10 09:37:20.275  INFO 118296 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9090 (http) with context path '/admin'
2023-03-10 09:37:20.285  INFO 118296 --- [main] c.h.i.server.chat.ChatServerBootStarter  : IOC 容器准备完毕,准备创建Chat Server: 2023-03-10T09:37:20.285371
2023-03-10 09:37:20.286  INFO 118296 --- [main] c.h.i.server.chat.ChatServerBootStarter  : 启动Chat Server: class com.hk.im.server.chat.ChatServerBootStarter-2023-03-10T09:37:20.285371
2023-03-10 09:37:20.291  INFO 118296 --- [main] com.hk.im.admin.IMAdminApplication       : Started IMAdminApplication in 17.058 seconds (JVM running for 19.345)
2023-03-10 09:37:20.469  INFO 118296 --- [Thread-9] c.h.i.s.chat.server.HotKeyChatServer     : websocket 服务启动，ip=localhost,port=9870
2023-03-10 09:37:20.982  INFO 118296 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:14148
2023-03-10 09:37:20.982  INFO 118296 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:14148
2023-03-10 09:37:21.000  INFO 118296 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,headers=http://localhost:3000,method=GET
2023-03-10 09:37:21.012  INFO 118296 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:37:21.012  INFO 118296 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 09:37:21.717  INFO 118296 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw, extend=null)
2023-03-10 09:37:21.791  WARN 118296 --- [nioEventLoopGroup-5-1] c.b.m.c.t.support.ReflectLambdaMeta      : Unable to make field private final java.lang.Class java.lang.invoke.SerializedLambda.capturingClass accessible: module java.base does not "opens java.lang.invoke" to unnamed module @6a78afa0
2023-03-10 09:37:22.129  INFO 118296 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 09:37:22.211  INFO 118296 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 09:37:22.810  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-10 09:37:22.810  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-03-10 09:37:22.812  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2023-03-10 09:37:22.845  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=bef7b08a-80ca-4431-a620-1b01297293e8],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T09:37:22.845594300]
2023-03-10 09:37:23.009  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=8c6f4438-1fd2-4d0a-aebb-f78d0e9ef9e0],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T09:37:23.009902400]
2023-03-10 09:37:23.010  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@73bfdc1f,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:37:23.019  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@70c2dd1,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:37:23.058  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 09:45:45.844  INFO 118296 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接断开：/127.0.0.1:14148,id=907841fffe2e6da0-0001ce18-00000009-0fcb97605eb96808-93cc156a
2023-03-10 09:45:45.866  INFO 118296 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接断开：/127.0.0.1:14148
2023-03-10 09:45:48.087  INFO 118296 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:14704
2023-03-10 09:45:48.087  INFO 118296 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:14704
2023-03-10 09:45:48.090  INFO 118296 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,headers=http://localhost:3000,method=GET
2023-03-10 09:45:48.090  INFO 118296 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:45:48.090  INFO 118296 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 09:45:48.112  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=e6913bd0-f6c5-4c7b-afcb-3efaef01ecbf],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=OPTIONS],[time=2023-03-10T09:45:48.112961900]
2023-03-10 09:45:48.113  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=fc552b8b-3332-4193-9385-923b78cd4319],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=OPTIONS],[time=2023-03-10T09:45:48.112961900]
2023-03-10 09:45:48.117  INFO 118296 --- [ConsumeMessageThread_chat-connect-group_2] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw, extend=null)
2023-03-10 09:45:48.124  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=ba45439c-9000-4d76-9932-06f94eebb6a6],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T09:45:48.124964100]
2023-03-10 09:45:48.124  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@1d6ea96f,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:45:48.125  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=029b7401-415a-4428-9602-90cde12ce4b3],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=GET],[time=2023-03-10T09:45:48.125965200]
2023-03-10 09:45:48.126  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@38793eab,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:45:48.127  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@13a944b2,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:45:48.128  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@70c2dd1,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:45:48.143  INFO 118296 --- [ConsumeMessageThread_chat-connect-group_2] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 09:45:48.620  INFO 118296 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 09:45:48.685  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=a0e24206-7f42-4d70-9f12-c4eecea26d58],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T09:45:48.685368900]
2023-03-10 09:45:48.741  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=48808861-647f-4431-be42-e2ff094ed246],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T09:45:48.741369600]
2023-03-10 09:45:48.741  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@6daa831d,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:45:48.744  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@13a944b2,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:45:48.745  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 09:45:52.494  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=dae48b3a-f97c-4c4d-a464-1198926b55eb],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=OPTIONS],[time=2023-03-10T09:45:52.493157400]
2023-03-10 09:45:52.494  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=5dbc3091-0bca-45f0-9b8f-48eb8a46f1ff],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T09:45:52.494157600]
2023-03-10 09:45:52.509  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=0483fad6-623d-4c11-8931-460c257220c3],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=GET],[time=2023-03-10T09:45:52.509173700]
2023-03-10 09:45:52.510  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@2e1d21b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:45:52.510  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=c61d5419-5015-4314-a3b8-5d025fd710a2],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T09:45:52.510157200]
2023-03-10 09:45:52.510  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@401b0438,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:45:52.512  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@13a944b2,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:45:52.512  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@70c2dd1,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:45:52.886  INFO 118296 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":["1631131068348272641","1631536603358920706","1631543156694679554","1631543980913164289","1631544981921562625","1631545332447936513","1631547912842420226","1631549401233117186","1631549482778775553","1631549872870019074","1633008691928141825","1633009164240326658","1633360461682462722"]}}
2023-03-10 09:45:55.718  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=65a1b034-4b6d-4ae8-8a6d-04b23dbb82bc],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T09:45:55.718254100]
2023-03-10 09:45:55.726  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=cf10a54d-8843-4a13-b915-d47355a80861],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T09:45:55.726269600]
2023-03-10 09:45:55.727  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@3b4990a5,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:45:55.729  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@70c2dd1,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:45:55.881  INFO 118296 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":["1630117054164103170","1630118875163127810","1630119255745884162","1630119687062843394","1630121566790512641","1630121910618681345","1630124550480064514","1630125121740054530","1630125362539241473","1630156667502997505","1630156985452212225","1630158680160743426","1630166382639329282","1630167575428083713","1630176890545303554"]}}
2023-03-10 09:45:57.037  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=a22fc99b-6e08-4668-bac7-39652fde9bde],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T09:45:57.037008600]
2023-03-10 09:45:57.049  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=5ae5c654-919c-405d-98bc-6316bef339d3],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T09:45:57.049010300]
2023-03-10 09:45:57.049  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@5b1cace7,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:45:57.051  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@70c2dd1,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:45:57.072  INFO 118296 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":[]}}
2023-03-10 09:46:16.553  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=f8d2b23a-2b85-4646-9ff6-a288c2433bb7],[ip=127.0.0.1],[uri=/admin/message/send/text],[method=OPTIONS],[time=2023-03-10T09:46:16.553150200]
2023-03-10 09:46:16.559  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=b160f468-87a1-4084-b301-486b4d9f188f],[ip=127.0.0.1],[uri=/admin/message/send/text],[method=POST],[time=2023-03-10T09:46:16.559131600]
2023-03-10 09:46:16.559  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@7bfee66b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:46:16.561  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@70c2dd1,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:46:17.101  INFO 118296 --- [async-service-1] c.h.i.i.e.c.l.CommunicationEventListener : refresh sequence and session ttl: Sequence(id=null, name=null, description=null, sessionId=null, receiverId=1612030664754913281, senderId=1611656761503215617, max=null, step=null, segment=null, version=null, createTime=null, updateTime=null, current=1)
2023-03-10 09:46:17.130  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_chat_message  ( id,
sequence,
message_feature,
message_type,
content,



create_time,
update_time )  VALUES  ( ?,
?,
?,
?,
?,



?,
? )
2023-03-10 09:46:17.158  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 09:46:17.687  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_message_flow  ( id,

sender_id,
receiver_id,
chat_type,
message_type,
message_id,
`sequence`,
send_status,
sign_flag,

deleted,
create_time,
update_time )  VALUES  ( ?,

?,
?,
?,
?,
?,
?,
?,
?,

?,
?,
? )
2023-03-10 09:46:17.688  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 09:46:17.704  INFO 118296 --- [async-service-2] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 09:46:17.705  INFO 118296 --- [async-service-2] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 09:46:18.176  INFO 118296 --- [async-service-2] c.h.i.i.e.m.l.MessageEventHandler        : Sent message by rocketmq: SendResult [sendStatus=SEND_OK, msgId=7F000001CE1863947C6B307202AE0002, offsetMsgId=2F6C928D00002A9F0000000000018F3A, messageQueue=MessageQueue [topic=chat-topic, brokerName=broker-a, queueId=0], queueOffset=6]
2023-03-10 09:51:45.781  INFO 118296 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 09:51:45.782  INFO 118296 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 09:51:45.819  INFO 118296 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 09:51:45.819  INFO 118296 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 09:51:45.850  INFO 118296 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 09:51:45.851  INFO 118296 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 09:51:45.940  INFO 118296 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:51:45.940  INFO 118296 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:51:45.940  INFO 118296 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:51:45.981  INFO 118296 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 09:51:45.981  INFO 118296 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 09:51:45.986  INFO 118296 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 09:51:46.002  INFO 118296 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closing ...
2023-03-10 09:51:46.048  INFO 118296 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2023-03-10 09:51:57.286  INFO 110184 --- [main] com.hk.im.admin.IMAdminApplication       : Starting IMAdminApplication using Java 17.0.2 on DESKTOP-PICLGLQ with PID 110184 (F:\JavaCode\HotKeyIM\im-web\im-admin\target\classes started by HK意境 in F:\JavaCode\HotKeyIM)
2023-03-10 09:51:57.297  INFO 110184 --- [main] com.hk.im.admin.IMAdminApplication       : The following 1 profile is active: "dev"
2023-03-10 09:52:01.761  INFO 110184 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 09:52:01.761  INFO 110184 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-03-10 09:52:01.790  INFO 110184 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 0 JPA repository interfaces.
2023-03-10 09:52:01.814  INFO 110184 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 09:52:01.816  INFO 110184 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-10 09:52:01.837  INFO 110184 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2023-03-10 09:52:02.355  INFO 110184 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvice' of type [com.hk.im.admin.advice.MethodTraceAdvice$$EnhancerBySpringCGLIB$$70be86a0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 09:52:02.374  INFO 110184 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 09:52:03.145  INFO 110184 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9090 (http)
2023-03-10 09:52:03.164  INFO 110184 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-03-10 09:52:03.165  INFO 110184 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2023-03-10 09:52:03.498  INFO 110184 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring embedded WebApplicationContext
2023-03-10 09:52:03.498  INFO 110184 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 6116 ms
2023-03-10 09:52:04.154  INFO 110184 --- [main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2023-03-10 09:52:05.012  INFO 110184 --- [main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2023-03-10 09:52:05.345  INFO 110184 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-03-10 09:52:05.565  INFO 110184 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2023-03-10 09:52:05.972  INFO 110184 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-03-10 09:52:06.191  INFO 110184 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2023-03-10 09:52:06.538  INFO 110184 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-03-10 09:52:06.560  INFO 110184 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 09:52:07.201  WARN 110184 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.CollectEmoticon ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:52:07.604  WARN 110184 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.LikePost ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:52:07.697  WARN 110184 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.NoteTag ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:52:07.847  WARN 110184 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.UserCollection ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:52:09.264  INFO 110184 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server address:localhost
2023-03-10 09:52:09.265  INFO 110184 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server port:9870
2023-03-10 09:52:09.265  INFO 110184 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server serializer:Json
2023-03-10 09:52:09.265  INFO 110184 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server path:/channel
2023-03-10 09:52:09.277  INFO 110184 --- [main] c.h.i.s.p.c.SendTextMessageConsumer      : sendMessage consumer bean created
2023-03-10 09:52:10.047  INFO 110184 --- [main] c.h.i.s.p.config.ExecutorConfiguration   : start asyncServiceExecutor
2023-03-10 09:52:10.130  WARN 110184 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-03-10 09:52:11.188  INFO 110184 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:52:11.189  INFO 110184 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sendTextMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-10 09:52:11.357  INFO 110184 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:52:11.357  INFO 110184 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:userConnectedConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2023-03-10 09:52:11.515  INFO 110184 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:52:11.516  INFO 110184 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sentImageMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2023-03-10 09:52:11.576  INFO 110184 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9090 (http) with context path '/admin'
2023-03-10 09:52:11.589  INFO 110184 --- [main] c.h.i.server.chat.ChatServerBootStarter  : IOC 容器准备完毕,准备创建Chat Server: 2023-03-10T09:52:11.589553800
2023-03-10 09:52:11.589  INFO 110184 --- [main] c.h.i.server.chat.ChatServerBootStarter  : 启动Chat Server: class com.hk.im.server.chat.ChatServerBootStarter-2023-03-10T09:52:11.589553800
2023-03-10 09:52:11.596  INFO 110184 --- [main] com.hk.im.admin.IMAdminApplication       : Started IMAdminApplication in 15.207 seconds (JVM running for 16.785)
2023-03-10 09:52:11.791  INFO 110184 --- [Thread-9] c.h.i.s.chat.server.HotKeyChatServer     : websocket 服务启动，ip=localhost,port=9870
2023-03-10 09:52:14.248  INFO 110184 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:2407
2023-03-10 09:52:14.248  INFO 110184 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:2407
2023-03-10 09:52:14.263  INFO 110184 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,headers=http://localhost:3000,method=GET
2023-03-10 09:52:14.264  INFO 110184 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:52:14.264  INFO 110184 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 09:52:14.851  INFO 110184 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw, extend=null)
2023-03-10 09:52:14.884  WARN 110184 --- [nioEventLoopGroup-5-1] c.b.m.c.t.support.ReflectLambdaMeta      : Unable to make field private final java.lang.Class java.lang.invoke.SerializedLambda.capturingClass accessible: module java.base does not "opens java.lang.invoke" to unnamed module @6a78afa0
2023-03-10 09:52:15.295  INFO 110184 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 09:52:15.368  INFO 110184 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 09:52:15.847  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-10 09:52:15.847  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-03-10 09:52:15.849  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2023-03-10 09:52:15.877  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=427c164c-a176-48ec-b955-e9f32b3dc536],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T09:52:15.877133200]
2023-03-10 09:52:16.119  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=fabd1fb7-cecb-48f3-b23d-c5b5ea5ddae3],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T09:52:16.119945800]
2023-03-10 09:52:16.119  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@41f7bc69,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:52:16.128  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@7522049f,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:52:16.152  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 09:52:34.625  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=d44f6b28-4a8d-463e-bf1a-07b57d69b69a],[ip=127.0.0.1],[uri=/admin/message/send/text],[method=OPTIONS],[time=2023-03-10T09:52:34.625738400]
2023-03-10 09:52:34.632  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=dec24fe7-5406-44c3-a819-4b106fbcee13],[ip=127.0.0.1],[uri=/admin/message/send/text],[method=POST],[time=2023-03-10T09:52:34.632749900]
2023-03-10 09:52:34.633  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@690ad6,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:52:34.636  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@7522049f,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:52:34.679  INFO 110184 --- [async-service-1] c.h.i.i.e.c.l.CommunicationEventListener : refresh sequence and session ttl: Sequence(id=null, name=null, description=null, sessionId=null, receiverId=1612030664754913281, senderId=1611656761503215617, max=null, step=null, segment=null, version=null, createTime=null, updateTime=null, current=1)
2023-03-10 09:52:34.693  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_chat_message  ( id,
sequence,
message_feature,
message_type,
content,



create_time,
update_time )  VALUES  ( ?,
?,
?,
?,
?,



?,
? )
2023-03-10 09:52:34.695  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-4] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 09:52:34.723  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_message_flow  ( id,

sender_id,
receiver_id,
chat_type,
message_type,
message_id,
`sequence`,
send_status,
sign_flag,

deleted,
create_time,
update_time )  VALUES  ( ?,

?,
?,
?,
?,
?,
?,
?,
?,

?,
?,
? )
2023-03-10 09:52:34.724  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-4] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 09:52:34.849  INFO 110184 --- [async-service-2] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 09:52:34.852  INFO 110184 --- [async-service-2] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 09:52:35.001  INFO 110184 --- [async-service-2] c.h.i.i.e.m.l.MessageEventHandler        : Sent message by rocketmq: SendResult [sendStatus=SEND_OK, msgId=7F000001AE6863947C6B3077C2A80001, offsetMsgId=2F6C928D00002A9F00000000000198BF, messageQueue=MessageQueue [topic=chat-topic, brokerName=broker-a, queueId=0], queueOffset=7]
2023-03-10 09:59:22.551  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=ca2780b1-da51-4324-bd5f-e8de62c66193],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=OPTIONS],[time=2023-03-10T09:59:22.550552700]
2023-03-10 09:59:22.621  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=82c1c4ce-9388-4300-ad4f-459136b33363],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=POST],[time=2023-03-10T09:59:22.621540300]
2023-03-10 09:59:22.621  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@232da599,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:59:22.624  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.i.UserLoginInterceptor           : requeset:org.springframework.web.multipart.support.StandardMultipartHttpServletRequest@393358dc,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:59:22.650 ERROR 110184 --- [http-nio-127.0.0.1-9090-exec-9] c.hk.im.admin.advice.WebExceptionAdvice  : common exception:

org.springframework.web.HttpMediaTypeNotSupportedException: Content type 'multipart/form-data;boundary=----WebKitFormBoundaryEtA8wlpIbUst2t3W;charset=UTF-8' not supported
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:211) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.readWithMessageConverters(RequestResponseBodyMethodProcessor.java:160) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:133) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:179) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:146) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:124) ~[druid-1.2.8.jar:1.2.8]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]

2023-03-10 10:01:06.475  INFO 110184 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:01:06.476  INFO 110184 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:01:06.510  INFO 110184 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:01:06.510  INFO 110184 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:01:06.544  INFO 110184 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:01:06.544  INFO 110184 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:01:06.568  INFO 110184 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:01:06.569  INFO 110184 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:01:06.569  INFO 110184 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:01:06.638  INFO 110184 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:01:06.638  INFO 110184 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:01:06.641  INFO 110184 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 10:01:06.644  INFO 110184 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closing ...
2023-03-10 10:01:06.651  INFO 110184 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2023-03-10 10:01:17.472  INFO 85864 --- [main] com.hk.im.admin.IMAdminApplication       : Starting IMAdminApplication using Java 17.0.2 on DESKTOP-PICLGLQ with PID 85864 (F:\JavaCode\HotKeyIM\im-web\im-admin\target\classes started by HK意境 in F:\JavaCode\HotKeyIM)
2023-03-10 10:01:17.476  INFO 85864 --- [main] com.hk.im.admin.IMAdminApplication       : The following 1 profile is active: "dev"
2023-03-10 10:01:19.050  INFO 85864 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 10:01:19.050  INFO 85864 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-03-10 10:01:19.079  INFO 85864 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 0 JPA repository interfaces.
2023-03-10 10:01:19.100  INFO 85864 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 10:01:19.102  INFO 85864 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-10 10:01:19.125  INFO 85864 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2023-03-10 10:01:19.664  INFO 85864 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvice' of type [com.hk.im.admin.advice.MethodTraceAdvice$$EnhancerBySpringCGLIB$$10c605f] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 10:01:19.683  INFO 85864 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 10:01:20.383  INFO 85864 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9090 (http)
2023-03-10 10:01:20.398  INFO 85864 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-03-10 10:01:20.399  INFO 85864 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2023-03-10 10:01:20.690  INFO 85864 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring embedded WebApplicationContext
2023-03-10 10:01:20.691  INFO 85864 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3136 ms
2023-03-10 10:01:21.321  INFO 85864 --- [main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2023-03-10 10:01:22.062  INFO 85864 --- [main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2023-03-10 10:01:22.219  INFO 85864 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-03-10 10:01:22.301  INFO 85864 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2023-03-10 10:01:22.528  INFO 85864 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-03-10 10:01:22.722  INFO 85864 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2023-03-10 10:01:22.977  INFO 85864 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-03-10 10:01:22.996  INFO 85864 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 10:01:23.521  WARN 85864 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.CollectEmoticon ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:01:23.911  WARN 85864 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.LikePost ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:01:24.013  WARN 85864 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.NoteTag ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:01:24.205  WARN 85864 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.UserCollection ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:01:25.480  INFO 85864 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server address:localhost
2023-03-10 10:01:25.482  INFO 85864 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server port:9870
2023-03-10 10:01:25.482  INFO 85864 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server serializer:Json
2023-03-10 10:01:25.482  INFO 85864 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server path:/channel
2023-03-10 10:01:25.492  INFO 85864 --- [main] c.h.i.s.p.c.SendTextMessageConsumer      : sendMessage consumer bean created
2023-03-10 10:01:26.282  INFO 85864 --- [main] c.h.i.s.p.config.ExecutorConfiguration   : start asyncServiceExecutor
2023-03-10 10:01:26.363  WARN 85864 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-03-10 10:01:27.437  INFO 85864 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:01:27.437  INFO 85864 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sendTextMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-10 10:01:27.623  INFO 85864 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:01:27.623  INFO 85864 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:userConnectedConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2023-03-10 10:01:27.842  INFO 85864 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:01:27.843  INFO 85864 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sentImageMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2023-03-10 10:01:27.892  INFO 85864 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9090 (http) with context path '/admin'
2023-03-10 10:01:27.901  INFO 85864 --- [main] c.h.i.server.chat.ChatServerBootStarter  : IOC 容器准备完毕,准备创建Chat Server: 2023-03-10T10:01:27.901598900
2023-03-10 10:01:27.902  INFO 85864 --- [main] c.h.i.server.chat.ChatServerBootStarter  : 启动Chat Server: class com.hk.im.server.chat.ChatServerBootStarter-2023-03-10T10:01:27.902217100
2023-03-10 10:01:27.913  INFO 85864 --- [main] com.hk.im.admin.IMAdminApplication       : Started IMAdminApplication in 11.252 seconds (JVM running for 12.57)
2023-03-10 10:01:28.097  INFO 85864 --- [Thread-9] c.h.i.s.chat.server.HotKeyChatServer     : websocket 服务启动，ip=localhost,port=9870
2023-03-10 10:01:29.240  INFO 85864 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:3006
2023-03-10 10:01:29.241  INFO 85864 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:3006
2023-03-10 10:01:29.255  INFO 85864 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,headers=http://localhost:3000,method=GET
2023-03-10 10:01:29.255  INFO 85864 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:01:29.256  INFO 85864 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:01:29.858  INFO 85864 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw, extend=null)
2023-03-10 10:01:29.915  WARN 85864 --- [nioEventLoopGroup-5-1] c.b.m.c.t.support.ReflectLambdaMeta      : Unable to make field private final java.lang.Class java.lang.invoke.SerializedLambda.capturingClass accessible: module java.base does not "opens java.lang.invoke" to unnamed module @2f4948e4
2023-03-10 10:01:30.163  INFO 85864 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 10:01:30.237  INFO 85864 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:01:30.673  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-10 10:01:30.674  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-03-10 10:01:30.675  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-03-10 10:01:30.704  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=6b267643-56d5-430f-a792-4df0d98cd9ba],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T10:01:30.704715200]
2023-03-10 10:01:30.854  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=ae2ef0fa-4cdb-427a-a14d-3696250eec67],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:01:30.854432500]
2023-03-10 10:01:30.854  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@21c01d4d,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:01:30.863  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@661a3347,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:01:30.888  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 10:01:42.566  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=5a4ec265-0e0c-4cc6-9d2b-1b790f41b20e],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=OPTIONS],[time=2023-03-10T10:01:42.566894100]
2023-03-10 10:01:42.621  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=33ba56c1-5d91-4ac0-858d-527bc0d906e4],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=POST],[time=2023-03-10T10:01:42.621912500]
2023-03-10 10:01:42.622  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@3ba8ee26,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:01:42.624  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset:org.springframework.web.multipart.support.StandardMultipartHttpServletRequest@689d7465,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:01:43.319  INFO 85864 --- [async-service-1] c.h.i.i.e.c.l.CommunicationEventListener : refresh sequence and session ttl: Sequence(id=null, name=null, description=null, sessionId=null, receiverId=1612030664754913281, senderId=1611656761503215617, max=null, step=null, segment=null, version=null, createTime=null, updateTime=null, current=1)
2023-03-10 10:01:43.343  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_chat_message  ( id,
sequence,
message_feature,
message_type,
content,
url,
extra,

create_time,
update_time )  VALUES  ( ?,
?,
?,
?,
?,
?,
?,

?,
? )
2023-03-10 10:01:43.345  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-4] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:01:43.473  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_message_flow  ( id,

sender_id,
receiver_id,
chat_type,
message_type,
message_id,
`sequence`,
send_status,
sign_flag,

deleted,
create_time,
update_time )  VALUES  ( ?,

?,
?,
?,
?,
?,
?,
?,
?,

?,
?,
? )
2023-03-10 10:01:43.474  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-4] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:01:43.669  INFO 85864 --- [async-service-2] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 10:01:43.674  INFO 85864 --- [async-service-2] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:01:43.800  INFO 85864 --- [async-service-2] c.h.i.i.e.m.l.MessageEventHandler        : Sent message by rocketmq: SendResult [sendStatus=SEND_OK, msgId=7F0000014F6863947C6B308022680001, offsetMsgId=2F6C928D00002A9F000000000001A22F, messageQueue=MessageQueue [topic=chat-topic, brokerName=broker-a, queueId=1], queueOffset=6]
2023-03-10 10:05:10.378  INFO 85864 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:05:10.379  INFO 85864 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:05:10.412  INFO 85864 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:05:10.412  INFO 85864 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:05:11.424  INFO 85864 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:05:11.424  INFO 85864 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:05:11.450  INFO 85864 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:05:11.450  INFO 85864 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:05:11.450  INFO 85864 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:05:11.486  INFO 85864 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:05:11.487  INFO 85864 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:05:11.489  INFO 85864 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 10:05:11.492  INFO 85864 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closing ...
2023-03-10 10:05:11.500  INFO 85864 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2023-03-10 10:05:24.307  INFO 88288 --- [main] com.hk.im.admin.IMAdminApplication       : Starting IMAdminApplication using Java 17.0.2 on DESKTOP-PICLGLQ with PID 88288 (F:\JavaCode\HotKeyIM\im-web\im-admin\target\classes started by HK意境 in F:\JavaCode\HotKeyIM)
2023-03-10 10:05:24.312  INFO 88288 --- [main] com.hk.im.admin.IMAdminApplication       : The following 1 profile is active: "dev"
2023-03-10 10:05:25.883  INFO 88288 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 10:05:25.883  INFO 88288 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-03-10 10:05:25.912  INFO 88288 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 0 JPA repository interfaces.
2023-03-10 10:05:25.935  INFO 88288 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 10:05:25.937  INFO 88288 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-10 10:05:25.956  INFO 88288 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2023-03-10 10:05:26.463  INFO 88288 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvice' of type [com.hk.im.admin.advice.MethodTraceAdvice$$EnhancerBySpringCGLIB$$15dc8be5] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 10:05:26.486  INFO 88288 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 10:05:27.188  INFO 88288 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9090 (http)
2023-03-10 10:05:27.204  INFO 88288 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-03-10 10:05:27.204  INFO 88288 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2023-03-10 10:05:27.466  INFO 88288 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring embedded WebApplicationContext
2023-03-10 10:05:27.466  INFO 88288 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3072 ms
2023-03-10 10:05:28.090  INFO 88288 --- [main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2023-03-10 10:05:28.908  INFO 88288 --- [main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2023-03-10 10:05:29.061  INFO 88288 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-03-10 10:05:29.151  INFO 88288 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2023-03-10 10:05:29.385  INFO 88288 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-03-10 10:05:29.581  INFO 88288 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2023-03-10 10:05:29.836  INFO 88288 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-03-10 10:05:29.854  INFO 88288 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 10:05:30.374  WARN 88288 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.CollectEmoticon ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:05:30.713  WARN 88288 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.LikePost ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:05:30.793  WARN 88288 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.NoteTag ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:05:30.939  WARN 88288 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.UserCollection ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:05:32.242  INFO 88288 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server address:localhost
2023-03-10 10:05:32.244  INFO 88288 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server port:9870
2023-03-10 10:05:32.244  INFO 88288 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server serializer:Json
2023-03-10 10:05:32.244  INFO 88288 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server path:/channel
2023-03-10 10:05:32.253  INFO 88288 --- [main] c.h.i.s.p.c.SendTextMessageConsumer      : sendMessage consumer bean created
2023-03-10 10:05:32.938  INFO 88288 --- [main] c.h.i.s.p.config.ExecutorConfiguration   : start asyncServiceExecutor
2023-03-10 10:05:33.015  WARN 88288 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-03-10 10:05:34.051  INFO 88288 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:05:34.051  INFO 88288 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sendTextMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-10 10:05:34.213  INFO 88288 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:05:34.213  INFO 88288 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:userConnectedConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2023-03-10 10:05:34.377  INFO 88288 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='image-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:05:34.378  INFO 88288 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sentImageMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2023-03-10 10:05:34.427  INFO 88288 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9090 (http) with context path '/admin'
2023-03-10 10:05:34.437  INFO 88288 --- [main] c.h.i.server.chat.ChatServerBootStarter  : IOC 容器准备完毕,准备创建Chat Server: 2023-03-10T10:05:34.437840100
2023-03-10 10:05:34.437  INFO 88288 --- [main] c.h.i.server.chat.ChatServerBootStarter  : 启动Chat Server: class com.hk.im.server.chat.ChatServerBootStarter-2023-03-10T10:05:34.437840100
2023-03-10 10:05:34.444  INFO 88288 --- [main] com.hk.im.admin.IMAdminApplication       : Started IMAdminApplication in 10.962 seconds (JVM running for 12.394)
2023-03-10 10:05:34.627  INFO 88288 --- [Thread-9] c.h.i.s.chat.server.HotKeyChatServer     : websocket 服务启动，ip=localhost,port=9870
2023-03-10 10:05:34.763  INFO 88288 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:14362
2023-03-10 10:05:34.764  INFO 88288 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:14362
2023-03-10 10:05:34.779  INFO 88288 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,headers=http://localhost:3000,method=GET
2023-03-10 10:05:34.780  INFO 88288 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:05:34.780  INFO 88288 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:05:35.409  INFO 88288 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw, extend=null)
2023-03-10 10:05:35.458  WARN 88288 --- [nioEventLoopGroup-5-1] c.b.m.c.t.support.ReflectLambdaMeta      : Unable to make field private final java.lang.Class java.lang.invoke.SerializedLambda.capturingClass accessible: module java.base does not "opens java.lang.invoke" to unnamed module @6a78afa0
2023-03-10 10:05:35.553  INFO 88288 --- [ConsumeMessageThread_image-message-group_1] c.h.i.s.p.c.SentImageMessageConsumer     : rocketmq on message(chat message image): MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:05:35.591  INFO 88288 --- [async-service-1] c.h.i.s.push.worker.MessageSynchronizer  : MessageSynchronizer synchronize message to me=1611656761503215617,message=MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:05:35.591  INFO 88288 --- [ConsumeMessageThread_image-message-group_1] c.h.i.s.p.worker.MessageOfflineWorker    : offline message handle start:MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:05:35.608 ERROR 88288 --- [async-service-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void com.hk.im.server.push.worker.MessageSynchronizer.synchronizeSelf(com.hk.im.domain.vo.MessageVO)

java.lang.IllegalStateException: Unexpected value: IMAGE
	at com.hk.im.server.common.message.MessageConverter.generateMessage(MessageConverter.java:30) ~[classes/:na]
	at com.hk.im.server.push.worker.MessageSynchronizer.doPushMessage(MessageSynchronizer.java:78) ~[classes/:na]
	at com.hk.im.server.push.worker.MessageSynchronizer.synchronizeSelf(MessageSynchronizer.java:49) ~[classes/:na]
	at com.hk.im.server.push.worker.MessageSynchronizer$$FastClassBySpringCGLIB$$1885410e.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783) ~[spring-aop-5.3.18.jar:5.3.18]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.18.jar:5.3.18]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753) ~[spring-aop-5.3.18.jar:5.3.18]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.3.18.jar:5.3.18]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]

2023-03-10 10:05:35.760  INFO 88288 --- [ConsumeMessageThread_image-message-group_1] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 10:05:35.771  INFO 88288 --- [ConsumeMessageThread_image-message-group_1] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:05:35.782  INFO 88288 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 10:05:35.852  INFO 88288 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:05:36.283  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-10 10:05:36.283  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-03-10 10:05:36.285  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-03-10 10:05:36.322  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=f0d0cb9b-60ce-4b13-afa0-fa67dd581bae],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T10:05:36.322017100]
2023-03-10 10:05:36.466  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=f67d5e09-64bb-4c29-a3cb-16c817b30346],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:05:36.466000800]
2023-03-10 10:05:36.467  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@5cdda59a,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:05:36.476  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@14f78fc0,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:05:36.504  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 10:05:48.012  INFO 88288 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接断开：/127.0.0.1:14362,id=907841fffe2e6da0-000158e0-00000009-286d362507970072-a5afe014
2023-03-10 10:05:48.013  INFO 88288 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接断开：/127.0.0.1:14362
2023-03-10 10:05:50.130  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=19533d04-54c6-4f0e-969c-5b2b467049d6],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=OPTIONS],[time=2023-03-10T10:05:50.130734400]
2023-03-10 10:05:50.132  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=5594a61e-4112-4536-92c9-6c454271bf78],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=OPTIONS],[time=2023-03-10T10:05:50.132777800]
2023-03-10 10:05:50.150  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=e89ff850-09d0-4b5a-9aa5-3fec1b913827],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=GET],[time=2023-03-10T10:05:50.150733700]
2023-03-10 10:05:50.150  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@32544011,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:05:50.153  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=66ab4d39-444c-4bc2-9bc7-1733dc93f64d],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T10:05:50.153734100]
2023-03-10 10:05:50.153  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@38c769e6,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:05:50.154  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c93b82b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:05:50.156  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@14f78fc0,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:05:50.407  INFO 88288 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:9321
2023-03-10 10:05:50.407  INFO 88288 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:9321
2023-03-10 10:05:50.410  INFO 88288 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,headers=http://localhost:3000,method=GET
2023-03-10 10:05:50.410  INFO 88288 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:05:50.410  INFO 88288 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:05:50.436  INFO 88288 --- [ConsumeMessageThread_chat-connect-group_2] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw, extend=null)
2023-03-10 10:05:50.448  INFO 88288 --- [ConsumeMessageThread_chat-connect-group_2] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 10:05:50.882  INFO 88288 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:05:50.908  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=4950ea66-85be-4f69-b2e4-06f08630d5cc],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T10:05:50.908500900]
2023-03-10 10:05:50.986  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=13a043b2-f3c3-4887-b40c-df29dbc9910c],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:05:50.986502200]
2023-03-10 10:05:50.986  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@5d91323f,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:05:50.990  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c93b82b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:05:50.990  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 10:05:54.211  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=1670265e-4939-4483-935a-70ea5a8fe7d2],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=OPTIONS],[time=2023-03-10T10:05:54.211116900]
2023-03-10 10:05:54.211  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=a79e4735-21de-4b12-95be-52023ba4b722],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T10:05:54.211116900]
2023-03-10 10:05:54.231  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=d23ed3e4-b2cc-4676-9f1a-c4902525d4fc],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=GET],[time=2023-03-10T10:05:54.231115500]
2023-03-10 10:05:54.231  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@7cb05945,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:05:54.231  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=48cf9936-2d06-49f9-8e4e-e88967cc7f00],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T10:05:54.231115500]
2023-03-10 10:05:54.232  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@7333abcc,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:05:54.233  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c93b82b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:05:54.234  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@14f78fc0,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:05:54.465  INFO 88288 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":["1631536603358920706","1631543156694679554","1631543980913164289","1631544981921562625","1631545332447936513","1631547912842420226","1631549401233117186","1631549482778775553","1631549872870019074","1633008691928141825","1633009164240326658","1633360461682462722"]}}
2023-03-10 10:07:51.596  INFO 88288 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接断开：/127.0.0.1:9321,id=907841fffe2e6da0-000158e0-0000000c-16ce783027975dc5-c1967f39
2023-03-10 10:07:51.596  INFO 88288 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接断开：/127.0.0.1:9321
2023-03-10 10:07:53.847  INFO 88288 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:11190
2023-03-10 10:07:53.847  INFO 88288 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:11190
2023-03-10 10:07:53.851  INFO 88288 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,headers=http://localhost:3000,method=GET
2023-03-10 10:07:53.851  INFO 88288 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:07:53.851  INFO 88288 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:07:53.875  INFO 88288 --- [ConsumeMessageThread_chat-connect-group_3] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw, extend=null)
2023-03-10 10:07:53.879  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=1b452c0b-bf56-4504-ad94-6ec951d25048],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=OPTIONS],[time=2023-03-10T10:07:53.879183700]
2023-03-10 10:07:53.880  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=bec2915e-cbe3-4bc6-b7ac-2c3aa67802a1],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=OPTIONS],[time=2023-03-10T10:07:53.880200500]
2023-03-10 10:07:53.887  INFO 88288 --- [ConsumeMessageThread_chat-connect-group_3] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 10:07:53.890  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=40eca2a8-00b3-4604-8aeb-0fa948e51828],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T10:07:53.890184500]
2023-03-10 10:07:53.891  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@33a8242e,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:07:53.891  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=2b27197c-cda7-4ddb-8a10-26756c0ac8dc],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=GET],[time=2023-03-10T10:07:53.891184]
2023-03-10 10:07:53.891  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@e416156,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:07:53.894  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c93b82b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:07:53.894  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@14f78fc0,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:07:54.335  INFO 88288 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:07:54.383  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=b9b45a78-dd4c-43a4-83b1-a1c2804c59ff],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T10:07:54.383177100]
2023-03-10 10:07:54.467  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=717397aa-4910-4ff5-8ad4-bc0b99802ef3],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:07:54.467165400]
2023-03-10 10:07:54.468  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@18031286,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:07:54.470  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c93b82b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:07:54.471  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 10:07:57.041  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=d63debf0-1b48-476a-8297-24e719711d2e],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T10:07:57.041557900]
2023-03-10 10:07:57.041  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=82f49426-38f7-486a-b4b5-6b57c5226218],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=OPTIONS],[time=2023-03-10T10:07:57.041557900]
2023-03-10 10:07:57.054  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=7abac601-634e-4651-bd57-10986aab971c],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T10:07:57.054557200]
2023-03-10 10:07:57.054  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@49680808,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:07:57.055  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=f98dac88-47ca-4479-be65-c93fbca80cd1],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=GET],[time=2023-03-10T10:07:57.055557300]
2023-03-10 10:07:57.056  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@67dd2103,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:07:57.056  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@14f78fc0,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:07:57.059  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c93b82b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:07:57.166  INFO 88288 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":["1631536603358920706","1631543156694679554","1631543980913164289","1631544981921562625","1631545332447936513","1631547912842420226","1631549401233117186","1631549482778775553","1631549872870019074","1633008691928141825","1633009164240326658","1633360461682462722"]}}
2023-03-10 10:08:18.370  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=c20bb23f-95b7-4a86-b091-ef8b1ef7a2c9],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=OPTIONS],[time=2023-03-10T10:08:18.370509200]
2023-03-10 10:08:18.424  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=faed28ba-3e73-4d58-9d4d-7c61991c7260],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=POST],[time=2023-03-10T10:08:18.424549700]
2023-03-10 10:08:18.424  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@644802c3,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:08:18.426  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset:org.springframework.web.multipart.support.StandardMultipartHttpServletRequest@43e041d2,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:08:18.819  INFO 88288 --- [async-service-2] c.h.i.i.e.c.l.CommunicationEventListener : refresh sequence and session ttl: Sequence(id=null, name=null, description=null, sessionId=null, receiverId=1612030664754913281, senderId=1611656761503215617, max=null, step=null, segment=null, version=null, createTime=null, updateTime=null, current=1)
2023-03-10 10:08:18.840  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_chat_message  ( id,
sequence,
message_feature,
message_type,
content,
url,
extra,

create_time,
update_time )  VALUES  ( ?,
?,
?,
?,
?,
?,
?,

?,
? )
2023-03-10 10:08:18.842  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:08:18.869  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_message_flow  ( id,

sender_id,
receiver_id,
chat_type,
message_type,
message_id,
`sequence`,
send_status,
sign_flag,

deleted,
create_time,
update_time )  VALUES  ( ?,

?,
?,
?,
?,
?,
?,
?,
?,

?,
?,
? )
2023-03-10 10:08:18.869  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:08:18.993  INFO 88288 --- [async-service-3] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 10:08:18.996  INFO 88288 --- [async-service-3] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:08:19.110  INFO 88288 --- [async-service-3] c.h.i.i.e.m.l.MessageEventHandler        : Sent message by rocketmq: SendResult [sendStatus=SEND_OK, msgId=7F00000158E063947C6B30862A960003, offsetMsgId=2F6C928D00002A9F000000000001B1B4, messageQueue=MessageQueue [topic=chat-topic, brokerName=broker-a, queueId=2], queueOffset=4]
2023-03-10 10:08:19.111  INFO 88288 --- [ConsumeMessageThread_image-message-group_2] c.h.i.s.p.c.SentImageMessageConsumer     : rocketmq on message(chat message image): MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:08:19.112  INFO 88288 --- [ConsumeMessageThread_image-message-group_2] c.h.i.s.p.worker.MessageOfflineWorker    : offline message handle start:MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:08:19.112  INFO 88288 --- [async-service-4] c.h.i.s.push.worker.MessageSynchronizer  : MessageSynchronizer synchronize message to me=1611656761503215617,message=MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:08:19.113 ERROR 88288 --- [async-service-4] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void com.hk.im.server.push.worker.MessageSynchronizer.synchronizeSelf(com.hk.im.domain.vo.MessageVO)

java.lang.IllegalStateException: Unexpected value: IMAGE
	at com.hk.im.server.common.message.MessageConverter.generateMessage(MessageConverter.java:30) ~[classes/:na]
	at com.hk.im.server.push.worker.MessageSynchronizer.doPushMessage(MessageSynchronizer.java:78) ~[classes/:na]
	at com.hk.im.server.push.worker.MessageSynchronizer.synchronizeSelf(MessageSynchronizer.java:49) ~[classes/:na]
	at com.hk.im.server.push.worker.MessageSynchronizer$$FastClassBySpringCGLIB$$1885410e.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783) ~[spring-aop-5.3.18.jar:5.3.18]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.18.jar:5.3.18]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753) ~[spring-aop-5.3.18.jar:5.3.18]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.3.18.jar:5.3.18]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]

2023-03-10 10:08:19.116  INFO 88288 --- [ConsumeMessageThread_image-message-group_2] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 10:08:19.117  INFO 88288 --- [ConsumeMessageThread_image-message-group_2] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:10:26.374  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=057fbb12-bc0d-4dbd-9c6b-b588c68ee775],[ip=127.0.0.1],[uri=/admin/message/send/text],[method=OPTIONS],[time=2023-03-10T10:10:26.374717]
2023-03-10 10:10:26.380  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=fce0a9f5-d9ed-4e53-a991-83f8276bf88d],[ip=127.0.0.1],[uri=/admin/message/send/text],[method=POST],[time=2023-03-10T10:10:26.380719300]
2023-03-10 10:10:26.380  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@48032c66,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:10:26.383  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@14f78fc0,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:10:26.397  INFO 88288 --- [async-service-5] c.h.i.i.e.c.l.CommunicationEventListener : refresh sequence and session ttl: Sequence(id=null, name=null, description=null, sessionId=null, receiverId=1612030664754913281, senderId=1611656761503215617, max=null, step=null, segment=null, version=null, createTime=null, updateTime=null, current=1)
2023-03-10 10:10:26.398  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_chat_message  ( id,
sequence,
message_feature,
message_type,
content,



create_time,
update_time )  VALUES  ( ?,
?,
?,
?,
?,



?,
? )
2023-03-10 10:10:26.399  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:10:26.403  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_message_flow  ( id,

sender_id,
receiver_id,
chat_type,
message_type,
message_id,
`sequence`,
send_status,
sign_flag,

deleted,
create_time,
update_time )  VALUES  ( ?,

?,
?,
?,
?,
?,
?,
?,
?,

?,
?,
? )
2023-03-10 10:10:26.404  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:10:26.412  INFO 88288 --- [async-service-6] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 10:10:26.413  INFO 88288 --- [async-service-6] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:10:26.564  INFO 88288 --- [async-service-6] c.h.i.i.e.m.l.MessageEventHandler        : Sent message by rocketmq: SendResult [sendStatus=SEND_OK, msgId=7F00000158E063947C6B30881C740004, offsetMsgId=2F6C928D00002A9F000000000001B9A3, messageQueue=MessageQueue [topic=chat-topic, brokerName=broker-a, queueId=1], queueOffset=7]
2023-03-10 10:10:26.567  INFO 88288 --- [ConsumeMessageThread_chat-message-group_1] c.h.i.s.p.c.SendTextMessageConsumer      : rocketmq on message(chat message text): MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:10:26.568  INFO 88288 --- [ConsumeMessageThread_chat-message-group_1] c.h.i.s.p.worker.MessageOfflineWorker    : offline message handle start:MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:10:26.568  INFO 88288 --- [async-service-7] c.h.i.s.push.worker.MessageSynchronizer  : MessageSynchronizer synchronize message to me=1611656761503215617,message=MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:10:26.572  INFO 88288 --- [ConsumeMessageThread_chat-message-group_1] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 10:10:26.572  INFO 88288 --- [ConsumeMessageThread_chat-message-group_1] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:10:26.572  INFO 88288 --- [async-service-7] c.h.i.s.push.worker.MessageSynchronizer  : push message=DataContainer(actionType=1, event=event_talk, message=SimpleTextMessage(super=AbstractMessage(sequenceId=0, messageType=1, messageBO=MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)), extend=null), extra=null) to Channel=907841fffe2e6da0-000158e0-0000000d-1ec01d52e0957ff5-211d64aa
2023-03-10 10:14:33.557  INFO 88288 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:14:33.557  INFO 88288 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:14:33.594  INFO 88288 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:14:33.594  INFO 88288 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:14:33.628  INFO 88288 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:14:33.628  INFO 88288 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:14:33.655  INFO 88288 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='image-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:14:33.655  INFO 88288 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:14:33.656  INFO 88288 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:14:33.690  INFO 88288 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:14:33.691  INFO 88288 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:14:33.695  INFO 88288 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 10:14:33.698  INFO 88288 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closing ...
2023-03-10 10:14:33.705  INFO 88288 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2023-03-10 10:14:46.176  INFO 8632 --- [main] com.hk.im.admin.IMAdminApplication       : Starting IMAdminApplication using Java 17.0.2 on DESKTOP-PICLGLQ with PID 8632 (F:\JavaCode\HotKeyIM\im-web\im-admin\target\classes started by HK意境 in F:\JavaCode\HotKeyIM)
2023-03-10 10:14:46.182  INFO 8632 --- [main] com.hk.im.admin.IMAdminApplication       : The following 1 profile is active: "dev"
2023-03-10 10:14:47.740  INFO 8632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 10:14:47.740  INFO 8632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-03-10 10:14:47.770  INFO 8632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 16 ms. Found 0 JPA repository interfaces.
2023-03-10 10:14:47.792  INFO 8632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 10:14:47.794  INFO 8632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-10 10:14:47.813  INFO 8632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2023-03-10 10:14:48.338  INFO 8632 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvice' of type [com.hk.im.admin.advice.MethodTraceAdvice$$EnhancerBySpringCGLIB$$bb772c7a] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 10:14:48.360  INFO 8632 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 10:14:49.041  INFO 8632 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9090 (http)
2023-03-10 10:14:49.057  INFO 8632 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-03-10 10:14:49.058  INFO 8632 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2023-03-10 10:14:49.364  INFO 8632 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring embedded WebApplicationContext
2023-03-10 10:14:49.364  INFO 8632 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3102 ms
2023-03-10 10:14:49.989  INFO 8632 --- [main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2023-03-10 10:14:50.720  INFO 8632 --- [main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2023-03-10 10:14:50.872  INFO 8632 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-03-10 10:14:50.966  INFO 8632 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2023-03-10 10:14:51.220  INFO 8632 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-03-10 10:14:51.416  INFO 8632 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2023-03-10 10:14:51.670  INFO 8632 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-03-10 10:14:51.687  INFO 8632 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 10:14:52.222  WARN 8632 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.CollectEmoticon ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:14:52.590  WARN 8632 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.LikePost ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:14:52.677  WARN 8632 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.NoteTag ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:14:52.827  WARN 8632 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.UserCollection ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:14:54.216  INFO 8632 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server address:localhost
2023-03-10 10:14:54.218  INFO 8632 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server port:9870
2023-03-10 10:14:54.219  INFO 8632 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server serializer:Json
2023-03-10 10:14:54.219  INFO 8632 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server path:/channel
2023-03-10 10:14:54.228  INFO 8632 --- [main] c.h.i.s.p.c.SendTextMessageConsumer      : sendMessage consumer bean created
2023-03-10 10:14:54.949  INFO 8632 --- [main] c.h.i.s.p.config.ExecutorConfiguration   : start asyncServiceExecutor
2023-03-10 10:14:55.025  WARN 8632 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-03-10 10:14:56.067  INFO 8632 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:14:56.067  INFO 8632 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sendTextMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-10 10:14:56.235  INFO 8632 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:14:56.235  INFO 8632 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:userConnectedConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2023-03-10 10:14:56.403  INFO 8632 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='image-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:14:56.403  INFO 8632 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sentImageMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2023-03-10 10:14:56.464  INFO 8632 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9090 (http) with context path '/admin'
2023-03-10 10:14:56.473  INFO 8632 --- [main] c.h.i.server.chat.ChatServerBootStarter  : IOC 容器准备完毕,准备创建Chat Server: 2023-03-10T10:14:56.473629500
2023-03-10 10:14:56.473  INFO 8632 --- [main] c.h.i.server.chat.ChatServerBootStarter  : 启动Chat Server: class com.hk.im.server.chat.ChatServerBootStarter-2023-03-10T10:14:56.473629500
2023-03-10 10:14:56.482  INFO 8632 --- [main] com.hk.im.admin.IMAdminApplication       : Started IMAdminApplication in 11.116 seconds (JVM running for 12.474)
2023-03-10 10:14:56.665  INFO 8632 --- [Thread-9] c.h.i.s.chat.server.HotKeyChatServer     : websocket 服务启动，ip=localhost,port=9870
2023-03-10 10:14:58.820  INFO 8632 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:13385
2023-03-10 10:14:58.821  INFO 8632 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:13385
2023-03-10 10:14:58.834  INFO 8632 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,headers=http://localhost:3000,method=GET
2023-03-10 10:14:58.835  INFO 8632 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:14:58.835  INFO 8632 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:14:59.411  INFO 8632 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw, extend=null)
2023-03-10 10:14:59.472  WARN 8632 --- [nioEventLoopGroup-5-1] c.b.m.c.t.support.ReflectLambdaMeta      : Unable to make field private final java.lang.Class java.lang.invoke.SerializedLambda.capturingClass accessible: module java.base does not "opens java.lang.invoke" to unnamed module @217ed35e
2023-03-10 10:14:59.711  INFO 8632 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 10:14:59.788  INFO 8632 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:15:00.255  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-10 10:15:00.255  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-03-10 10:15:00.257  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2023-03-10 10:15:00.284  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=3bf6aab2-2f63-4b23-b443-7374f046dcf4],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T10:15:00.284454600]
2023-03-10 10:15:00.411  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=70b4dfa6-7220-4c02-a7f7-b73165961d7b],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:15:00.410412700]
2023-03-10 10:15:00.411  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@23fe65a5,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:15:00.420  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c6b5c54,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:15:00.445  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 10:16:44.970  INFO 8632 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接断开：/127.0.0.1:13385,id=907841fffe2e6da0-000021b8-00000009-3cf03ede269ffbd7-9aeca96c
2023-03-10 10:16:44.972  INFO 8632 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接断开：/127.0.0.1:13385
2023-03-10 10:16:48.398  INFO 8632 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:5148
2023-03-10 10:16:48.399  INFO 8632 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:5148
2023-03-10 10:16:48.401  INFO 8632 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,headers=http://localhost:3000,method=GET
2023-03-10 10:16:48.401  INFO 8632 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:16:48.402  INFO 8632 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:16:48.422  INFO 8632 --- [ConsumeMessageThread_chat-connect-group_2] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw, extend=null)
2023-03-10 10:16:48.433  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=cd8201d1-e6e8-4573-8720-50a8e3be3d6b],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=OPTIONS],[time=2023-03-10T10:16:48.433518100]
2023-03-10 10:16:48.435  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=1d5af74e-1a67-46b5-8760-148de072ab20],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=OPTIONS],[time=2023-03-10T10:16:48.435517500]
2023-03-10 10:16:48.435  INFO 8632 --- [ConsumeMessageThread_chat-connect-group_2] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 10:16:48.529  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=02360170-bff3-4efa-a4bc-aff5c5bfd8ff],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T10:16:48.529520400]
2023-03-10 10:16:48.529  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@5b05b406,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:16:48.532  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=56a7c249-0b62-445e-a72d-bee17e645286],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=GET],[time=2023-03-10T10:16:48.532518400]
2023-03-10 10:16:48.532  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@7f9972e,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:16:48.532  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c6b5c54,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:16:48.535  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@93e69a1,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:16:48.948  INFO 8632 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:16:48.978  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=a3d8d758-7b2d-4649-af69-8e51ed59513e],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T10:16:48.978169300]
2023-03-10 10:16:49.026  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=f6426fbc-26fa-4ef1-aa7f-0e589c4e7a04],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:16:49.026169100]
2023-03-10 10:16:49.026  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@6612debc,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:16:49.031  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c6b5c54,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:16:49.033  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 10:17:16.755  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=3854762f-73c6-458c-813a-4213a3219d77],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T10:17:16.755300100]
2023-03-10 10:17:16.755  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=2c707a51-96ef-4df0-b407-653f95e20d8c],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=OPTIONS],[time=2023-03-10T10:17:16.755300100]
2023-03-10 10:17:16.769  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=d4e1239b-c92a-4116-872b-f271c152c993],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=GET],[time=2023-03-10T10:17:16.769296900]
2023-03-10 10:17:16.770  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@70efb7ef,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:17:16.773  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=00a2c06b-0b00-454c-a473-000cb4905452],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T10:17:16.773299500]
2023-03-10 10:17:16.773  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@6daa831d,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:17:16.773  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@93e69a1,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:17:16.776  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c6b5c54,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:17:17.010  INFO 8632 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":["1631543156694679554","1631543980913164289","1631544981921562625","1631545332447936513","1631547912842420226","1631549401233117186","1631549482778775553","1631549872870019074","1633008691928141825","1633009164240326658","1633360461682462722"]}}
2023-03-10 10:21:06.271  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=7c2d8a2f-7e99-43b4-b764-270d0f9e2c3f],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T10:21:06.271017200]
2023-03-10 10:21:06.278  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=12c0fc93-475b-4502-8a75-c0e45b240a98],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T10:21:06.278020700]
2023-03-10 10:21:06.279  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@4643b293,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:21:06.281  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c6b5c54,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:21:06.373  INFO 8632 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612031901659357185","msg_id":[]}}
2023-03-10 10:21:08.734  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=a0e68b92-9c87-46fe-98bc-78e1d0a8c3a5],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T10:21:08.734935700]
2023-03-10 10:21:08.746  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=157a0490-8bbb-4d89-8b15-76c10348fe1f],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T10:21:08.746926100]
2023-03-10 10:21:08.746  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@3fdc01dc,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:21:08.748  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c6b5c54,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:21:08.863  INFO 8632 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":["1631543156694679554","1631543980913164289","1631544981921562625","1631545332447936513","1631547912842420226","1631549401233117186","1631549482778775553","1631549872870019074","1633008691928141825","1633009164240326658","1633360461682462722"]}}
2023-03-10 10:21:38.912  INFO 8632 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:21:38.913  INFO 8632 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:21:38.946  INFO 8632 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:21:38.946  INFO 8632 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:21:38.979  INFO 8632 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:21:38.979  INFO 8632 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:21:39.062  INFO 8632 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='image-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:21:39.062  INFO 8632 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:21:39.063  INFO 8632 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:21:39.101  INFO 8632 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:21:39.102  INFO 8632 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:21:39.108  INFO 8632 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 10:21:39.149  INFO 8632 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closing ...
2023-03-10 10:21:39.177  INFO 8632 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
