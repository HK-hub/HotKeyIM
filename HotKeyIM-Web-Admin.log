2023-03-10 09:24:32.839  INFO 108804 --- [main] com.hk.im.admin.IMAdminApplication       : Starting IMAdminApplication using Java 17.0.2 on DESKTOP-PICLGLQ with PID 108804 (F:\JavaCode\HotKeyIM\im-web\im-admin\target\classes started by HK意境 in F:\JavaCode\HotKeyIM)
2023-03-10 09:24:32.850  INFO 108804 --- [main] com.hk.im.admin.IMAdminApplication       : The following 1 profile is active: "dev"
2023-03-10 09:24:38.867  INFO 108804 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 09:24:38.868  INFO 108804 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-03-10 09:24:38.903  INFO 108804 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 17 ms. Found 0 JPA repository interfaces.
2023-03-10 09:24:38.975  INFO 108804 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 09:24:38.976  INFO 108804 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-10 09:24:39.000  INFO 108804 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2023-03-10 09:24:39.686  INFO 108804 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvice' of type [com.hk.im.admin.advice.MethodTraceAdvice$$EnhancerBySpringCGLIB$$9f0237c4] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 09:24:39.710  INFO 108804 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 09:24:40.601  INFO 108804 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9090 (http)
2023-03-10 09:24:40.619  INFO 108804 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-03-10 09:24:40.620  INFO 108804 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2023-03-10 09:24:40.918  INFO 108804 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring embedded WebApplicationContext
2023-03-10 09:24:40.918  INFO 108804 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 7896 ms
2023-03-10 09:24:42.241  INFO 108804 --- [main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2023-03-10 09:24:43.341  INFO 108804 --- [main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2023-03-10 09:24:43.557  INFO 108804 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-03-10 09:24:43.768  INFO 108804 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2023-03-10 09:24:44.148  INFO 108804 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-03-10 09:24:44.401  INFO 108804 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2023-03-10 09:24:45.663  INFO 108804 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-03-10 09:24:45.709  INFO 108804 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 09:24:51.564  WARN 108804 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.CollectEmoticon ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:24:57.104  WARN 108804 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.LikePost ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:24:57.329  WARN 108804 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.NoteTag ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:24:59.735  WARN 108804 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.UserCollection ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:25:02.799  INFO 108804 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server address:localhost
2023-03-10 09:25:02.800  INFO 108804 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server port:9870
2023-03-10 09:25:02.801  INFO 108804 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server serializer:Json
2023-03-10 09:25:02.801  INFO 108804 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server path:/channel
2023-03-10 09:25:02.809  INFO 108804 --- [main] c.h.i.s.p.c.SendTextMessageConsumer      : sendMessage consumer bean created
2023-03-10 09:25:04.009  INFO 108804 --- [main] c.h.i.s.p.config.ExecutorConfiguration   : start asyncServiceExecutor
2023-03-10 09:25:04.166  WARN 108804 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-03-10 09:25:05.907  INFO 108804 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:25:05.907  INFO 108804 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sendTextMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-10 09:25:06.066  INFO 108804 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:25:06.066  INFO 108804 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:userConnectedConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2023-03-10 09:25:06.230  INFO 108804 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:25:06.230  INFO 108804 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sentImageMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2023-03-10 09:25:06.571  INFO 108804 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9090 (http) with context path '/admin'
2023-03-10 09:25:06.580  INFO 108804 --- [main] c.h.i.server.chat.ChatServerBootStarter  : IOC 容器准备完毕,准备创建Chat Server: 2023-03-10T09:25:06.580196800
2023-03-10 09:25:06.580  INFO 108804 --- [main] c.h.i.server.chat.ChatServerBootStarter  : 启动Chat Server: class com.hk.im.server.chat.ChatServerBootStarter-2023-03-10T09:25:06.580196800
2023-03-10 09:25:06.619  INFO 108804 --- [main] com.hk.im.admin.IMAdminApplication       : Started IMAdminApplication in 35.007 seconds (JVM running for 39.352)
2023-03-10 09:25:06.902  INFO 108804 --- [Thread-9] c.h.i.s.chat.server.HotKeyChatServer     : websocket 服务启动，ip=localhost,port=9870
2023-03-10 09:29:15.051  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-10 09:29:15.052  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-03-10 09:29:15.055  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2023-03-10 09:29:15.174  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=b4856267-421a-4c6d-8066-b25573523f5c],[ip=127.0.0.1],[uri=/admin/user/login],[method=OPTIONS],[time=2023-03-10T09:29:15.174351]
2023-03-10 09:29:15.535  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=f7020d0e-ecbc-410a-bb19-c5352e3a0b3b],[ip=127.0.0.1],[uri=/admin/user/login],[method=POST],[time=2023-03-10T09:29:15.535079100]
2023-03-10 09:29:18.185  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=7603ccbc-d4c9-47e8-8a1c-a9ea52e4eab2],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=OPTIONS],[time=2023-03-10T09:29:18.185357200]
2023-03-10 09:29:18.211  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=b1ebf376-7336-41d9-bb3f-44c32e4d1d70],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=OPTIONS],[time=2023-03-10T09:29:18.211355700]
2023-03-10 09:29:18.217  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=496c3938-8b91-4e72-b601-253e392a3f4e],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=GET],[time=2023-03-10T09:29:18.217338700]
2023-03-10 09:29:18.218  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@274f9a9b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:29:18.296  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@71394e44,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:29:18.413  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=ab62a821-af59-43d3-a371-4e618ccc3c95],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T09:29:18.413343300]
2023-03-10 09:29:18.414  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@3766297,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:29:18.417  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@71394e44,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:29:18.597  WARN 108804 --- [http-nio-127.0.0.1-9090-exec-8] c.b.m.c.t.support.ReflectLambdaMeta      : Unable to make field private final java.lang.Class java.lang.invoke.SerializedLambda.capturingClass accessible: module java.base does not "opens java.lang.invoke" to unnamed module @6150c3ec
2023-03-10 09:29:19.199  INFO 108804 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:8018
2023-03-10 09:29:19.199  INFO 108804 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:8018
2023-03-10 09:29:19.231  INFO 108804 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,headers=http://localhost:3000,method=GET
2023-03-10 09:29:19.251  INFO 108804 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:29:19.251  INFO 108804 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 09:29:19.613  INFO 108804 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw, extend=null)
2023-03-10 09:29:19.630  INFO 108804 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 09:29:19.806  INFO 108804 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 09:29:19.810  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=d6ac018b-3baa-4dcd-aaf9-6b3000c6585d],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T09:29:19.810338800]
2023-03-10 09:29:19.820  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=80315ead-39fb-4166-89ec-9d3d0f1ec64b],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T09:29:19.820343200]
2023-03-10 09:29:19.821  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@2ab816c6,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:29:19.823  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@71394e44,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:29:19.825  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 09:29:39.440  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=6da9b196-8464-4f43-b1d4-ca43f3a142b8],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T09:29:39.440171300]
2023-03-10 09:29:39.440  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=471631da-1a43-4b94-b73c-740023c6b0b0],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=OPTIONS],[time=2023-03-10T09:29:39.440171300]
2023-03-10 09:29:39.451  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=3888b884-a51a-4a0c-8169-312c6ee7df73],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T09:29:39.451181400]
2023-03-10 09:29:39.451  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@38e003fd,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:29:39.451  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=6f2777a6-0c16-40f8-938c-3cf4fd91d9e0],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=GET],[time=2023-03-10T09:29:39.451181400]
2023-03-10 09:29:39.451  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@149589f6,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:29:39.453  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@55319abe,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:29:39.453  INFO 108804 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@370ac9fd,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:29:40.778 ERROR 108804 --- [http-nio-127.0.0.1-9090-exec-6] c.alibaba.druid.filter.stat.StatFilter   : slow sql 1181 millis. SELECT id,sequence,message_feature,message_type,content,url,extra,deleted,create_time,update_time FROM tb_chat_message WHERE id=? [1633752041069252610]
2023-03-10 09:29:40.977 ERROR 108804 --- [http-nio-127.0.0.1-9090-exec-6] c.hk.im.admin.advice.WebExceptionAdvice  : common exception:

org.springframework.web.util.NestedServletException: Handler dispatch failed; nested exception is java.lang.NoSuchMethodError: 'java.util.Map com.hk.im.domain.entity.ChatMessage.getExtra()'
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1082) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:655) ~[tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:124) ~[druid-1.2.8.jar:1.2.8]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]
Caused by: java.lang.NoSuchMethodError: 'java.util.Map com.hk.im.domain.entity.ChatMessage.getExtra()'
	at com.hk.im.infrastructure.mapstruct.MessageMapStructureImpl.toBO(MessageMapStructureImpl.java:45) ~[classes/:na]
	at com.hk.im.service.service.MessageFlowServiceImpl.lambda$getLatestTalkRecords$0(MessageFlowServiceImpl.java:152) ~[classes/:na]
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:575) ~[na:na]
	at java.base/java.util.stream.AbstractPipeline.evaluateToArrayNode(AbstractPipeline.java:260) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:616) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.toArray(ReferencePipeline.java:622) ~[na:na]
	at java.base/java.util.stream.ReferencePipeline.toList(ReferencePipeline.java:627) ~[na:na]
	at com.hk.im.service.service.MessageFlowServiceImpl.getLatestTalkRecords(MessageFlowServiceImpl.java:159) ~[classes/:na]
	at com.hk.im.service.service.MessageFlowServiceImpl$$FastClassBySpringCGLIB$$a046c75e.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689) ~[spring-aop-5.3.18.jar:5.3.18]
	at com.hk.im.service.service.MessageFlowServiceImpl$$EnhancerBySpringCGLIB$$65c4525f.getLatestTalkRecords(<generated>) ~[classes/:na]
	at com.hk.im.admin.controller.MessageController.getLastCommunicationRecords(MessageController.java:56) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.20.jar:5.3.20]
	... 42 common frames omitted

2023-03-10 09:30:51.661  INFO 108804 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 09:30:51.662  INFO 108804 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 09:30:51.698  INFO 108804 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 09:30:51.699  INFO 108804 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 09:30:52.707  INFO 108804 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 09:30:52.796  INFO 108804 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:30:52.796  INFO 108804 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:30:52.796  INFO 108804 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:30:52.809  INFO 108804 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 09:30:52.834  INFO 108804 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 09:30:52.834  INFO 108804 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 09:30:52.840  INFO 108804 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 09:30:52.871  INFO 108804 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closing ...
2023-03-10 09:30:52.894  INFO 108804 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2023-03-10 09:37:04.623  INFO 118296 --- [main] com.hk.im.admin.IMAdminApplication       : Starting IMAdminApplication using Java 17.0.2 on DESKTOP-PICLGLQ with PID 118296 (F:\JavaCode\HotKeyIM\im-web\im-admin\target\classes started by HK意境 in F:\JavaCode\HotKeyIM)
2023-03-10 09:37:04.637  INFO 118296 --- [main] com.hk.im.admin.IMAdminApplication       : The following 1 profile is active: "dev"
2023-03-10 09:37:09.155  INFO 118296 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 09:37:09.155  INFO 118296 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-03-10 09:37:09.193  INFO 118296 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 17 ms. Found 0 JPA repository interfaces.
2023-03-10 09:37:09.257  INFO 118296 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 09:37:09.258  INFO 118296 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-10 09:37:09.303  INFO 118296 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2023-03-10 09:37:09.956  INFO 118296 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvice' of type [com.hk.im.admin.advice.MethodTraceAdvice$$EnhancerBySpringCGLIB$$c03bc593] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 09:37:09.977  INFO 118296 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 09:37:10.909  INFO 118296 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9090 (http)
2023-03-10 09:37:10.928  INFO 118296 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-03-10 09:37:10.928  INFO 118296 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2023-03-10 09:37:11.218  INFO 118296 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring embedded WebApplicationContext
2023-03-10 09:37:11.219  INFO 118296 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 6449 ms
2023-03-10 09:37:12.209  INFO 118296 --- [main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2023-03-10 09:37:13.257  INFO 118296 --- [main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2023-03-10 09:37:13.460  INFO 118296 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-03-10 09:37:13.672  INFO 118296 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2023-03-10 09:37:14.089  INFO 118296 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-03-10 09:37:14.405  INFO 118296 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2023-03-10 09:37:14.812  INFO 118296 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-03-10 09:37:14.832  INFO 118296 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 09:37:15.532  WARN 118296 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.CollectEmoticon ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:37:15.973  WARN 118296 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.LikePost ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:37:16.063  WARN 118296 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.NoteTag ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:37:16.238  WARN 118296 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.UserCollection ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:37:17.686  INFO 118296 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server address:localhost
2023-03-10 09:37:17.687  INFO 118296 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server port:9870
2023-03-10 09:37:17.688  INFO 118296 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server serializer:Json
2023-03-10 09:37:17.688  INFO 118296 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server path:/channel
2023-03-10 09:37:17.697  INFO 118296 --- [main] c.h.i.s.p.c.SendTextMessageConsumer      : sendMessage consumer bean created
2023-03-10 09:37:18.547  INFO 118296 --- [main] c.h.i.s.p.config.ExecutorConfiguration   : start asyncServiceExecutor
2023-03-10 09:37:18.646  WARN 118296 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-03-10 09:37:19.855  INFO 118296 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:37:19.856  INFO 118296 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sendTextMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-10 09:37:20.016  INFO 118296 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:37:20.016  INFO 118296 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:userConnectedConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2023-03-10 09:37:20.177  INFO 118296 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:37:20.177  INFO 118296 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sentImageMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2023-03-10 09:37:20.275  INFO 118296 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9090 (http) with context path '/admin'
2023-03-10 09:37:20.285  INFO 118296 --- [main] c.h.i.server.chat.ChatServerBootStarter  : IOC 容器准备完毕,准备创建Chat Server: 2023-03-10T09:37:20.285371
2023-03-10 09:37:20.286  INFO 118296 --- [main] c.h.i.server.chat.ChatServerBootStarter  : 启动Chat Server: class com.hk.im.server.chat.ChatServerBootStarter-2023-03-10T09:37:20.285371
2023-03-10 09:37:20.291  INFO 118296 --- [main] com.hk.im.admin.IMAdminApplication       : Started IMAdminApplication in 17.058 seconds (JVM running for 19.345)
2023-03-10 09:37:20.469  INFO 118296 --- [Thread-9] c.h.i.s.chat.server.HotKeyChatServer     : websocket 服务启动，ip=localhost,port=9870
2023-03-10 09:37:20.982  INFO 118296 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:14148
2023-03-10 09:37:20.982  INFO 118296 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:14148
2023-03-10 09:37:21.000  INFO 118296 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,headers=http://localhost:3000,method=GET
2023-03-10 09:37:21.012  INFO 118296 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:37:21.012  INFO 118296 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 09:37:21.717  INFO 118296 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw, extend=null)
2023-03-10 09:37:21.791  WARN 118296 --- [nioEventLoopGroup-5-1] c.b.m.c.t.support.ReflectLambdaMeta      : Unable to make field private final java.lang.Class java.lang.invoke.SerializedLambda.capturingClass accessible: module java.base does not "opens java.lang.invoke" to unnamed module @6a78afa0
2023-03-10 09:37:22.129  INFO 118296 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 09:37:22.211  INFO 118296 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 09:37:22.810  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-10 09:37:22.810  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-03-10 09:37:22.812  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2023-03-10 09:37:22.845  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=bef7b08a-80ca-4431-a620-1b01297293e8],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T09:37:22.845594300]
2023-03-10 09:37:23.009  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=8c6f4438-1fd2-4d0a-aebb-f78d0e9ef9e0],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T09:37:23.009902400]
2023-03-10 09:37:23.010  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@73bfdc1f,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:37:23.019  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@70c2dd1,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:37:23.058  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 09:45:45.844  INFO 118296 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接断开：/127.0.0.1:14148,id=907841fffe2e6da0-0001ce18-00000009-0fcb97605eb96808-93cc156a
2023-03-10 09:45:45.866  INFO 118296 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接断开：/127.0.0.1:14148
2023-03-10 09:45:48.087  INFO 118296 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:14704
2023-03-10 09:45:48.087  INFO 118296 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:14704
2023-03-10 09:45:48.090  INFO 118296 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,headers=http://localhost:3000,method=GET
2023-03-10 09:45:48.090  INFO 118296 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:45:48.090  INFO 118296 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 09:45:48.112  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=e6913bd0-f6c5-4c7b-afcb-3efaef01ecbf],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=OPTIONS],[time=2023-03-10T09:45:48.112961900]
2023-03-10 09:45:48.113  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=fc552b8b-3332-4193-9385-923b78cd4319],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=OPTIONS],[time=2023-03-10T09:45:48.112961900]
2023-03-10 09:45:48.117  INFO 118296 --- [ConsumeMessageThread_chat-connect-group_2] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw, extend=null)
2023-03-10 09:45:48.124  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=ba45439c-9000-4d76-9932-06f94eebb6a6],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T09:45:48.124964100]
2023-03-10 09:45:48.124  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@1d6ea96f,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:45:48.125  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=029b7401-415a-4428-9602-90cde12ce4b3],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=GET],[time=2023-03-10T09:45:48.125965200]
2023-03-10 09:45:48.126  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@38793eab,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:45:48.127  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@13a944b2,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:45:48.128  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@70c2dd1,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:45:48.143  INFO 118296 --- [ConsumeMessageThread_chat-connect-group_2] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 09:45:48.620  INFO 118296 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 09:45:48.685  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=a0e24206-7f42-4d70-9f12-c4eecea26d58],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T09:45:48.685368900]
2023-03-10 09:45:48.741  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=48808861-647f-4431-be42-e2ff094ed246],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T09:45:48.741369600]
2023-03-10 09:45:48.741  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@6daa831d,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:45:48.744  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@13a944b2,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:45:48.745  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 09:45:52.494  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=dae48b3a-f97c-4c4d-a464-1198926b55eb],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=OPTIONS],[time=2023-03-10T09:45:52.493157400]
2023-03-10 09:45:52.494  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=5dbc3091-0bca-45f0-9b8f-48eb8a46f1ff],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T09:45:52.494157600]
2023-03-10 09:45:52.509  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=0483fad6-623d-4c11-8931-460c257220c3],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=GET],[time=2023-03-10T09:45:52.509173700]
2023-03-10 09:45:52.510  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@2e1d21b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:45:52.510  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=c61d5419-5015-4314-a3b8-5d025fd710a2],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T09:45:52.510157200]
2023-03-10 09:45:52.510  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@401b0438,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:45:52.512  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@13a944b2,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:45:52.512  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@70c2dd1,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:45:52.886  INFO 118296 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":["1631131068348272641","1631536603358920706","1631543156694679554","1631543980913164289","1631544981921562625","1631545332447936513","1631547912842420226","1631549401233117186","1631549482778775553","1631549872870019074","1633008691928141825","1633009164240326658","1633360461682462722"]}}
2023-03-10 09:45:55.718  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=65a1b034-4b6d-4ae8-8a6d-04b23dbb82bc],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T09:45:55.718254100]
2023-03-10 09:45:55.726  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=cf10a54d-8843-4a13-b915-d47355a80861],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T09:45:55.726269600]
2023-03-10 09:45:55.727  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@3b4990a5,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:45:55.729  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@70c2dd1,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:45:55.881  INFO 118296 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":["1630117054164103170","1630118875163127810","1630119255745884162","1630119687062843394","1630121566790512641","1630121910618681345","1630124550480064514","1630125121740054530","1630125362539241473","1630156667502997505","1630156985452212225","1630158680160743426","1630166382639329282","1630167575428083713","1630176890545303554"]}}
2023-03-10 09:45:57.037  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=a22fc99b-6e08-4668-bac7-39652fde9bde],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T09:45:57.037008600]
2023-03-10 09:45:57.049  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=5ae5c654-919c-405d-98bc-6316bef339d3],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T09:45:57.049010300]
2023-03-10 09:45:57.049  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@5b1cace7,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:45:57.051  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@70c2dd1,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:45:57.072  INFO 118296 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":[]}}
2023-03-10 09:46:16.553  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=f8d2b23a-2b85-4646-9ff6-a288c2433bb7],[ip=127.0.0.1],[uri=/admin/message/send/text],[method=OPTIONS],[time=2023-03-10T09:46:16.553150200]
2023-03-10 09:46:16.559  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=b160f468-87a1-4084-b301-486b4d9f188f],[ip=127.0.0.1],[uri=/admin/message/send/text],[method=POST],[time=2023-03-10T09:46:16.559131600]
2023-03-10 09:46:16.559  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@7bfee66b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:46:16.561  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@70c2dd1,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:46:17.101  INFO 118296 --- [async-service-1] c.h.i.i.e.c.l.CommunicationEventListener : refresh sequence and session ttl: Sequence(id=null, name=null, description=null, sessionId=null, receiverId=1612030664754913281, senderId=1611656761503215617, max=null, step=null, segment=null, version=null, createTime=null, updateTime=null, current=1)
2023-03-10 09:46:17.130  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_chat_message  ( id,
sequence,
message_feature,
message_type,
content,



create_time,
update_time )  VALUES  ( ?,
?,
?,
?,
?,



?,
? )
2023-03-10 09:46:17.158  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 09:46:17.687  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_message_flow  ( id,

sender_id,
receiver_id,
chat_type,
message_type,
message_id,
`sequence`,
send_status,
sign_flag,

deleted,
create_time,
update_time )  VALUES  ( ?,

?,
?,
?,
?,
?,
?,
?,
?,

?,
?,
? )
2023-03-10 09:46:17.688  INFO 118296 --- [http-nio-127.0.0.1-9090-exec-10] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 09:46:17.704  INFO 118296 --- [async-service-2] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 09:46:17.705  INFO 118296 --- [async-service-2] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 09:46:18.176  INFO 118296 --- [async-service-2] c.h.i.i.e.m.l.MessageEventHandler        : Sent message by rocketmq: SendResult [sendStatus=SEND_OK, msgId=7F000001CE1863947C6B307202AE0002, offsetMsgId=2F6C928D00002A9F0000000000018F3A, messageQueue=MessageQueue [topic=chat-topic, brokerName=broker-a, queueId=0], queueOffset=6]
2023-03-10 09:51:45.781  INFO 118296 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 09:51:45.782  INFO 118296 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 09:51:45.819  INFO 118296 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 09:51:45.819  INFO 118296 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 09:51:45.850  INFO 118296 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 09:51:45.851  INFO 118296 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 09:51:45.940  INFO 118296 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:51:45.940  INFO 118296 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:51:45.940  INFO 118296 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:51:45.981  INFO 118296 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 09:51:45.981  INFO 118296 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 09:51:45.986  INFO 118296 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 09:51:46.002  INFO 118296 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closing ...
2023-03-10 09:51:46.048  INFO 118296 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2023-03-10 09:51:57.286  INFO 110184 --- [main] com.hk.im.admin.IMAdminApplication       : Starting IMAdminApplication using Java 17.0.2 on DESKTOP-PICLGLQ with PID 110184 (F:\JavaCode\HotKeyIM\im-web\im-admin\target\classes started by HK意境 in F:\JavaCode\HotKeyIM)
2023-03-10 09:51:57.297  INFO 110184 --- [main] com.hk.im.admin.IMAdminApplication       : The following 1 profile is active: "dev"
2023-03-10 09:52:01.761  INFO 110184 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 09:52:01.761  INFO 110184 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-03-10 09:52:01.790  INFO 110184 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 0 JPA repository interfaces.
2023-03-10 09:52:01.814  INFO 110184 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 09:52:01.816  INFO 110184 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-10 09:52:01.837  INFO 110184 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2023-03-10 09:52:02.355  INFO 110184 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvice' of type [com.hk.im.admin.advice.MethodTraceAdvice$$EnhancerBySpringCGLIB$$70be86a0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 09:52:02.374  INFO 110184 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 09:52:03.145  INFO 110184 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9090 (http)
2023-03-10 09:52:03.164  INFO 110184 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-03-10 09:52:03.165  INFO 110184 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2023-03-10 09:52:03.498  INFO 110184 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring embedded WebApplicationContext
2023-03-10 09:52:03.498  INFO 110184 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 6116 ms
2023-03-10 09:52:04.154  INFO 110184 --- [main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2023-03-10 09:52:05.012  INFO 110184 --- [main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2023-03-10 09:52:05.345  INFO 110184 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-03-10 09:52:05.565  INFO 110184 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2023-03-10 09:52:05.972  INFO 110184 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-03-10 09:52:06.191  INFO 110184 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2023-03-10 09:52:06.538  INFO 110184 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-03-10 09:52:06.560  INFO 110184 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 09:52:07.201  WARN 110184 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.CollectEmoticon ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:52:07.604  WARN 110184 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.LikePost ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:52:07.697  WARN 110184 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.NoteTag ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:52:07.847  WARN 110184 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.UserCollection ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 09:52:09.264  INFO 110184 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server address:localhost
2023-03-10 09:52:09.265  INFO 110184 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server port:9870
2023-03-10 09:52:09.265  INFO 110184 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server serializer:Json
2023-03-10 09:52:09.265  INFO 110184 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server path:/channel
2023-03-10 09:52:09.277  INFO 110184 --- [main] c.h.i.s.p.c.SendTextMessageConsumer      : sendMessage consumer bean created
2023-03-10 09:52:10.047  INFO 110184 --- [main] c.h.i.s.p.config.ExecutorConfiguration   : start asyncServiceExecutor
2023-03-10 09:52:10.130  WARN 110184 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-03-10 09:52:11.188  INFO 110184 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:52:11.189  INFO 110184 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sendTextMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-10 09:52:11.357  INFO 110184 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:52:11.357  INFO 110184 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:userConnectedConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2023-03-10 09:52:11.515  INFO 110184 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 09:52:11.516  INFO 110184 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sentImageMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2023-03-10 09:52:11.576  INFO 110184 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9090 (http) with context path '/admin'
2023-03-10 09:52:11.589  INFO 110184 --- [main] c.h.i.server.chat.ChatServerBootStarter  : IOC 容器准备完毕,准备创建Chat Server: 2023-03-10T09:52:11.589553800
2023-03-10 09:52:11.589  INFO 110184 --- [main] c.h.i.server.chat.ChatServerBootStarter  : 启动Chat Server: class com.hk.im.server.chat.ChatServerBootStarter-2023-03-10T09:52:11.589553800
2023-03-10 09:52:11.596  INFO 110184 --- [main] com.hk.im.admin.IMAdminApplication       : Started IMAdminApplication in 15.207 seconds (JVM running for 16.785)
2023-03-10 09:52:11.791  INFO 110184 --- [Thread-9] c.h.i.s.chat.server.HotKeyChatServer     : websocket 服务启动，ip=localhost,port=9870
2023-03-10 09:52:14.248  INFO 110184 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:2407
2023-03-10 09:52:14.248  INFO 110184 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:2407
2023-03-10 09:52:14.263  INFO 110184 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,headers=http://localhost:3000,method=GET
2023-03-10 09:52:14.264  INFO 110184 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:52:14.264  INFO 110184 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 09:52:14.851  INFO 110184 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw, extend=null)
2023-03-10 09:52:14.884  WARN 110184 --- [nioEventLoopGroup-5-1] c.b.m.c.t.support.ReflectLambdaMeta      : Unable to make field private final java.lang.Class java.lang.invoke.SerializedLambda.capturingClass accessible: module java.base does not "opens java.lang.invoke" to unnamed module @6a78afa0
2023-03-10 09:52:15.295  INFO 110184 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 09:52:15.368  INFO 110184 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 09:52:15.847  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-10 09:52:15.847  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-03-10 09:52:15.849  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2023-03-10 09:52:15.877  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=427c164c-a176-48ec-b955-e9f32b3dc536],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T09:52:15.877133200]
2023-03-10 09:52:16.119  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=fabd1fb7-cecb-48f3-b23d-c5b5ea5ddae3],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T09:52:16.119945800]
2023-03-10 09:52:16.119  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@41f7bc69,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:52:16.128  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@7522049f,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:52:16.152  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 09:52:34.625  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=d44f6b28-4a8d-463e-bf1a-07b57d69b69a],[ip=127.0.0.1],[uri=/admin/message/send/text],[method=OPTIONS],[time=2023-03-10T09:52:34.625738400]
2023-03-10 09:52:34.632  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=dec24fe7-5406-44c3-a819-4b106fbcee13],[ip=127.0.0.1],[uri=/admin/message/send/text],[method=POST],[time=2023-03-10T09:52:34.632749900]
2023-03-10 09:52:34.633  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@690ad6,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:52:34.636  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@7522049f,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:52:34.679  INFO 110184 --- [async-service-1] c.h.i.i.e.c.l.CommunicationEventListener : refresh sequence and session ttl: Sequence(id=null, name=null, description=null, sessionId=null, receiverId=1612030664754913281, senderId=1611656761503215617, max=null, step=null, segment=null, version=null, createTime=null, updateTime=null, current=1)
2023-03-10 09:52:34.693  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_chat_message  ( id,
sequence,
message_feature,
message_type,
content,



create_time,
update_time )  VALUES  ( ?,
?,
?,
?,
?,



?,
? )
2023-03-10 09:52:34.695  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-4] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 09:52:34.723  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_message_flow  ( id,

sender_id,
receiver_id,
chat_type,
message_type,
message_id,
`sequence`,
send_status,
sign_flag,

deleted,
create_time,
update_time )  VALUES  ( ?,

?,
?,
?,
?,
?,
?,
?,
?,

?,
?,
? )
2023-03-10 09:52:34.724  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-4] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 09:52:34.849  INFO 110184 --- [async-service-2] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 09:52:34.852  INFO 110184 --- [async-service-2] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 09:52:35.001  INFO 110184 --- [async-service-2] c.h.i.i.e.m.l.MessageEventHandler        : Sent message by rocketmq: SendResult [sendStatus=SEND_OK, msgId=7F000001AE6863947C6B3077C2A80001, offsetMsgId=2F6C928D00002A9F00000000000198BF, messageQueue=MessageQueue [topic=chat-topic, brokerName=broker-a, queueId=0], queueOffset=7]
2023-03-10 09:59:22.551  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=ca2780b1-da51-4324-bd5f-e8de62c66193],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=OPTIONS],[time=2023-03-10T09:59:22.550552700]
2023-03-10 09:59:22.621  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=82c1c4ce-9388-4300-ad4f-459136b33363],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=POST],[time=2023-03-10T09:59:22.621540300]
2023-03-10 09:59:22.621  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@232da599,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 09:59:22.624  INFO 110184 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.i.UserLoginInterceptor           : requeset:org.springframework.web.multipart.support.StandardMultipartHttpServletRequest@393358dc,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 09:59:22.650 ERROR 110184 --- [http-nio-127.0.0.1-9090-exec-9] c.hk.im.admin.advice.WebExceptionAdvice  : common exception:

org.springframework.web.HttpMediaTypeNotSupportedException: Content type 'multipart/form-data;boundary=----WebKitFormBoundaryEtA8wlpIbUst2t3W;charset=UTF-8' not supported
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:211) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.readWithMessageConverters(RequestResponseBodyMethodProcessor.java:160) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:133) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:179) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:146) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:124) ~[druid-1.2.8.jar:1.2.8]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]

2023-03-10 10:01:06.475  INFO 110184 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:01:06.476  INFO 110184 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:01:06.510  INFO 110184 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:01:06.510  INFO 110184 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:01:06.544  INFO 110184 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:01:06.544  INFO 110184 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:01:06.568  INFO 110184 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:01:06.569  INFO 110184 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:01:06.569  INFO 110184 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:01:06.638  INFO 110184 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:01:06.638  INFO 110184 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:01:06.641  INFO 110184 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 10:01:06.644  INFO 110184 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closing ...
2023-03-10 10:01:06.651  INFO 110184 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2023-03-10 10:01:17.472  INFO 85864 --- [main] com.hk.im.admin.IMAdminApplication       : Starting IMAdminApplication using Java 17.0.2 on DESKTOP-PICLGLQ with PID 85864 (F:\JavaCode\HotKeyIM\im-web\im-admin\target\classes started by HK意境 in F:\JavaCode\HotKeyIM)
2023-03-10 10:01:17.476  INFO 85864 --- [main] com.hk.im.admin.IMAdminApplication       : The following 1 profile is active: "dev"
2023-03-10 10:01:19.050  INFO 85864 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 10:01:19.050  INFO 85864 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-03-10 10:01:19.079  INFO 85864 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 0 JPA repository interfaces.
2023-03-10 10:01:19.100  INFO 85864 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 10:01:19.102  INFO 85864 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-10 10:01:19.125  INFO 85864 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2023-03-10 10:01:19.664  INFO 85864 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvice' of type [com.hk.im.admin.advice.MethodTraceAdvice$$EnhancerBySpringCGLIB$$10c605f] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 10:01:19.683  INFO 85864 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 10:01:20.383  INFO 85864 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9090 (http)
2023-03-10 10:01:20.398  INFO 85864 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-03-10 10:01:20.399  INFO 85864 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2023-03-10 10:01:20.690  INFO 85864 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring embedded WebApplicationContext
2023-03-10 10:01:20.691  INFO 85864 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3136 ms
2023-03-10 10:01:21.321  INFO 85864 --- [main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2023-03-10 10:01:22.062  INFO 85864 --- [main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2023-03-10 10:01:22.219  INFO 85864 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-03-10 10:01:22.301  INFO 85864 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2023-03-10 10:01:22.528  INFO 85864 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-03-10 10:01:22.722  INFO 85864 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2023-03-10 10:01:22.977  INFO 85864 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-03-10 10:01:22.996  INFO 85864 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 10:01:23.521  WARN 85864 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.CollectEmoticon ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:01:23.911  WARN 85864 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.LikePost ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:01:24.013  WARN 85864 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.NoteTag ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:01:24.205  WARN 85864 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.UserCollection ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:01:25.480  INFO 85864 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server address:localhost
2023-03-10 10:01:25.482  INFO 85864 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server port:9870
2023-03-10 10:01:25.482  INFO 85864 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server serializer:Json
2023-03-10 10:01:25.482  INFO 85864 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server path:/channel
2023-03-10 10:01:25.492  INFO 85864 --- [main] c.h.i.s.p.c.SendTextMessageConsumer      : sendMessage consumer bean created
2023-03-10 10:01:26.282  INFO 85864 --- [main] c.h.i.s.p.config.ExecutorConfiguration   : start asyncServiceExecutor
2023-03-10 10:01:26.363  WARN 85864 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-03-10 10:01:27.437  INFO 85864 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:01:27.437  INFO 85864 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sendTextMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-10 10:01:27.623  INFO 85864 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:01:27.623  INFO 85864 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:userConnectedConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2023-03-10 10:01:27.842  INFO 85864 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:01:27.843  INFO 85864 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sentImageMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2023-03-10 10:01:27.892  INFO 85864 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9090 (http) with context path '/admin'
2023-03-10 10:01:27.901  INFO 85864 --- [main] c.h.i.server.chat.ChatServerBootStarter  : IOC 容器准备完毕,准备创建Chat Server: 2023-03-10T10:01:27.901598900
2023-03-10 10:01:27.902  INFO 85864 --- [main] c.h.i.server.chat.ChatServerBootStarter  : 启动Chat Server: class com.hk.im.server.chat.ChatServerBootStarter-2023-03-10T10:01:27.902217100
2023-03-10 10:01:27.913  INFO 85864 --- [main] com.hk.im.admin.IMAdminApplication       : Started IMAdminApplication in 11.252 seconds (JVM running for 12.57)
2023-03-10 10:01:28.097  INFO 85864 --- [Thread-9] c.h.i.s.chat.server.HotKeyChatServer     : websocket 服务启动，ip=localhost,port=9870
2023-03-10 10:01:29.240  INFO 85864 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:3006
2023-03-10 10:01:29.241  INFO 85864 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:3006
2023-03-10 10:01:29.255  INFO 85864 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,headers=http://localhost:3000,method=GET
2023-03-10 10:01:29.255  INFO 85864 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:01:29.256  INFO 85864 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:01:29.858  INFO 85864 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw, extend=null)
2023-03-10 10:01:29.915  WARN 85864 --- [nioEventLoopGroup-5-1] c.b.m.c.t.support.ReflectLambdaMeta      : Unable to make field private final java.lang.Class java.lang.invoke.SerializedLambda.capturingClass accessible: module java.base does not "opens java.lang.invoke" to unnamed module @2f4948e4
2023-03-10 10:01:30.163  INFO 85864 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 10:01:30.237  INFO 85864 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:01:30.673  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-10 10:01:30.674  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-03-10 10:01:30.675  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-03-10 10:01:30.704  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=6b267643-56d5-430f-a792-4df0d98cd9ba],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T10:01:30.704715200]
2023-03-10 10:01:30.854  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=ae2ef0fa-4cdb-427a-a14d-3696250eec67],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:01:30.854432500]
2023-03-10 10:01:30.854  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@21c01d4d,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:01:30.863  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@661a3347,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:01:30.888  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 10:01:42.566  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=5a4ec265-0e0c-4cc6-9d2b-1b790f41b20e],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=OPTIONS],[time=2023-03-10T10:01:42.566894100]
2023-03-10 10:01:42.621  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=33ba56c1-5d91-4ac0-858d-527bc0d906e4],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=POST],[time=2023-03-10T10:01:42.621912500]
2023-03-10 10:01:42.622  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@3ba8ee26,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:01:42.624  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset:org.springframework.web.multipart.support.StandardMultipartHttpServletRequest@689d7465,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:01:43.319  INFO 85864 --- [async-service-1] c.h.i.i.e.c.l.CommunicationEventListener : refresh sequence and session ttl: Sequence(id=null, name=null, description=null, sessionId=null, receiverId=1612030664754913281, senderId=1611656761503215617, max=null, step=null, segment=null, version=null, createTime=null, updateTime=null, current=1)
2023-03-10 10:01:43.343  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_chat_message  ( id,
sequence,
message_feature,
message_type,
content,
url,
extra,

create_time,
update_time )  VALUES  ( ?,
?,
?,
?,
?,
?,
?,

?,
? )
2023-03-10 10:01:43.345  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-4] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:01:43.473  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_message_flow  ( id,

sender_id,
receiver_id,
chat_type,
message_type,
message_id,
`sequence`,
send_status,
sign_flag,

deleted,
create_time,
update_time )  VALUES  ( ?,

?,
?,
?,
?,
?,
?,
?,
?,

?,
?,
? )
2023-03-10 10:01:43.474  INFO 85864 --- [http-nio-127.0.0.1-9090-exec-4] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:01:43.669  INFO 85864 --- [async-service-2] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 10:01:43.674  INFO 85864 --- [async-service-2] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:01:43.800  INFO 85864 --- [async-service-2] c.h.i.i.e.m.l.MessageEventHandler        : Sent message by rocketmq: SendResult [sendStatus=SEND_OK, msgId=7F0000014F6863947C6B308022680001, offsetMsgId=2F6C928D00002A9F000000000001A22F, messageQueue=MessageQueue [topic=chat-topic, brokerName=broker-a, queueId=1], queueOffset=6]
2023-03-10 10:05:10.378  INFO 85864 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:05:10.379  INFO 85864 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:05:10.412  INFO 85864 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:05:10.412  INFO 85864 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:05:11.424  INFO 85864 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:05:11.424  INFO 85864 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:05:11.450  INFO 85864 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:05:11.450  INFO 85864 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:05:11.450  INFO 85864 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:05:11.486  INFO 85864 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:05:11.487  INFO 85864 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:05:11.489  INFO 85864 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 10:05:11.492  INFO 85864 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closing ...
2023-03-10 10:05:11.500  INFO 85864 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2023-03-10 10:05:24.307  INFO 88288 --- [main] com.hk.im.admin.IMAdminApplication       : Starting IMAdminApplication using Java 17.0.2 on DESKTOP-PICLGLQ with PID 88288 (F:\JavaCode\HotKeyIM\im-web\im-admin\target\classes started by HK意境 in F:\JavaCode\HotKeyIM)
2023-03-10 10:05:24.312  INFO 88288 --- [main] com.hk.im.admin.IMAdminApplication       : The following 1 profile is active: "dev"
2023-03-10 10:05:25.883  INFO 88288 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 10:05:25.883  INFO 88288 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-03-10 10:05:25.912  INFO 88288 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 0 JPA repository interfaces.
2023-03-10 10:05:25.935  INFO 88288 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 10:05:25.937  INFO 88288 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-10 10:05:25.956  INFO 88288 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2023-03-10 10:05:26.463  INFO 88288 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvice' of type [com.hk.im.admin.advice.MethodTraceAdvice$$EnhancerBySpringCGLIB$$15dc8be5] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 10:05:26.486  INFO 88288 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 10:05:27.188  INFO 88288 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9090 (http)
2023-03-10 10:05:27.204  INFO 88288 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-03-10 10:05:27.204  INFO 88288 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2023-03-10 10:05:27.466  INFO 88288 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring embedded WebApplicationContext
2023-03-10 10:05:27.466  INFO 88288 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3072 ms
2023-03-10 10:05:28.090  INFO 88288 --- [main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2023-03-10 10:05:28.908  INFO 88288 --- [main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2023-03-10 10:05:29.061  INFO 88288 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-03-10 10:05:29.151  INFO 88288 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2023-03-10 10:05:29.385  INFO 88288 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-03-10 10:05:29.581  INFO 88288 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2023-03-10 10:05:29.836  INFO 88288 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-03-10 10:05:29.854  INFO 88288 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 10:05:30.374  WARN 88288 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.CollectEmoticon ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:05:30.713  WARN 88288 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.LikePost ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:05:30.793  WARN 88288 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.NoteTag ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:05:30.939  WARN 88288 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.UserCollection ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:05:32.242  INFO 88288 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server address:localhost
2023-03-10 10:05:32.244  INFO 88288 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server port:9870
2023-03-10 10:05:32.244  INFO 88288 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server serializer:Json
2023-03-10 10:05:32.244  INFO 88288 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server path:/channel
2023-03-10 10:05:32.253  INFO 88288 --- [main] c.h.i.s.p.c.SendTextMessageConsumer      : sendMessage consumer bean created
2023-03-10 10:05:32.938  INFO 88288 --- [main] c.h.i.s.p.config.ExecutorConfiguration   : start asyncServiceExecutor
2023-03-10 10:05:33.015  WARN 88288 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-03-10 10:05:34.051  INFO 88288 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:05:34.051  INFO 88288 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sendTextMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-10 10:05:34.213  INFO 88288 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:05:34.213  INFO 88288 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:userConnectedConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2023-03-10 10:05:34.377  INFO 88288 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='image-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:05:34.378  INFO 88288 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sentImageMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2023-03-10 10:05:34.427  INFO 88288 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9090 (http) with context path '/admin'
2023-03-10 10:05:34.437  INFO 88288 --- [main] c.h.i.server.chat.ChatServerBootStarter  : IOC 容器准备完毕,准备创建Chat Server: 2023-03-10T10:05:34.437840100
2023-03-10 10:05:34.437  INFO 88288 --- [main] c.h.i.server.chat.ChatServerBootStarter  : 启动Chat Server: class com.hk.im.server.chat.ChatServerBootStarter-2023-03-10T10:05:34.437840100
2023-03-10 10:05:34.444  INFO 88288 --- [main] com.hk.im.admin.IMAdminApplication       : Started IMAdminApplication in 10.962 seconds (JVM running for 12.394)
2023-03-10 10:05:34.627  INFO 88288 --- [Thread-9] c.h.i.s.chat.server.HotKeyChatServer     : websocket 服务启动，ip=localhost,port=9870
2023-03-10 10:05:34.763  INFO 88288 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:14362
2023-03-10 10:05:34.764  INFO 88288 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:14362
2023-03-10 10:05:34.779  INFO 88288 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,headers=http://localhost:3000,method=GET
2023-03-10 10:05:34.780  INFO 88288 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:05:34.780  INFO 88288 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:05:35.409  INFO 88288 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw, extend=null)
2023-03-10 10:05:35.458  WARN 88288 --- [nioEventLoopGroup-5-1] c.b.m.c.t.support.ReflectLambdaMeta      : Unable to make field private final java.lang.Class java.lang.invoke.SerializedLambda.capturingClass accessible: module java.base does not "opens java.lang.invoke" to unnamed module @6a78afa0
2023-03-10 10:05:35.553  INFO 88288 --- [ConsumeMessageThread_image-message-group_1] c.h.i.s.p.c.SentImageMessageConsumer     : rocketmq on message(chat message image): MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:05:35.591  INFO 88288 --- [async-service-1] c.h.i.s.push.worker.MessageSynchronizer  : MessageSynchronizer synchronize message to me=1611656761503215617,message=MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:05:35.591  INFO 88288 --- [ConsumeMessageThread_image-message-group_1] c.h.i.s.p.worker.MessageOfflineWorker    : offline message handle start:MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:05:35.608 ERROR 88288 --- [async-service-1] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void com.hk.im.server.push.worker.MessageSynchronizer.synchronizeSelf(com.hk.im.domain.vo.MessageVO)

java.lang.IllegalStateException: Unexpected value: IMAGE
	at com.hk.im.server.common.message.MessageConverter.generateMessage(MessageConverter.java:30) ~[classes/:na]
	at com.hk.im.server.push.worker.MessageSynchronizer.doPushMessage(MessageSynchronizer.java:78) ~[classes/:na]
	at com.hk.im.server.push.worker.MessageSynchronizer.synchronizeSelf(MessageSynchronizer.java:49) ~[classes/:na]
	at com.hk.im.server.push.worker.MessageSynchronizer$$FastClassBySpringCGLIB$$1885410e.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783) ~[spring-aop-5.3.18.jar:5.3.18]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.18.jar:5.3.18]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753) ~[spring-aop-5.3.18.jar:5.3.18]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.3.18.jar:5.3.18]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]

2023-03-10 10:05:35.760  INFO 88288 --- [ConsumeMessageThread_image-message-group_1] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 10:05:35.771  INFO 88288 --- [ConsumeMessageThread_image-message-group_1] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:05:35.782  INFO 88288 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 10:05:35.852  INFO 88288 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:05:36.283  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-10 10:05:36.283  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-03-10 10:05:36.285  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-03-10 10:05:36.322  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=f0d0cb9b-60ce-4b13-afa0-fa67dd581bae],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T10:05:36.322017100]
2023-03-10 10:05:36.466  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=f67d5e09-64bb-4c29-a3cb-16c817b30346],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:05:36.466000800]
2023-03-10 10:05:36.467  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@5cdda59a,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:05:36.476  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@14f78fc0,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:05:36.504  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 10:05:48.012  INFO 88288 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接断开：/127.0.0.1:14362,id=907841fffe2e6da0-000158e0-00000009-286d362507970072-a5afe014
2023-03-10 10:05:48.013  INFO 88288 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接断开：/127.0.0.1:14362
2023-03-10 10:05:50.130  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=19533d04-54c6-4f0e-969c-5b2b467049d6],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=OPTIONS],[time=2023-03-10T10:05:50.130734400]
2023-03-10 10:05:50.132  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=5594a61e-4112-4536-92c9-6c454271bf78],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=OPTIONS],[time=2023-03-10T10:05:50.132777800]
2023-03-10 10:05:50.150  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=e89ff850-09d0-4b5a-9aa5-3fec1b913827],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=GET],[time=2023-03-10T10:05:50.150733700]
2023-03-10 10:05:50.150  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@32544011,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:05:50.153  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=66ab4d39-444c-4bc2-9bc7-1733dc93f64d],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T10:05:50.153734100]
2023-03-10 10:05:50.153  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@38c769e6,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:05:50.154  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c93b82b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:05:50.156  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@14f78fc0,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:05:50.407  INFO 88288 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:9321
2023-03-10 10:05:50.407  INFO 88288 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:9321
2023-03-10 10:05:50.410  INFO 88288 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,headers=http://localhost:3000,method=GET
2023-03-10 10:05:50.410  INFO 88288 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:05:50.410  INFO 88288 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:05:50.436  INFO 88288 --- [ConsumeMessageThread_chat-connect-group_2] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw, extend=null)
2023-03-10 10:05:50.448  INFO 88288 --- [ConsumeMessageThread_chat-connect-group_2] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 10:05:50.882  INFO 88288 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:05:50.908  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=4950ea66-85be-4f69-b2e4-06f08630d5cc],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T10:05:50.908500900]
2023-03-10 10:05:50.986  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=13a043b2-f3c3-4887-b40c-df29dbc9910c],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:05:50.986502200]
2023-03-10 10:05:50.986  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@5d91323f,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:05:50.990  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c93b82b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:05:50.990  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 10:05:54.211  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=1670265e-4939-4483-935a-70ea5a8fe7d2],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=OPTIONS],[time=2023-03-10T10:05:54.211116900]
2023-03-10 10:05:54.211  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=a79e4735-21de-4b12-95be-52023ba4b722],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T10:05:54.211116900]
2023-03-10 10:05:54.231  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=d23ed3e4-b2cc-4676-9f1a-c4902525d4fc],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=GET],[time=2023-03-10T10:05:54.231115500]
2023-03-10 10:05:54.231  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@7cb05945,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:05:54.231  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=48cf9936-2d06-49f9-8e4e-e88967cc7f00],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T10:05:54.231115500]
2023-03-10 10:05:54.232  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@7333abcc,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:05:54.233  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c93b82b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:05:54.234  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@14f78fc0,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:05:54.465  INFO 88288 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":["1631536603358920706","1631543156694679554","1631543980913164289","1631544981921562625","1631545332447936513","1631547912842420226","1631549401233117186","1631549482778775553","1631549872870019074","1633008691928141825","1633009164240326658","1633360461682462722"]}}
2023-03-10 10:07:51.596  INFO 88288 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接断开：/127.0.0.1:9321,id=907841fffe2e6da0-000158e0-0000000c-16ce783027975dc5-c1967f39
2023-03-10 10:07:51.596  INFO 88288 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接断开：/127.0.0.1:9321
2023-03-10 10:07:53.847  INFO 88288 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:11190
2023-03-10 10:07:53.847  INFO 88288 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:11190
2023-03-10 10:07:53.851  INFO 88288 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,headers=http://localhost:3000,method=GET
2023-03-10 10:07:53.851  INFO 88288 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:07:53.851  INFO 88288 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:07:53.875  INFO 88288 --- [ConsumeMessageThread_chat-connect-group_3] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw, extend=null)
2023-03-10 10:07:53.879  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=1b452c0b-bf56-4504-ad94-6ec951d25048],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=OPTIONS],[time=2023-03-10T10:07:53.879183700]
2023-03-10 10:07:53.880  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=bec2915e-cbe3-4bc6-b7ac-2c3aa67802a1],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=OPTIONS],[time=2023-03-10T10:07:53.880200500]
2023-03-10 10:07:53.887  INFO 88288 --- [ConsumeMessageThread_chat-connect-group_3] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 10:07:53.890  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=40eca2a8-00b3-4604-8aeb-0fa948e51828],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T10:07:53.890184500]
2023-03-10 10:07:53.891  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@33a8242e,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:07:53.891  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=2b27197c-cda7-4ddb-8a10-26756c0ac8dc],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=GET],[time=2023-03-10T10:07:53.891184]
2023-03-10 10:07:53.891  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@e416156,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:07:53.894  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c93b82b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:07:53.894  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@14f78fc0,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:07:54.335  INFO 88288 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:07:54.383  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=b9b45a78-dd4c-43a4-83b1-a1c2804c59ff],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T10:07:54.383177100]
2023-03-10 10:07:54.467  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=717397aa-4910-4ff5-8ad4-bc0b99802ef3],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:07:54.467165400]
2023-03-10 10:07:54.468  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@18031286,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:07:54.470  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c93b82b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:07:54.471  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 10:07:57.041  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=d63debf0-1b48-476a-8297-24e719711d2e],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T10:07:57.041557900]
2023-03-10 10:07:57.041  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=82f49426-38f7-486a-b4b5-6b57c5226218],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=OPTIONS],[time=2023-03-10T10:07:57.041557900]
2023-03-10 10:07:57.054  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=7abac601-634e-4651-bd57-10986aab971c],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T10:07:57.054557200]
2023-03-10 10:07:57.054  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@49680808,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:07:57.055  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=f98dac88-47ca-4479-be65-c93fbca80cd1],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=GET],[time=2023-03-10T10:07:57.055557300]
2023-03-10 10:07:57.056  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@67dd2103,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:07:57.056  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@14f78fc0,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:07:57.059  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c93b82b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:07:57.166  INFO 88288 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":["1631536603358920706","1631543156694679554","1631543980913164289","1631544981921562625","1631545332447936513","1631547912842420226","1631549401233117186","1631549482778775553","1631549872870019074","1633008691928141825","1633009164240326658","1633360461682462722"]}}
2023-03-10 10:08:18.370  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=c20bb23f-95b7-4a86-b091-ef8b1ef7a2c9],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=OPTIONS],[time=2023-03-10T10:08:18.370509200]
2023-03-10 10:08:18.424  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=faed28ba-3e73-4d58-9d4d-7c61991c7260],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=POST],[time=2023-03-10T10:08:18.424549700]
2023-03-10 10:08:18.424  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@644802c3,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:08:18.426  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset:org.springframework.web.multipart.support.StandardMultipartHttpServletRequest@43e041d2,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:08:18.819  INFO 88288 --- [async-service-2] c.h.i.i.e.c.l.CommunicationEventListener : refresh sequence and session ttl: Sequence(id=null, name=null, description=null, sessionId=null, receiverId=1612030664754913281, senderId=1611656761503215617, max=null, step=null, segment=null, version=null, createTime=null, updateTime=null, current=1)
2023-03-10 10:08:18.840  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_chat_message  ( id,
sequence,
message_feature,
message_type,
content,
url,
extra,

create_time,
update_time )  VALUES  ( ?,
?,
?,
?,
?,
?,
?,

?,
? )
2023-03-10 10:08:18.842  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:08:18.869  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_message_flow  ( id,

sender_id,
receiver_id,
chat_type,
message_type,
message_id,
`sequence`,
send_status,
sign_flag,

deleted,
create_time,
update_time )  VALUES  ( ?,

?,
?,
?,
?,
?,
?,
?,
?,

?,
?,
? )
2023-03-10 10:08:18.869  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-6] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:08:18.993  INFO 88288 --- [async-service-3] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 10:08:18.996  INFO 88288 --- [async-service-3] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:08:19.110  INFO 88288 --- [async-service-3] c.h.i.i.e.m.l.MessageEventHandler        : Sent message by rocketmq: SendResult [sendStatus=SEND_OK, msgId=7F00000158E063947C6B30862A960003, offsetMsgId=2F6C928D00002A9F000000000001B1B4, messageQueue=MessageQueue [topic=chat-topic, brokerName=broker-a, queueId=2], queueOffset=4]
2023-03-10 10:08:19.111  INFO 88288 --- [ConsumeMessageThread_image-message-group_2] c.h.i.s.p.c.SentImageMessageConsumer     : rocketmq on message(chat message image): MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:08:19.112  INFO 88288 --- [ConsumeMessageThread_image-message-group_2] c.h.i.s.p.worker.MessageOfflineWorker    : offline message handle start:MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:08:19.112  INFO 88288 --- [async-service-4] c.h.i.s.push.worker.MessageSynchronizer  : MessageSynchronizer synchronize message to me=1611656761503215617,message=MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:08:19.113 ERROR 88288 --- [async-service-4] .a.i.SimpleAsyncUncaughtExceptionHandler : Unexpected exception occurred invoking async method: public void com.hk.im.server.push.worker.MessageSynchronizer.synchronizeSelf(com.hk.im.domain.vo.MessageVO)

java.lang.IllegalStateException: Unexpected value: IMAGE
	at com.hk.im.server.common.message.MessageConverter.generateMessage(MessageConverter.java:30) ~[classes/:na]
	at com.hk.im.server.push.worker.MessageSynchronizer.doPushMessage(MessageSynchronizer.java:78) ~[classes/:na]
	at com.hk.im.server.push.worker.MessageSynchronizer.synchronizeSelf(MessageSynchronizer.java:49) ~[classes/:na]
	at com.hk.im.server.push.worker.MessageSynchronizer$$FastClassBySpringCGLIB$$1885410e.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783) ~[spring-aop-5.3.18.jar:5.3.18]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.3.18.jar:5.3.18]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753) ~[spring-aop-5.3.18.jar:5.3.18]
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:115) ~[spring-aop-5.3.18.jar:5.3.18]
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]

2023-03-10 10:08:19.116  INFO 88288 --- [ConsumeMessageThread_image-message-group_2] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 10:08:19.117  INFO 88288 --- [ConsumeMessageThread_image-message-group_2] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:10:26.374  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=057fbb12-bc0d-4dbd-9c6b-b588c68ee775],[ip=127.0.0.1],[uri=/admin/message/send/text],[method=OPTIONS],[time=2023-03-10T10:10:26.374717]
2023-03-10 10:10:26.380  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=fce0a9f5-d9ed-4e53-a991-83f8276bf88d],[ip=127.0.0.1],[uri=/admin/message/send/text],[method=POST],[time=2023-03-10T10:10:26.380719300]
2023-03-10 10:10:26.380  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@48032c66,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:10:26.383  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@14f78fc0,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:10:26.397  INFO 88288 --- [async-service-5] c.h.i.i.e.c.l.CommunicationEventListener : refresh sequence and session ttl: Sequence(id=null, name=null, description=null, sessionId=null, receiverId=1612030664754913281, senderId=1611656761503215617, max=null, step=null, segment=null, version=null, createTime=null, updateTime=null, current=1)
2023-03-10 10:10:26.398  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_chat_message  ( id,
sequence,
message_feature,
message_type,
content,



create_time,
update_time )  VALUES  ( ?,
?,
?,
?,
?,



?,
? )
2023-03-10 10:10:26.399  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:10:26.403  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_message_flow  ( id,

sender_id,
receiver_id,
chat_type,
message_type,
message_id,
`sequence`,
send_status,
sign_flag,

deleted,
create_time,
update_time )  VALUES  ( ?,

?,
?,
?,
?,
?,
?,
?,
?,

?,
?,
? )
2023-03-10 10:10:26.404  INFO 88288 --- [http-nio-127.0.0.1-9090-exec-1] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:10:26.412  INFO 88288 --- [async-service-6] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 10:10:26.413  INFO 88288 --- [async-service-6] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:10:26.564  INFO 88288 --- [async-service-6] c.h.i.i.e.m.l.MessageEventHandler        : Sent message by rocketmq: SendResult [sendStatus=SEND_OK, msgId=7F00000158E063947C6B30881C740004, offsetMsgId=2F6C928D00002A9F000000000001B9A3, messageQueue=MessageQueue [topic=chat-topic, brokerName=broker-a, queueId=1], queueOffset=7]
2023-03-10 10:10:26.567  INFO 88288 --- [ConsumeMessageThread_chat-message-group_1] c.h.i.s.p.c.SendTextMessageConsumer      : rocketmq on message(chat message text): MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:10:26.568  INFO 88288 --- [ConsumeMessageThread_chat-message-group_1] c.h.i.s.p.worker.MessageOfflineWorker    : offline message handle start:MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:10:26.568  INFO 88288 --- [async-service-7] c.h.i.s.push.worker.MessageSynchronizer  : MessageSynchronizer synchronize message to me=1611656761503215617,message=MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:10:26.572  INFO 88288 --- [ConsumeMessageThread_chat-message-group_1] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 10:10:26.572  INFO 88288 --- [ConsumeMessageThread_chat-message-group_1] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:10:26.572  INFO 88288 --- [async-service-7] c.h.i.s.push.worker.MessageSynchronizer  : push message=DataContainer(actionType=1, event=event_talk, message=SimpleTextMessage(super=AbstractMessage(sequenceId=0, messageType=1, messageBO=MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)), extend=null), extra=null) to Channel=907841fffe2e6da0-000158e0-0000000d-1ec01d52e0957ff5-211d64aa
2023-03-10 10:14:33.557  INFO 88288 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:14:33.557  INFO 88288 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:14:33.594  INFO 88288 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:14:33.594  INFO 88288 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:14:33.628  INFO 88288 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:14:33.628  INFO 88288 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:14:33.655  INFO 88288 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='image-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:14:33.655  INFO 88288 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:14:33.656  INFO 88288 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:14:33.690  INFO 88288 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:14:33.691  INFO 88288 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:14:33.695  INFO 88288 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 10:14:33.698  INFO 88288 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closing ...
2023-03-10 10:14:33.705  INFO 88288 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2023-03-10 10:14:46.176  INFO 8632 --- [main] com.hk.im.admin.IMAdminApplication       : Starting IMAdminApplication using Java 17.0.2 on DESKTOP-PICLGLQ with PID 8632 (F:\JavaCode\HotKeyIM\im-web\im-admin\target\classes started by HK意境 in F:\JavaCode\HotKeyIM)
2023-03-10 10:14:46.182  INFO 8632 --- [main] com.hk.im.admin.IMAdminApplication       : The following 1 profile is active: "dev"
2023-03-10 10:14:47.740  INFO 8632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 10:14:47.740  INFO 8632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-03-10 10:14:47.770  INFO 8632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 16 ms. Found 0 JPA repository interfaces.
2023-03-10 10:14:47.792  INFO 8632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 10:14:47.794  INFO 8632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-10 10:14:47.813  INFO 8632 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2023-03-10 10:14:48.338  INFO 8632 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvice' of type [com.hk.im.admin.advice.MethodTraceAdvice$$EnhancerBySpringCGLIB$$bb772c7a] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 10:14:48.360  INFO 8632 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 10:14:49.041  INFO 8632 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9090 (http)
2023-03-10 10:14:49.057  INFO 8632 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-03-10 10:14:49.058  INFO 8632 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2023-03-10 10:14:49.364  INFO 8632 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring embedded WebApplicationContext
2023-03-10 10:14:49.364  INFO 8632 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3102 ms
2023-03-10 10:14:49.989  INFO 8632 --- [main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2023-03-10 10:14:50.720  INFO 8632 --- [main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2023-03-10 10:14:50.872  INFO 8632 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-03-10 10:14:50.966  INFO 8632 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2023-03-10 10:14:51.220  INFO 8632 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-03-10 10:14:51.416  INFO 8632 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2023-03-10 10:14:51.670  INFO 8632 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-03-10 10:14:51.687  INFO 8632 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 10:14:52.222  WARN 8632 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.CollectEmoticon ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:14:52.590  WARN 8632 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.LikePost ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:14:52.677  WARN 8632 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.NoteTag ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:14:52.827  WARN 8632 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.UserCollection ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:14:54.216  INFO 8632 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server address:localhost
2023-03-10 10:14:54.218  INFO 8632 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server port:9870
2023-03-10 10:14:54.219  INFO 8632 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server serializer:Json
2023-03-10 10:14:54.219  INFO 8632 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server path:/channel
2023-03-10 10:14:54.228  INFO 8632 --- [main] c.h.i.s.p.c.SendTextMessageConsumer      : sendMessage consumer bean created
2023-03-10 10:14:54.949  INFO 8632 --- [main] c.h.i.s.p.config.ExecutorConfiguration   : start asyncServiceExecutor
2023-03-10 10:14:55.025  WARN 8632 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-03-10 10:14:56.067  INFO 8632 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:14:56.067  INFO 8632 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sendTextMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-10 10:14:56.235  INFO 8632 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:14:56.235  INFO 8632 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:userConnectedConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2023-03-10 10:14:56.403  INFO 8632 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='image-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:14:56.403  INFO 8632 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sentImageMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2023-03-10 10:14:56.464  INFO 8632 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9090 (http) with context path '/admin'
2023-03-10 10:14:56.473  INFO 8632 --- [main] c.h.i.server.chat.ChatServerBootStarter  : IOC 容器准备完毕,准备创建Chat Server: 2023-03-10T10:14:56.473629500
2023-03-10 10:14:56.473  INFO 8632 --- [main] c.h.i.server.chat.ChatServerBootStarter  : 启动Chat Server: class com.hk.im.server.chat.ChatServerBootStarter-2023-03-10T10:14:56.473629500
2023-03-10 10:14:56.482  INFO 8632 --- [main] com.hk.im.admin.IMAdminApplication       : Started IMAdminApplication in 11.116 seconds (JVM running for 12.474)
2023-03-10 10:14:56.665  INFO 8632 --- [Thread-9] c.h.i.s.chat.server.HotKeyChatServer     : websocket 服务启动，ip=localhost,port=9870
2023-03-10 10:14:58.820  INFO 8632 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:13385
2023-03-10 10:14:58.821  INFO 8632 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:13385
2023-03-10 10:14:58.834  INFO 8632 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,headers=http://localhost:3000,method=GET
2023-03-10 10:14:58.835  INFO 8632 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:14:58.835  INFO 8632 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:14:59.411  INFO 8632 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw, extend=null)
2023-03-10 10:14:59.472  WARN 8632 --- [nioEventLoopGroup-5-1] c.b.m.c.t.support.ReflectLambdaMeta      : Unable to make field private final java.lang.Class java.lang.invoke.SerializedLambda.capturingClass accessible: module java.base does not "opens java.lang.invoke" to unnamed module @217ed35e
2023-03-10 10:14:59.711  INFO 8632 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 10:14:59.788  INFO 8632 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:15:00.255  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-10 10:15:00.255  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-03-10 10:15:00.257  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2023-03-10 10:15:00.284  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=3bf6aab2-2f63-4b23-b443-7374f046dcf4],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T10:15:00.284454600]
2023-03-10 10:15:00.411  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=70b4dfa6-7220-4c02-a7f7-b73165961d7b],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:15:00.410412700]
2023-03-10 10:15:00.411  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@23fe65a5,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:15:00.420  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c6b5c54,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:15:00.445  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 10:16:44.970  INFO 8632 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接断开：/127.0.0.1:13385,id=907841fffe2e6da0-000021b8-00000009-3cf03ede269ffbd7-9aeca96c
2023-03-10 10:16:44.972  INFO 8632 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接断开：/127.0.0.1:13385
2023-03-10 10:16:48.398  INFO 8632 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:5148
2023-03-10 10:16:48.399  INFO 8632 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:5148
2023-03-10 10:16:48.401  INFO 8632 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,headers=http://localhost:3000,method=GET
2023-03-10 10:16:48.401  INFO 8632 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:16:48.402  INFO 8632 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:16:48.422  INFO 8632 --- [ConsumeMessageThread_chat-connect-group_2] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw, extend=null)
2023-03-10 10:16:48.433  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=cd8201d1-e6e8-4573-8720-50a8e3be3d6b],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=OPTIONS],[time=2023-03-10T10:16:48.433518100]
2023-03-10 10:16:48.435  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=1d5af74e-1a67-46b5-8760-148de072ab20],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=OPTIONS],[time=2023-03-10T10:16:48.435517500]
2023-03-10 10:16:48.435  INFO 8632 --- [ConsumeMessageThread_chat-connect-group_2] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 10:16:48.529  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=02360170-bff3-4efa-a4bc-aff5c5bfd8ff],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T10:16:48.529520400]
2023-03-10 10:16:48.529  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@5b05b406,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:16:48.532  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=56a7c249-0b62-445e-a72d-bee17e645286],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=GET],[time=2023-03-10T10:16:48.532518400]
2023-03-10 10:16:48.532  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@7f9972e,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:16:48.532  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c6b5c54,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:16:48.535  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@93e69a1,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:16:48.948  INFO 8632 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:16:48.978  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=a3d8d758-7b2d-4649-af69-8e51ed59513e],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T10:16:48.978169300]
2023-03-10 10:16:49.026  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=f6426fbc-26fa-4ef1-aa7f-0e589c4e7a04],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:16:49.026169100]
2023-03-10 10:16:49.026  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@6612debc,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:16:49.031  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c6b5c54,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:16:49.033  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 10:17:16.755  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=3854762f-73c6-458c-813a-4213a3219d77],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T10:17:16.755300100]
2023-03-10 10:17:16.755  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=2c707a51-96ef-4df0-b407-653f95e20d8c],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=OPTIONS],[time=2023-03-10T10:17:16.755300100]
2023-03-10 10:17:16.769  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=d4e1239b-c92a-4116-872b-f271c152c993],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=GET],[time=2023-03-10T10:17:16.769296900]
2023-03-10 10:17:16.770  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@70efb7ef,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:17:16.773  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=00a2c06b-0b00-454c-a473-000cb4905452],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T10:17:16.773299500]
2023-03-10 10:17:16.773  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@6daa831d,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:17:16.773  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@93e69a1,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:17:16.776  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c6b5c54,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:17:17.010  INFO 8632 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":["1631543156694679554","1631543980913164289","1631544981921562625","1631545332447936513","1631547912842420226","1631549401233117186","1631549482778775553","1631549872870019074","1633008691928141825","1633009164240326658","1633360461682462722"]}}
2023-03-10 10:21:06.271  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=7c2d8a2f-7e99-43b4-b764-270d0f9e2c3f],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T10:21:06.271017200]
2023-03-10 10:21:06.278  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=12c0fc93-475b-4502-8a75-c0e45b240a98],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T10:21:06.278020700]
2023-03-10 10:21:06.279  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@4643b293,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:21:06.281  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c6b5c54,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:21:06.373  INFO 8632 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612031901659357185","msg_id":[]}}
2023-03-10 10:21:08.734  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=a0e68b92-9c87-46fe-98bc-78e1d0a8c3a5],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T10:21:08.734935700]
2023-03-10 10:21:08.746  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=157a0490-8bbb-4d89-8b15-76c10348fe1f],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T10:21:08.746926100]
2023-03-10 10:21:08.746  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@3fdc01dc,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw
2023-03-10 10:21:08.748  INFO 8632 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@3c6b5c54,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDE4OTU3fQ.RVp11ACuD_9KH9N41GiTX1B9GuGLXKKBHPt2-p4OQLK_rKKTMMNqt262h-DrRF49tl79mn4NBEEhxy_9qtOGBw,user=1611656761503215617
2023-03-10 10:21:08.863  INFO 8632 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":["1631543156694679554","1631543980913164289","1631544981921562625","1631545332447936513","1631547912842420226","1631549401233117186","1631549482778775553","1631549872870019074","1633008691928141825","1633009164240326658","1633360461682462722"]}}
2023-03-10 10:21:38.912  INFO 8632 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:21:38.913  INFO 8632 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:21:38.946  INFO 8632 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:21:38.946  INFO 8632 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:21:38.979  INFO 8632 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:21:38.979  INFO 8632 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:21:39.062  INFO 8632 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='image-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:21:39.062  INFO 8632 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:21:39.063  INFO 8632 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:21:39.101  INFO 8632 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:21:39.102  INFO 8632 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:21:39.108  INFO 8632 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 10:21:39.149  INFO 8632 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closing ...
2023-03-10 10:21:39.177  INFO 8632 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2023-03-10 10:28:49.531  INFO 16220 --- [main] com.hk.im.admin.IMAdminApplication       : Starting IMAdminApplication using Java 17.0.2 on DESKTOP-PICLGLQ with PID 16220 (F:\JavaCode\HotKeyIM\im-web\im-admin\target\classes started by HK意境 in F:\JavaCode\HotKeyIM)
2023-03-10 10:28:49.553  INFO 16220 --- [main] com.hk.im.admin.IMAdminApplication       : The following 1 profile is active: "dev"
2023-03-10 10:28:56.802  INFO 16220 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 10:28:56.803  INFO 16220 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-03-10 10:28:56.838  INFO 16220 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 17 ms. Found 0 JPA repository interfaces.
2023-03-10 10:28:56.890  INFO 16220 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 10:28:56.893  INFO 16220 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-10 10:28:56.918  INFO 16220 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 6 ms. Found 0 Redis repository interfaces.
2023-03-10 10:28:57.558  INFO 16220 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvice' of type [com.hk.im.admin.advice.MethodTraceAdvice$$EnhancerBySpringCGLIB$$16ed3bf9] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 10:28:57.581  INFO 16220 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 10:28:59.300  INFO 16220 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9090 (http)
2023-03-10 10:28:59.332  INFO 16220 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-03-10 10:28:59.332  INFO 16220 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2023-03-10 10:29:00.722  INFO 16220 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring embedded WebApplicationContext
2023-03-10 10:29:00.722  INFO 16220 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 11030 ms
2023-03-10 10:29:02.146  INFO 16220 --- [main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2023-03-10 10:29:03.068  INFO 16220 --- [main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2023-03-10 10:29:03.310  INFO 16220 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-03-10 10:29:03.485  INFO 16220 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2023-03-10 10:29:03.885  INFO 16220 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-03-10 10:29:04.130  INFO 16220 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2023-03-10 10:29:04.495  INFO 16220 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-03-10 10:29:04.514  INFO 16220 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 10:29:05.201  WARN 16220 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.CollectEmoticon ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:29:05.703  WARN 16220 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.LikePost ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:29:05.808  WARN 16220 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.NoteTag ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:29:05.983  WARN 16220 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.UserCollection ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:29:07.539  INFO 16220 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server address:localhost
2023-03-10 10:29:07.541  INFO 16220 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server port:9870
2023-03-10 10:29:07.541  INFO 16220 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server serializer:Json
2023-03-10 10:29:07.541  INFO 16220 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server path:/channel
2023-03-10 10:29:07.550  INFO 16220 --- [main] c.h.i.s.p.c.SendTextMessageConsumer      : sendMessage consumer bean created
2023-03-10 10:29:08.431  INFO 16220 --- [main] c.h.i.s.p.config.ExecutorConfiguration   : start asyncServiceExecutor
2023-03-10 10:29:08.558  WARN 16220 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-03-10 10:29:09.818  INFO 16220 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:29:09.819  INFO 16220 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sendTextMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-10 10:29:09.982  INFO 16220 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:29:09.982  INFO 16220 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:userConnectedConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2023-03-10 10:29:10.141  INFO 16220 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='image-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:29:10.141  INFO 16220 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sentImageMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2023-03-10 10:29:10.194  INFO 16220 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9090 (http) with context path '/admin'
2023-03-10 10:29:10.203  INFO 16220 --- [main] c.h.i.server.chat.ChatServerBootStarter  : IOC 容器准备完毕,准备创建Chat Server: 2023-03-10T10:29:10.203168800
2023-03-10 10:29:10.203  INFO 16220 --- [main] c.h.i.server.chat.ChatServerBootStarter  : 启动Chat Server: class com.hk.im.server.chat.ChatServerBootStarter-2023-03-10T10:29:10.203168800
2023-03-10 10:29:10.210  INFO 16220 --- [main] com.hk.im.admin.IMAdminApplication       : Started IMAdminApplication in 21.801 seconds (JVM running for 28.147)
2023-03-10 10:29:10.427  INFO 16220 --- [Thread-9] c.h.i.s.chat.server.HotKeyChatServer     : websocket 服务启动，ip=localhost,port=9870
2023-03-10 10:29:29.576  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-10 10:29:29.590  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-03-10 10:29:29.593  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2023-03-10 10:29:29.670  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=021a0b3f-f6e8-45c8-a884-a1f8cd029c4f],[ip=127.0.0.1],[uri=/admin/user/login],[method=OPTIONS],[time=2023-03-10T10:29:29.670315900]
2023-03-10 10:29:29.983  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=0e0ffbdb-42d0-4d05-a6dd-a64cbf4473eb],[ip=127.0.0.1],[uri=/admin/user/login],[method=POST],[time=2023-03-10T10:29:29.983315200]
2023-03-10 10:29:32.692  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=1df13b01-c824-4ff6-bea0-66b29e023b2b],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=OPTIONS],[time=2023-03-10T10:29:32.692252400]
2023-03-10 10:29:32.731  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=f677f56d-62f4-4f07-8476-4106a5610386],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=OPTIONS],[time=2023-03-10T10:29:32.731234200]
2023-03-10 10:29:32.741  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=5da7e67c-6f70-4fbf-82e5-0147e1b5f5e8],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=GET],[time=2023-03-10T10:29:32.741233900]
2023-03-10 10:29:32.742  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@7775a74b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:29:32.783  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@7f301779,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:29:32.883  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=ffb47430-bf1b-4200-bc1c-e36cc4e99915],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T10:29:32.883236400]
2023-03-10 10:29:32.883  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@73df9ce1,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:29:32.891  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@7f301779,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:29:32.978  WARN 16220 --- [http-nio-127.0.0.1-9090-exec-2] c.b.m.c.t.support.ReflectLambdaMeta      : Unable to make field private final java.lang.Class java.lang.invoke.SerializedLambda.capturingClass accessible: module java.base does not "opens java.lang.invoke" to unnamed module @6150c3ec
2023-03-10 10:29:33.148  INFO 16220 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:3944
2023-03-10 10:29:33.148  INFO 16220 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:3944
2023-03-10 10:29:33.235  INFO 16220 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,headers=http://localhost:3000,method=GET
2023-03-10 10:29:33.237  INFO 16220 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:29:33.237  INFO 16220 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:29:33.409  INFO 16220 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ, extend=null)
2023-03-10 10:29:33.434  INFO 16220 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 10:29:33.757  INFO 16220 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:29:33.764  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=8cab330a-bdfd-4cb1-923c-ddbeff161a0a],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T10:29:33.764980700]
2023-03-10 10:29:33.773  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=f3165055-98f8-4748-8f2f-72c7555d55ef],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:29:33.773981]
2023-03-10 10:29:33.774  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@78bb1e2f,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:29:33.777  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@7f301779,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:29:33.779  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 10:29:39.778  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=f5b38ec9-7b2a-4bbe-897b-7f0856eb3484],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T10:29:39.778462300]
2023-03-10 10:29:39.778  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=c21688f9-b772-47f5-91c4-6796ab5c8cad],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=OPTIONS],[time=2023-03-10T10:29:39.778462300]
2023-03-10 10:29:39.792  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=f89e5ddb-7e3c-431a-a0af-ed5067e150fb],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T10:29:39.792462600]
2023-03-10 10:29:39.792  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@2c22ec5,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:29:39.793  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=698ca329-7517-49d3-b11e-501d075358ef],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=GET],[time=2023-03-10T10:29:39.792462600]
2023-03-10 10:29:39.793  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@45e9e0ea,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:29:39.795  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@7f301779,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:29:39.795  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@c05d0ed,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:29:40.207  INFO 16220 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":["1631543156694679554","1631543980913164289","1631544981921562625","1631545332447936513","1631547912842420226","1631549401233117186","1631549482778775553","1631549872870019074","1633008691928141825","1633009164240326658","1633360461682462722"]}}
2023-03-10 10:36:20.452  INFO 16220 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接断开：/127.0.0.1:3944,id=907841fffe2e6da0-00003f5c-0000000b-2f1227a38a69129e-acc9a9a7
2023-03-10 10:36:20.454  INFO 16220 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接断开：/127.0.0.1:3944
2023-03-10 10:36:23.231  INFO 16220 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:13782
2023-03-10 10:36:23.231  INFO 16220 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:13782
2023-03-10 10:36:23.235  INFO 16220 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,headers=http://localhost:3000,method=GET
2023-03-10 10:36:23.235  INFO 16220 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:36:23.235  INFO 16220 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:36:23.251  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=04e72f0d-44a4-460b-8007-cc1ffedf8b8f],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=OPTIONS],[time=2023-03-10T10:36:23.251920200]
2023-03-10 10:36:23.252  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=46b4d37f-9cbf-40e3-ba96-a64d55320fb8],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=OPTIONS],[time=2023-03-10T10:36:23.252924500]
2023-03-10 10:36:23.264  INFO 16220 --- [ConsumeMessageThread_chat-connect-group_2] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ, extend=null)
2023-03-10 10:36:23.275  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=a6adee23-4295-466e-bf10-b59a511f1a00],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T10:36:23.275922]
2023-03-10 10:36:23.275  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@61f791c4,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:36:23.275  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=a1331e2f-dbf4-4e00-bf1b-3b7e8f6e3671],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=GET],[time=2023-03-10T10:36:23.275922]
2023-03-10 10:36:23.276  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@4c3be997,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:36:23.277  INFO 16220 --- [ConsumeMessageThread_chat-connect-group_2] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 10:36:23.279  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@6f30738a,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:36:23.280  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@18df8e51,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:36:23.801  INFO 16220 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:36:23.821  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=5c0e7ada-4c21-4615-8827-73d72836d6c8],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T10:36:23.821638900]
2023-03-10 10:36:23.885  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=bca34da4-2911-4577-95b6-6bcf949d4c96],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:36:23.885637]
2023-03-10 10:36:23.885  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@4d18357a,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:36:23.888  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@18df8e51,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:36:23.888  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 10:36:29.080  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=141667d4-bea6-4e3b-b195-7f5d931eadd4],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=OPTIONS],[time=2023-03-10T10:36:29.080118100]
2023-03-10 10:36:29.080  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=9eb8fa5d-097d-4be2-9047-eecd8bb38d22],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T10:36:29.080118100]
2023-03-10 10:36:29.097  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=7aafb042-c935-4b38-89eb-e14d74c65491],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=GET],[time=2023-03-10T10:36:29.097120900]
2023-03-10 10:36:29.097  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@7892f2d7,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:36:29.099  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@c05d0ed,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:36:29.100  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=d3abd433-6924-47fb-87e6-e9c6fafe61de],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T10:36:29.100117500]
2023-03-10 10:36:29.100  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@30e15491,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:36:29.102  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@6f30738a,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:36:29.195  INFO 16220 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612031901659357185","msg_id":[]}}
2023-03-10 10:36:31.744  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=85935ea9-94a4-416b-9934-e66dd0d9a265],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T10:36:31.744555]
2023-03-10 10:36:31.757  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=8600f639-92e3-40b8-b1d4-20877a6e4153],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T10:36:31.757566700]
2023-03-10 10:36:31.757  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@76e9d7e9,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:36:31.760  INFO 16220 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@6f30738a,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:36:31.864  INFO 16220 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":["1631543156694679554","1631543980913164289","1631544981921562625","1631545332447936513","1631547912842420226","1631549401233117186","1631549482778775553","1631549872870019074","1633008691928141825","1633009164240326658","1633360461682462722"]}}
2023-03-10 10:49:27.356  INFO 16220 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:49:27.356  INFO 16220 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:49:27.390  INFO 16220 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:49:27.391  INFO 16220 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:49:27.425  INFO 16220 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:49:27.426  INFO 16220 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:49:27.612  INFO 16220 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='image-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:49:27.612  INFO 16220 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:49:27.613  INFO 16220 --- [SpringApplicationShutdownHook] a.r.s.s.DefaultRocketMQListenerContainer : container destroyed, DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:49:27.679  INFO 16220 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:9876] result: true
2023-03-10 10:49:27.680  INFO 16220 --- [NettyClientSelector_1] RocketmqRemoting                         : closeChannel: close the connection to remote address[47.108.146.141:10911] result: true
2023-03-10 10:49:27.688  INFO 16220 --- [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 10:49:27.764  INFO 16220 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closing ...
2023-03-10 10:49:27.787  INFO 16220 --- [SpringApplicationShutdownHook] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} closed
2023-03-10 10:49:55.075  INFO 117248 --- [main] com.hk.im.admin.IMAdminApplication       : Starting IMAdminApplication using Java 17.0.2 on DESKTOP-PICLGLQ with PID 117248 (F:\JavaCode\HotKeyIM\im-web\im-admin\target\classes started by HK意境 in F:\JavaCode\HotKeyIM)
2023-03-10 10:49:55.084  INFO 117248 --- [main] com.hk.im.admin.IMAdminApplication       : The following 1 profile is active: "dev"
2023-03-10 10:50:00.531  INFO 117248 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 10:50:00.532  INFO 117248 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-03-10 10:50:00.562  INFO 117248 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 15 ms. Found 0 JPA repository interfaces.
2023-03-10 10:50:00.614  INFO 117248 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode!
2023-03-10 10:50:00.616  INFO 117248 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2023-03-10 10:50:00.637  INFO 117248 --- [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2023-03-10 10:50:01.238  INFO 117248 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvice' of type [com.hk.im.admin.advice.MethodTraceAdvice$$EnhancerBySpringCGLIB$$33b57418] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 10:50:01.259  INFO 117248 --- [main] trationDelegate$BeanPostProcessorChecker : Bean 'methodTraceAdvisor' of type [org.springframework.aop.support.DefaultPointcutAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2023-03-10 10:50:02.125  INFO 117248 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 9090 (http)
2023-03-10 10:50:02.144  INFO 117248 --- [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2023-03-10 10:50:02.145  INFO 117248 --- [main] org.apache.catalina.core.StandardEngine  : Starting Servlet engine: [Apache Tomcat/9.0.63]
2023-03-10 10:50:02.435  INFO 117248 --- [main] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring embedded WebApplicationContext
2023-03-10 10:50:02.435  INFO 117248 --- [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 7257 ms
2023-03-10 10:50:03.291  INFO 117248 --- [main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource
2023-03-10 10:50:04.257  INFO 117248 --- [main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-1} inited
2023-03-10 10:50:04.454  INFO 117248 --- [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2023-03-10 10:50:04.616  INFO 117248 --- [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
2023-03-10 10:50:05.251  INFO 117248 --- [main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-03-10 10:50:05.471  INFO 117248 --- [main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL8Dialect
2023-03-10 10:50:05.844  INFO 117248 --- [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-03-10 10:50:05.867  INFO 117248 --- [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-03-10 10:50:06.525  WARN 117248 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.CollectEmoticon ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:50:07.013  WARN 117248 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.LikePost ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:50:07.105  WARN 117248 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.NoteTag ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:50:07.276  WARN 117248 --- [main] c.b.m.core.injector.DefaultSqlInjector   : class com.hk.im.domain.entity.UserCollection ,Not found @TableId annotation, Cannot use Mybatis-Plus 'xxById' Method.
2023-03-10 10:50:08.836  INFO 117248 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server address:localhost
2023-03-10 10:50:08.838  INFO 117248 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server port:9870
2023-03-10 10:50:08.838  INFO 117248 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server serializer:Json
2023-03-10 10:50:08.838  INFO 117248 --- [main] c.h.i.server.chat.config.MetaDataConfig  : chat server path:/channel
2023-03-10 10:50:08.848  INFO 117248 --- [main] c.h.i.s.p.c.SendTextMessageConsumer      : sendMessage consumer bean created
2023-03-10 10:50:09.617  INFO 117248 --- [main] c.h.i.s.p.config.ExecutorConfiguration   : start asyncServiceExecutor
2023-03-10 10:50:09.692  WARN 117248 --- [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-03-10 10:50:11.022  INFO 117248 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='TEXT', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:50:11.023  INFO 117248 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sendTextMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2023-03-10 10:50:11.179  INFO 117248 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='chat-connect-group', namespace='', nameServer='47.108.146.141:9876', topic='connect-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:50:11.179  INFO 117248 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:userConnectedConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2023-03-10 10:50:11.342  INFO 117248 --- [main] a.r.s.s.DefaultRocketMQListenerContainer : running container: DefaultRocketMQListenerContainer{consumerGroup='image-message-group', namespace='', nameServer='47.108.146.141:9876', topic='chat-topic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='IMAGE', messageModel=CLUSTERING', tlsEnable=false}
2023-03-10 10:50:11.343  INFO 117248 --- [main] o.a.r.s.a.ListenerContainerConfiguration : Register the listener to container, listenerBeanName:sentImageMessageConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2023-03-10 10:50:11.419  INFO 117248 --- [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 9090 (http) with context path '/admin'
2023-03-10 10:50:11.428  INFO 117248 --- [main] c.h.i.server.chat.ChatServerBootStarter  : IOC 容器准备完毕,准备创建Chat Server: 2023-03-10T10:50:11.428604800
2023-03-10 10:50:11.429  INFO 117248 --- [main] c.h.i.server.chat.ChatServerBootStarter  : 启动Chat Server: class com.hk.im.server.chat.ChatServerBootStarter-2023-03-10T10:50:11.429604
2023-03-10 10:50:11.449  INFO 117248 --- [main] com.hk.im.admin.IMAdminApplication       : Started IMAdminApplication in 17.283 seconds (JVM running for 19.339)
2023-03-10 10:50:11.636  INFO 117248 --- [Thread-9] c.h.i.s.chat.server.HotKeyChatServer     : websocket 服务启动，ip=localhost,port=9870
2023-03-10 10:50:14.368  INFO 117248 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:5564
2023-03-10 10:50:14.368  INFO 117248 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:5564
2023-03-10 10:50:14.384  INFO 117248 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,headers=http://localhost:3000,method=GET
2023-03-10 10:50:14.385  INFO 117248 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:50:14.385  INFO 117248 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:50:15.018  INFO 117248 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ, extend=null)
2023-03-10 10:50:15.066  WARN 117248 --- [nioEventLoopGroup-5-1] c.b.m.c.t.support.ReflectLambdaMeta      : Unable to make field private final java.lang.Class java.lang.invoke.SerializedLambda.capturingClass accessible: module java.base does not "opens java.lang.invoke" to unnamed module @7e6f74c
2023-03-10 10:50:15.372  INFO 117248 --- [ConsumeMessageThread_chat-connect-group_1] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 10:50:15.446  INFO 117248 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:50:15.954  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/admin]  : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-03-10 10:50:15.954  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-03-10 10:50:15.956  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2023-03-10 10:50:16.004  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=9172e783-d404-4da6-af3e-9bf5e0533e71],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T10:50:16.004855400]
2023-03-10 10:50:16.150  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=d05bd818-b469-4774-af17-c5973b66ae92],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:50:16.150858300]
2023-03-10 10:50:16.150  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@57ec6b33,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:50:16.159  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:50:16.187  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 10:50:37.843  INFO 117248 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接断开：/127.0.0.1:5564,id=907841fffe2e6da0-0001ca00-00000009-30956ea30ede2345-143ec6cb
2023-03-10 10:50:37.844  INFO 117248 --- [nioEventLoopGroup-5-1] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接断开：/127.0.0.1:5564
2023-03-10 10:50:39.857  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=78847b75-bdef-423b-91f1-6ea929ae4c6d],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=OPTIONS],[time=2023-03-10T10:50:39.857738100]
2023-03-10 10:50:39.858  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=797f0980-98da-4d6c-a910-62f4bcc02b1d],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=OPTIONS],[time=2023-03-10T10:50:39.858738200]
2023-03-10 10:50:39.879  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=d7563fdf-c132-4a3f-8fe3-3db49c012ab7],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T10:50:39.879737800]
2023-03-10 10:50:39.879  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@7f8628b9,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:50:39.882  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=221549f2-e38d-4ff8-a359-c4ad4d283508],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=GET],[time=2023-03-10T10:50:39.882737600]
2023-03-10 10:50:39.882  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@3612dee,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:50:39.883  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:50:39.885  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@da6d3f2,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:50:40.134  INFO 117248 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:7813
2023-03-10 10:50:40.134  INFO 117248 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:7813
2023-03-10 10:50:40.138  INFO 117248 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,headers=http://localhost:3000,method=GET
2023-03-10 10:50:40.138  INFO 117248 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:50:40.138  INFO 117248 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:50:40.166  INFO 117248 --- [ConsumeMessageThread_chat-connect-group_2] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ, extend=null)
2023-03-10 10:50:40.181  INFO 117248 --- [ConsumeMessageThread_chat-connect-group_2] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 10:50:40.755  INFO 117248 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:50:40.762  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=85b8973e-c959-4831-8c5f-68442db63985],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T10:50:40.762693]
2023-03-10 10:50:40.773  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=0a114586-8732-48e8-929f-316af6210e01],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:50:40.773695700]
2023-03-10 10:50:40.773  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@43830176,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:50:40.776  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@da6d3f2,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:50:40.777  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 10:50:48.658  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=0132be7b-c5f7-465e-b0bf-a55c92d37ea4],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=OPTIONS],[time=2023-03-10T10:50:48.658993900]
2023-03-10 10:50:48.658  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=26317f54-a05b-4618-8e96-7a154fca54c2],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T10:50:48.658993900]
2023-03-10 10:50:48.673  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=e5fcfc31-e883-41f1-87ba-d6e7bc2e54e5],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T10:50:48.673991900]
2023-03-10 10:50:48.673  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@554ef153,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:50:48.674  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=34b4d58a-77bf-4c36-86e3-172b562735ef],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=GET],[time=2023-03-10T10:50:48.674996400]
2023-03-10 10:50:48.674  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@38006367,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:50:48.678  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@da6d3f2,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:50:48.678  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:50:48.903  INFO 117248 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":["1631543156694679554","1631543980913164289","1631544981921562625","1631545332447936513","1631547912842420226","1631549401233117186","1631549482778775553","1631549872870019074","1633008691928141825","1633009164240326658","1633360461682462722"]}}
2023-03-10 10:51:04.698  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=d53a4bb9-a1e2-4a71-8b18-f5426bebaae9],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=OPTIONS],[time=2023-03-10T10:51:04.698665400]
2023-03-10 10:51:04.966  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=3af7991d-c795-442f-bc9e-10a92dc25f3b],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=POST],[time=2023-03-10T10:51:04.966679]
2023-03-10 10:51:04.967  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@19b04de3,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:51:04.969  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset:org.springframework.web.multipart.support.StandardMultipartHttpServletRequest@ae6d854,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:51:06.079  INFO 117248 --- [async-service-1] c.h.i.i.e.c.l.CommunicationEventListener : refresh sequence and session ttl: Sequence(id=null, name=null, description=null, sessionId=null, receiverId=1612030664754913281, senderId=1611656761503215617, max=null, step=null, segment=null, version=null, createTime=null, updateTime=null, current=1)
2023-03-10 10:51:06.114  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_chat_message  ( id,
sequence,
message_feature,
message_type,
content,
url,
extra,

create_time,
update_time )  VALUES  ( ?,
?,
?,
?,
?,
?,
?,

?,
? )
2023-03-10 10:51:06.129  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:51:06.187  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_message_flow  ( id,

sender_id,
receiver_id,
chat_type,
message_type,
message_id,
`sequence`,
send_status,
sign_flag,

deleted,
create_time,
update_time )  VALUES  ( ?,

?,
?,
?,
?,
?,
?,
?,
?,

?,
?,
? )
2023-03-10 10:51:06.188  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:51:06.377  INFO 117248 --- [async-service-2] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 10:51:06.379  INFO 117248 --- [async-service-2] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:51:06.493  INFO 117248 --- [async-service-2] c.h.i.i.e.m.l.MessageEventHandler        : Sent message by rocketmq: SendResult [sendStatus=SEND_OK, msgId=7F000001CA0063947C6B30AD576D0002, offsetMsgId=2F6C928D00002A9F000000000001CFF3, messageQueue=MessageQueue [topic=chat-topic, brokerName=broker-a, queueId=2], queueOffset=5]
2023-03-10 10:51:06.520  INFO 117248 --- [ConsumeMessageThread_image-message-group_1] c.h.i.s.p.c.SentImageMessageConsumer     : rocketmq on message(chat message image): MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:51:06.529  INFO 117248 --- [ConsumeMessageThread_image-message-group_1] c.h.i.s.p.worker.MessageOfflineWorker    : offline message handle start:MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:51:06.529  INFO 117248 --- [async-service-3] c.h.i.s.push.worker.MessageSynchronizer  : MessageSynchronizer synchronize message to me=1611656761503215617,message=MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:51:06.533  INFO 117248 --- [ConsumeMessageThread_image-message-group_1] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 10:51:06.534  INFO 117248 --- [ConsumeMessageThread_image-message-group_1] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:51:06.541  INFO 117248 --- [async-service-3] c.h.i.s.push.worker.MessageSynchronizer  : push message=DataContainer(actionType=1, event=event_talk, message=SimpleImageMessage(super=AbstractMessage(sequenceId=0, messageType=2, messageBO=MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人))), extra=null) to Channel=907841fffe2e6da0-0001ca00-0000000c-161586335ede4884-7e14bb0f
2023-03-10 10:51:32.784  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=dd04b043-7888-43c7-9f39-1c723ba49da7],[ip=127.0.0.1],[uri=/admin/user/login],[method=OPTIONS],[time=2023-03-10T10:51:32.784002500]
2023-03-10 10:51:32.797  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=13067754-a7a2-4205-a7e4-d752e506a15e],[ip=127.0.0.1],[uri=/admin/user/login],[method=POST],[time=2023-03-10T10:51:32.797016500]
2023-03-10 10:51:33.018  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=7d2680c9-3031-47b2-9e15-ad131404eb37],[ip=127.0.0.1],[uri=/admin/user/1612030664754913281],[method=OPTIONS],[time=2023-03-10T10:51:33.018005300]
2023-03-10 10:51:33.024  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=0330c0f4-b4b5-4db6-bebc-2edc5ee78763],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=OPTIONS],[time=2023-03-10T10:51:33.024991400]
2023-03-10 10:51:33.035  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=925170b0-90fb-41ad-8de6-f3d089f970ae],[ip=127.0.0.1],[uri=/admin/user/1612030664754913281],[method=GET],[time=2023-03-10T10:51:33.035989300]
2023-03-10 10:51:33.035  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@4a32738a,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:51:33.037  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:51:33.039  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=f020ccd9-6ae0-42d6-915d-8bddd688e2c9],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T10:51:33.039989300]
2023-03-10 10:51:33.039  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@1e2fd669,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:51:33.043  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@da6d3f2,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:51:33.281  INFO 117248 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:6617
2023-03-10 10:51:33.281  INFO 117248 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:6617
2023-03-10 10:51:33.284  INFO 117248 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,headers=http://localhost:3000,method=GET
2023-03-10 10:51:33.284  INFO 117248 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:51:33.284  INFO 117248 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:51:33.309  INFO 117248 --- [ConsumeMessageThread_chat-connect-group_3] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1612030664754913281, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ, extend=null)
2023-03-10 10:51:33.319  INFO 117248 --- [ConsumeMessageThread_chat-connect-group_3] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1612030664754913281, accessToken=null, expiresIn=3600, username=令狐翅膀, account=1673173034, phone=18171513361, email=p.ohbkyke@qq.com, bigAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g&s=200, miniAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, qrcode=null, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=null, age=null, birthday=null, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是令狐翅膀,请多指教)
2023-03-10 10:51:33.360  INFO 117248 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:51:33.422  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=c3cfc19d-8555-4d65-aec2-ae0a4893d47c],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T10:51:33.422987300]
2023-03-10 10:51:33.439  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=4c8c19b3-f1b1-4c2c-8bba-b0985fbc5391],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:51:33.438988100]
2023-03-10 10:51:33.439  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@7bbc927d,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:51:33.441  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:51:33.442  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1612030664754913281
2023-03-10 10:51:37.993  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=e7b5ed42-472b-42c6-a48a-0f095c8a6548],[ip=127.0.0.1],[uri=/admin/talk/unread/clear],[method=OPTIONS],[time=2023-03-10T10:51:37.993319600]
2023-03-10 10:51:37.994  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=4721e94b-3a01-4338-890f-15c8d32c6a4c],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T10:51:37.994321400]
2023-03-10 10:51:37.994  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=c2446782-9ee1-4463-858c-832d69081c72],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=OPTIONS],[time=2023-03-10T10:51:37.994321400]
2023-03-10 10:51:38.015  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=c8e9c488-5539-4287-865a-3dd748c45f8c],[ip=127.0.0.1],[uri=/admin/talk/unread/clear],[method=POST],[time=2023-03-10T10:51:38.015319400]
2023-03-10 10:51:38.016  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@2387ed8b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:51:38.017  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=84bbf77e-5750-4de0-92eb-4612cbce0c12],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=GET],[time=2023-03-10T10:51:38.017317700]
2023-03-10 10:51:38.017  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@645f6bec,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:51:38.018  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@da6d3f2,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:51:38.019  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=6d1c5280-3bba-47e6-a195-b131f6f8cac6],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T10:51:38.019320200]
2023-03-10 10:51:38.019  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@3f1ec666,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:51:38.019  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1036eaaa,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:51:38.022  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:51:38.131 ERROR 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.hk.im.admin.advice.WebExceptionAdvice  : runtime exception:

java.lang.NumberFormatException: Cannot parse null string
	at java.base/java.lang.Long.parseLong(Long.java:674) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1163) ~[na:na]
	at com.hk.im.service.service.ChatCommunicationServiceImpl.clearUnreadMessage(ChatCommunicationServiceImpl.java:416) ~[classes/:na]
	at com.hk.im.service.service.ChatCommunicationServiceImpl$$FastClassBySpringCGLIB$$aef42fb5.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689) ~[spring-aop-5.3.18.jar:5.3.18]
	at com.hk.im.service.service.ChatCommunicationServiceImpl$$EnhancerBySpringCGLIB$$e4c05fa8.clearUnreadMessage(<generated>) ~[classes/:na]
	at com.hk.im.admin.controller.CommunicationController.clearUnreadMessage(CommunicationController.java:77) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:124) ~[druid-1.2.8.jar:1.2.8]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]

2023-03-10 10:51:38.201  INFO 117248 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1611656761503215617","msg_id":["1631544192121536513","1631545232514449410","1631545265607507969","1631545409157562370","1631545527147528193","1631547263044124673","1631549589595115521","1631549636093169666","1633009057675644929","1633029761007677442","1633033758145835009","1633107494089826306","1633360292828172290","1633752041069252610","1634007735336988674","1634009318841962498","1634011620046835713","1634013278881456129","1634013813894291458","1634024046859448321"]}}
2023-03-10 10:51:49.768  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=018dd5b1-b0eb-4642-9286-310daadf2539],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=OPTIONS],[time=2023-03-10T10:51:49.768901900]
2023-03-10 10:51:49.805  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=2f5cf09a-2e8e-4bad-8ea2-3be6b1ce65fe],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=POST],[time=2023-03-10T10:51:49.805899700]
2023-03-10 10:51:49.806  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@6f01408a,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:51:49.808  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset:org.springframework.web.multipart.support.StandardMultipartHttpServletRequest@459eec0c,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:51:50.396  INFO 117248 --- [async-service-4] c.h.i.i.e.c.l.CommunicationEventListener : refresh sequence and session ttl: Sequence(id=null, name=null, description=null, sessionId=null, receiverId=1611656761503215617, senderId=1612030664754913281, max=null, step=null, segment=null, version=null, createTime=null, updateTime=null, current=1)
2023-03-10 10:51:50.397  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_chat_message  ( id,
sequence,
message_feature,
message_type,
content,
url,
extra,

create_time,
update_time )  VALUES  ( ?,
?,
?,
?,
?,
?,
?,

?,
? )
2023-03-10 10:51:50.397  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:51:50.404  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_message_flow  ( id,

sender_id,
receiver_id,
chat_type,
message_type,
message_id,
`sequence`,
send_status,
sign_flag,

deleted,
create_time,
update_time )  VALUES  ( ?,

?,
?,
?,
?,
?,
?,
?,
?,

?,
?,
? )
2023-03-10 10:51:50.405  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:51:50.580  INFO 117248 --- [async-service-5] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 10:51:50.581  INFO 117248 --- [async-service-5] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:51:50.703  INFO 117248 --- [async-service-5] c.h.i.i.e.m.l.MessageEventHandler        : Sent message by rocketmq: SendResult [sendStatus=SEND_OK, msgId=7F000001CA0063947C6B30AE041D0004, offsetMsgId=2F6C928D00002A9F000000000001DA7F, messageQueue=MessageQueue [topic=chat-topic, brokerName=broker-a, queueId=2], queueOffset=6]
2023-03-10 10:51:50.704  INFO 117248 --- [ConsumeMessageThread_image-message-group_2] c.h.i.s.p.c.SentImageMessageConsumer     : rocketmq on message(chat message image): MessageVO(sender=UserVO(id=1612030664754913281, accessToken=null, expiresIn=3600, username=令狐翅膀, account=1673173034, phone=18171513361, email=p.ohbkyke@qq.com, bigAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g&s=200, miniAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, qrcode=null, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=null, age=null, birthday=null, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是令狐翅膀,请多指教), receiver=null, avatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, senderAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, receiverAvatar=null, friendRemark=令狐翅膀, nickname=令狐翅膀)
2023-03-10 10:51:50.705  INFO 117248 --- [ConsumeMessageThread_image-message-group_2] c.h.i.s.push.worker.MessageSynchronizer  : push message=DataContainer(actionType=1, event=event_talk, message=SimpleImageMessage(super=AbstractMessage(sequenceId=0, messageType=2, messageBO=MessageVO(sender=UserVO(id=1612030664754913281, accessToken=null, expiresIn=3600, username=令狐翅膀, account=1673173034, phone=18171513361, email=p.ohbkyke@qq.com, bigAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g&s=200, miniAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, qrcode=null, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=null, age=null, birthday=null, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是令狐翅膀,请多指教), receiver=null, avatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, senderAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, receiverAvatar=null, friendRemark=令狐翅膀, nickname=令狐翅膀))), extra=null) to Channel=907841fffe2e6da0-0001ca00-0000000c-161586335ede4884-7e14bb0f
2023-03-10 10:51:50.705  INFO 117248 --- [async-service-6] c.h.i.s.push.worker.MessageSynchronizer  : MessageSynchronizer synchronize message to me=1612030664754913281,message=MessageVO(sender=UserVO(id=1612030664754913281, accessToken=null, expiresIn=3600, username=令狐翅膀, account=1673173034, phone=18171513361, email=p.ohbkyke@qq.com, bigAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g&s=200, miniAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, qrcode=null, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=null, age=null, birthday=null, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是令狐翅膀,请多指教), receiver=null, avatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, senderAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, receiverAvatar=null, friendRemark=令狐翅膀, nickname=令狐翅膀)
2023-03-10 10:51:50.705  INFO 117248 --- [async-service-6] c.h.i.s.push.worker.MessageSynchronizer  : push message=DataContainer(actionType=1, event=event_talk, message=SimpleImageMessage(super=AbstractMessage(sequenceId=0, messageType=2, messageBO=MessageVO(sender=UserVO(id=1612030664754913281, accessToken=null, expiresIn=3600, username=令狐翅膀, account=1673173034, phone=18171513361, email=p.ohbkyke@qq.com, bigAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g&s=200, miniAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, qrcode=null, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=null, age=null, birthday=null, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是令狐翅膀,请多指教), receiver=null, avatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, senderAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, receiverAvatar=null, friendRemark=令狐翅膀, nickname=令狐翅膀))), extra=null) to Channel=907841fffe2e6da0-0001ca00-0000000d-2a4b2c36a6dd7820-ec6488a6
2023-03-10 10:51:51.765  INFO 117248 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":["1634024232541286402"]}}
2023-03-10 10:53:10.622  INFO 117248 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接断开：/127.0.0.1:7813,id=907841fffe2e6da0-0001ca00-0000000c-161586335ede4884-7e14bb0f
2023-03-10 10:53:10.622  INFO 117248 --- [nioEventLoopGroup-5-2] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接断开：/127.0.0.1:7813
2023-03-10 10:53:11.260  INFO 117248 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接断开：/127.0.0.1:6617,id=907841fffe2e6da0-0001ca00-0000000d-2a4b2c36a6dd7820-ec6488a6
2023-03-10 10:53:11.260  INFO 117248 --- [nioEventLoopGroup-5-3] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接断开：/127.0.0.1:6617
2023-03-10 10:53:16.531  INFO 117248 --- [nioEventLoopGroup-5-4] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:12960
2023-03-10 10:53:16.531  INFO 117248 --- [nioEventLoopGroup-5-4] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:12960
2023-03-10 10:53:16.534  INFO 117248 --- [nioEventLoopGroup-5-4] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,headers=http://localhost:3000,method=GET
2023-03-10 10:53:16.534  INFO 117248 --- [nioEventLoopGroup-5-4] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:53:16.534  INFO 117248 --- [nioEventLoopGroup-5-4] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:53:16.551  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=e8e5f0cc-8614-4306-b4a4-609ac748c9b0],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T10:53:16.551983600]
2023-03-10 10:53:16.552  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@1ced54a9,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:53:16.552  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=54187542-02c2-4d4a-b5a3-579c0b15c5ab],[ip=127.0.0.1],[uri=/admin/user/1612030664754913281],[method=GET],[time=2023-03-10T10:53:16.552984]
2023-03-10 10:53:16.552  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@51d531e7,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:53:16.554  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:53:16.554  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@31a9392a,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:53:16.572  INFO 117248 --- [ConsumeMessageThread_chat-connect-group_4] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1612030664754913281, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ, extend=null)
2023-03-10 10:53:16.586  INFO 117248 --- [ConsumeMessageThread_chat-connect-group_4] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1612030664754913281, accessToken=null, expiresIn=3600, username=令狐翅膀, account=1673173034, phone=18171513361, email=p.ohbkyke@qq.com, bigAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g&s=200, miniAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, qrcode=null, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=null, age=null, birthday=null, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是令狐翅膀,请多指教)
2023-03-10 10:53:17.184  INFO 117248 --- [nioEventLoopGroup-5-5] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:12970
2023-03-10 10:53:17.184  INFO 117248 --- [nioEventLoopGroup-5-5] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:12970
2023-03-10 10:53:17.187  INFO 117248 --- [nioEventLoopGroup-5-5] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,headers=http://localhost:3000,method=GET
2023-03-10 10:53:17.187  INFO 117248 --- [nioEventLoopGroup-5-5] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:53:17.187  INFO 117248 --- [nioEventLoopGroup-5-5] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:53:17.215  INFO 117248 --- [ConsumeMessageThread_chat-connect-group_5] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ, extend=null)
2023-03-10 10:53:17.217  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=3e20947f-87ce-499a-9a79-f8df641c5ce0],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=OPTIONS],[time=2023-03-10T10:53:17.217985]
2023-03-10 10:53:17.217  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=fafcb473-5d96-49b3-a20e-92fe69c94c08],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=OPTIONS],[time=2023-03-10T10:53:17.217985]
2023-03-10 10:53:17.229  INFO 117248 --- [ConsumeMessageThread_chat-connect-group_5] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 10:53:17.245  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=da30f1c1-77e2-49fc-9840-a780fc4eaf28],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T10:53:17.245986]
2023-03-10 10:53:17.245  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@974dbb,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:53:17.246  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=f8f8c146-da9b-45cc-8eec-b8ee40256f8b],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=GET],[time=2023-03-10T10:53:17.246984500]
2023-03-10 10:53:17.246  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@7db4dbd8,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:53:17.253  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@31a9392a,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:53:17.253  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:53:17.762  INFO 117248 --- [nioEventLoopGroup-5-4] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:53:17.841  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=bda0d6af-05f2-44d1-91f6-40e4e7b1648f],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:53:17.841466500]
2023-03-10 10:53:17.841  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@57f34703,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:53:17.844  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:53:17.845  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1612030664754913281
2023-03-10 10:53:18.416  INFO 117248 --- [nioEventLoopGroup-5-5] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:53:18.424  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=113514d6-aeaf-4e8f-9685-cf6e8aaf0146],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T10:53:18.424937100]
2023-03-10 10:53:18.436  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=043df57d-7cfc-4a0c-ae40-ed8a28db84a1],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:53:18.436939500]
2023-03-10 10:53:18.436  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@6dfc3418,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:53:18.440  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@31a9392a,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:53:18.441  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 10:53:25.467  INFO 117248 --- [nioEventLoopGroup-5-4] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接断开：/127.0.0.1:12960,id=907841fffe2e6da0-0001ca00-0000000e-1076a26eb91ceb70-cafef861
2023-03-10 10:53:25.468  INFO 117248 --- [nioEventLoopGroup-5-4] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接断开：/127.0.0.1:12960
2023-03-10 10:53:25.488  INFO 117248 --- [nioEventLoopGroup-5-5] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接断开：/127.0.0.1:12970,id=907841fffe2e6da0-0001ca00-0000000f-2ed0bcfab91cedfd-96608921
2023-03-10 10:53:25.488  INFO 117248 --- [nioEventLoopGroup-5-5] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接断开：/127.0.0.1:12970
2023-03-10 10:53:29.146  INFO 117248 --- [nioEventLoopGroup-5-6] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:9530
2023-03-10 10:53:29.147  INFO 117248 --- [nioEventLoopGroup-5-6] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:9530
2023-03-10 10:53:29.149  INFO 117248 --- [nioEventLoopGroup-5-6] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,headers=http://localhost:3000,method=GET
2023-03-10 10:53:29.149  INFO 117248 --- [nioEventLoopGroup-5-6] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:53:29.149  INFO 117248 --- [nioEventLoopGroup-5-6] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:53:29.172  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=df4f317d-45ff-4ec8-95c6-9720f4c7ad77],[ip=127.0.0.1],[uri=/admin/user/1612030664754913281],[method=GET],[time=2023-03-10T10:53:29.172501700]
2023-03-10 10:53:29.172  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@6d391904,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:53:29.172  INFO 117248 --- [ConsumeMessageThread_chat-connect-group_6] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1612030664754913281, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ, extend=null)
2023-03-10 10:53:29.173  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=24694017-42be-4bf5-b255-4400b0759941],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T10:53:29.173500100]
2023-03-10 10:53:29.173  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@2ec844e9,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:53:29.175  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1036eaaa,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:53:29.175  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:53:29.184  INFO 117248 --- [ConsumeMessageThread_chat-connect-group_6] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1612030664754913281, accessToken=null, expiresIn=3600, username=令狐翅膀, account=1673173034, phone=18171513361, email=p.ohbkyke@qq.com, bigAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g&s=200, miniAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, qrcode=null, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=null, age=null, birthday=null, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是令狐翅膀,请多指教)
2023-03-10 10:53:29.694  INFO 117248 --- [nioEventLoopGroup-5-6] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:53:29.849  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=996a9e49-3539-4d4e-b72e-afbb8cbf38e9],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:53:29.849174200]
2023-03-10 10:53:29.850  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@e1074f6,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:53:29.852  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1036eaaa,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:53:29.853  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1612030664754913281
2023-03-10 10:53:29.968  INFO 117248 --- [nioEventLoopGroup-5-7] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:9550
2023-03-10 10:53:29.968  INFO 117248 --- [nioEventLoopGroup-5-7] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:9550
2023-03-10 10:53:29.971  INFO 117248 --- [nioEventLoopGroup-5-7] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,headers=http://localhost:3000,method=GET
2023-03-10 10:53:29.972  INFO 117248 --- [nioEventLoopGroup-5-7] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:53:29.972  INFO 117248 --- [nioEventLoopGroup-5-7] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:53:30.007  INFO 117248 --- [ConsumeMessageThread_chat-connect-group_7] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ, extend=null)
2023-03-10 10:53:30.022  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=47dedb06-b60b-4736-8a2d-94872a3cb24a],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=OPTIONS],[time=2023-03-10T10:53:30.022173900]
2023-03-10 10:53:30.024  INFO 117248 --- [ConsumeMessageThread_chat-connect-group_7] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 10:53:30.025  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=5d50e240-0ca5-41d8-8b74-3b103e78d599],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=OPTIONS],[time=2023-03-10T10:53:30.025173500]
2023-03-10 10:53:30.043  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=642c294c-9036-4271-9896-b0e4059733de],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=GET],[time=2023-03-10T10:53:30.043174700]
2023-03-10 10:53:30.043  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=cc2b81d5-1568-4d6b-8ba5-ca3f221e55a9],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T10:53:30.043174700]
2023-03-10 10:53:30.044  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@372fd75a,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:53:30.044  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@2b64a82d,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:53:30.046  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:53:30.046  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1036eaaa,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:53:30.819  INFO 117248 --- [nioEventLoopGroup-5-7] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:53:30.894  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=eb12f478-8c84-43ec-93ed-ab0b82126a72],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T10:53:30.894241600]
2023-03-10 10:53:30.904  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=4970c144-29e9-480b-aa72-e553848711ba],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:53:30.904240600]
2023-03-10 10:53:30.904  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@78ca7b63,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:53:30.906  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:53:30.907  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 10:54:02.729  INFO 117248 --- [nioEventLoopGroup-5-6] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接断开：/127.0.0.1:9530,id=907841fffe2e6da0-0001ca00-00000010-34eec26641033cb8-de59df85
2023-03-10 10:54:02.729  INFO 117248 --- [nioEventLoopGroup-5-6] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接断开：/127.0.0.1:9530
2023-03-10 10:54:02.745  INFO 117248 --- [nioEventLoopGroup-5-7] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接断开：/127.0.0.1:9550,id=907841fffe2e6da0-0001ca00-00000011-2d597c9a41033fee-a02f048a
2023-03-10 10:54:02.745  INFO 117248 --- [nioEventLoopGroup-5-7] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接断开：/127.0.0.1:9550
2023-03-10 10:54:06.311  INFO 117248 --- [nioEventLoopGroup-5-8] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:7154
2023-03-10 10:54:06.312  INFO 117248 --- [nioEventLoopGroup-5-8] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:7154
2023-03-10 10:54:06.316  INFO 117248 --- [nioEventLoopGroup-5-8] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,headers=http://localhost:3000,method=GET
2023-03-10 10:54:06.316  INFO 117248 --- [nioEventLoopGroup-5-8] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:54:06.316  INFO 117248 --- [nioEventLoopGroup-5-8] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:54:06.332  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=119a34ed-279c-4298-a7c5-89b40447fb80],[ip=127.0.0.1],[uri=/admin/user/1612030664754913281],[method=GET],[time=2023-03-10T10:54:06.332218300]
2023-03-10 10:54:06.332  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@494ab3d,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:54:06.332  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=33497c83-4bac-4802-ac1f-72986498f99e],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T10:54:06.332218300]
2023-03-10 10:54:06.332  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@79822584,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:54:06.334  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-2] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:54:06.334  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@31a9392a,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:54:06.339  INFO 117248 --- [ConsumeMessageThread_chat-connect-group_8] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1612030664754913281, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ, extend=null)
2023-03-10 10:54:06.352  INFO 117248 --- [ConsumeMessageThread_chat-connect-group_8] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1612030664754913281, accessToken=null, expiresIn=3600, username=令狐翅膀, account=1673173034, phone=18171513361, email=p.ohbkyke@qq.com, bigAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g&s=200, miniAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, qrcode=null, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=null, age=null, birthday=null, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是令狐翅膀,请多指教)
2023-03-10 10:54:06.944  INFO 117248 --- [nioEventLoopGroup-5-9] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:7166
2023-03-10 10:54:06.945  INFO 117248 --- [nioEventLoopGroup-5-9] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:7166
2023-03-10 10:54:06.948  INFO 117248 --- [nioEventLoopGroup-5-9] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,headers=http://localhost:3000,method=GET
2023-03-10 10:54:06.949  INFO 117248 --- [nioEventLoopGroup-5-9] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:54:06.949  INFO 117248 --- [nioEventLoopGroup-5-9] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:54:06.974  INFO 117248 --- [ConsumeMessageThread_chat-connect-group_9] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1611656761503215617, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ, extend=null)
2023-03-10 10:54:06.976  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=ca15dd51-09a1-4e67-b89a-d09080a8cfe7],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=OPTIONS],[time=2023-03-10T10:54:06.976220200]
2023-03-10 10:54:06.977  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=4b38abe4-9586-41ce-a0df-670c6c5c375f],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=OPTIONS],[time=2023-03-10T10:54:06.977219900]
2023-03-10 10:54:06.989  INFO 117248 --- [ConsumeMessageThread_chat-connect-group_9] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教)
2023-03-10 10:54:06.990  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=4917ceb8-d105-4455-bc21-6656a5dd9880],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T10:54:06.990221400]
2023-03-10 10:54:06.990  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@9f4728a,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:54:06.991  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=49f7d167-1f3a-4abe-a182-f4fa54c13cca],[ip=127.0.0.1],[uri=/admin/user/1611656761503215617],[method=GET],[time=2023-03-10T10:54:06.991219900]
2023-03-10 10:54:06.991  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@4be722cc,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:54:06.993  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:54:06.993  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@31a9392a,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:54:07.053  INFO 117248 --- [nioEventLoopGroup-5-8] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:54:07.082  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=72b9b19c-bc08-4f34-8251-a2bedd93ccd8],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:54:07.082219800]
2023-03-10 10:54:07.082  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@4c0ce050,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:54:07.084  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@31a9392a,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:54:07.085  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1612030664754913281
2023-03-10 10:54:07.773  INFO 117248 --- [nioEventLoopGroup-5-9] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:54:07.781  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=96588803-9496-4543-85af-3d5adfdcbed1],[ip=127.0.0.1],[uri=/admin/talk/list],[method=OPTIONS],[time=2023-03-10T10:54:07.781223900]
2023-03-10 10:54:07.796  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=1dc89d4a-465f-4838-bd34-faa079011297],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:54:07.796220500]
2023-03-10 10:54:07.796  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@39ad8353,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:54:07.799  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@31a9392a,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:54:07.800  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1611656761503215617
2023-03-10 10:54:13.407  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=1647cc7b-aa10-47f4-a6f1-f583cf379ec5],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=OPTIONS],[time=2023-03-10T10:54:13.407369300]
2023-03-10 10:54:13.407  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=c8dd6ed6-80ef-42e4-97b9-1878610b4600],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T10:54:13.407369300]
2023-03-10 10:54:13.424  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=da5f4d0d-7a38-4340-97e6-791c05dcd130],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T10:54:13.424600100]
2023-03-10 10:54:13.425  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@14ede4ad,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:54:13.425  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=99fc9996-e6e9-4e72-8580-4f5067fe8ffd],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=GET],[time=2023-03-10T10:54:13.425592500]
2023-03-10 10:54:13.425  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@c3e8352,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:54:13.427  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:54:13.429  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1036eaaa,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:54:13.546  INFO 117248 --- [nioEventLoopGroup-5-9] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":["1631544981921562625","1631545332447936513","1631547912842420226","1631549401233117186","1631549482778775553","1631549872870019074","1633008691928141825","1633009164240326658","1633360461682462722","1634024232541286402"]}}
2023-03-10 10:54:37.198  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=8b59a927-941d-4df7-9a5d-6a14c1df644e],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=OPTIONS],[time=2023-03-10T10:54:37.198354200]
2023-03-10 10:54:37.234  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=9a67d5e5-0d1b-4f28-9d2e-94527f29ef4f],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=POST],[time=2023-03-10T10:54:37.234351900]
2023-03-10 10:54:37.235  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@32807f58,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:54:37.236  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.UserLoginInterceptor           : requeset:org.springframework.web.multipart.support.StandardMultipartHttpServletRequest@2185b8cf,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:54:39.043  INFO 117248 --- [async-service-7] c.h.i.i.e.c.l.CommunicationEventListener : refresh sequence and session ttl: Sequence(id=null, name=null, description=null, sessionId=null, receiverId=1612030664754913281, senderId=1611656761503215617, max=null, step=null, segment=null, version=null, createTime=null, updateTime=null, current=1)
2023-03-10 10:54:39.043  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_chat_message  ( id,
sequence,
message_feature,
message_type,
content,
url,
extra,

create_time,
update_time )  VALUES  ( ?,
?,
?,
?,
?,
?,
?,

?,
? )
2023-03-10 10:54:39.044  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:54:39.051  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_message_flow  ( id,

sender_id,
receiver_id,
chat_type,
message_type,
message_id,
`sequence`,
send_status,
sign_flag,

deleted,
create_time,
update_time )  VALUES  ( ?,

?,
?,
?,
?,
?,
?,
?,
?,

?,
?,
? )
2023-03-10 10:54:39.051  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:54:39.164  INFO 117248 --- [async-service-8] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 10:54:39.164  INFO 117248 --- [async-service-8] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:54:39.258  INFO 117248 --- [async-service-8] c.h.i.i.e.m.l.MessageEventHandler        : Sent message by rocketmq: SendResult [sendStatus=SEND_OK, msgId=7F000001CA0063947C6B30B09689000B, offsetMsgId=2F6C928D00002A9F000000000001F1AD, messageQueue=MessageQueue [topic=chat-topic, brokerName=broker-a, queueId=3], queueOffset=12]
2023-03-10 10:54:39.269  INFO 117248 --- [ConsumeMessageThread_image-message-group_3] c.h.i.s.p.c.SentImageMessageConsumer     : rocketmq on message(chat message image): MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:54:39.270  INFO 117248 --- [ConsumeMessageThread_image-message-group_3] c.h.i.s.push.worker.MessageSynchronizer  : push message=DataContainer(actionType=1, event=event_talk, message=SimpleImageMessage(super=AbstractMessage(sequenceId=0, messageType=2, messageBO=MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人))), extra=null) to Channel=907841fffe2e6da0-0001ca00-00000012-11012ef35103ade5-dd6854ad
2023-03-10 10:54:39.270  INFO 117248 --- [async-service-9] c.h.i.s.push.worker.MessageSynchronizer  : MessageSynchronizer synchronize message to me=1611656761503215617,message=MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:54:39.270  INFO 117248 --- [async-service-9] c.h.i.s.push.worker.MessageSynchronizer  : push message=DataContainer(actionType=1, event=event_talk, message=SimpleImageMessage(super=AbstractMessage(sequenceId=0, messageType=2, messageBO=MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人))), extra=null) to Channel=907841fffe2e6da0-0001ca00-00000013-22230cad5103905f-8616edf8
2023-03-10 10:55:12.174  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=23622f61-c2e7-4939-bca7-23645c3bb5f2],[ip=127.0.0.1],[uri=/admin/talk/unread/clear],[method=POST],[time=2023-03-10T10:55:12.174201300]
2023-03-10 10:55:12.174  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@33ccb752,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:55:12.176  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=b5e6f9f9-078b-4e95-b70d-67095e992d8d],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=GET],[time=2023-03-10T10:55:12.176213600]
2023-03-10 10:55:12.176  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@46e8d591,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:55:12.176  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=36dfa5e7-3314-4e03-aa17-e47d3bc06d31],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T10:55:12.176213600]
2023-03-10 10:55:12.176  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@5c3424e7,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:55:12.176  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@31a9392a,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:55:12.177  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1036eaaa,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:55:12.177  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:55:12.183 ERROR 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.hk.im.admin.advice.WebExceptionAdvice  : runtime exception:

java.lang.NumberFormatException: Cannot parse null string
	at java.base/java.lang.Long.parseLong(Long.java:674) ~[na:na]
	at java.base/java.lang.Long.valueOf(Long.java:1163) ~[na:na]
	at com.hk.im.service.service.ChatCommunicationServiceImpl.clearUnreadMessage(ChatCommunicationServiceImpl.java:416) ~[classes/:na]
	at com.hk.im.service.service.ChatCommunicationServiceImpl$$FastClassBySpringCGLIB$$aef42fb5.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.3.20.jar:5.3.20]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:689) ~[spring-aop-5.3.18.jar:5.3.18]
	at com.hk.im.service.service.ChatCommunicationServiceImpl$$EnhancerBySpringCGLIB$$e4c05fa8.clearUnreadMessage(<generated>) ~[classes/:na]
	at com.hk.im.admin.controller.CommunicationController.clearUnreadMessage(CommunicationController.java:77) ~[classes/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:681) ~[tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883) ~[spring-webmvc-5.3.20.jar:5.3.20]
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:764) ~[tomcat-embed-core-9.0.63.jar:4.0.FR]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:124) ~[druid-1.2.8.jar:1.2.8]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-5.3.20.jar:5.3.20]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117) ~[spring-web-5.3.20.jar:5.3.20]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-9.0.63.jar:9.0.63]
	at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]

2023-03-10 10:55:12.274  INFO 117248 --- [nioEventLoopGroup-5-8] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1611656761503215617","msg_id":["1631545232514449410","1631545265607507969","1631545409157562370","1631545527147528193","1631547263044124673","1631549589595115521","1631549636093169666","1633009057675644929","1633029761007677442","1633033758145835009","1633107494089826306","1633360292828172290","1633752041069252610","1634007735336988674","1634009318841962498","1634011620046835713","1634013278881456129","1634013813894291458","1634024046859448321","1634024939898073090"]}}
2023-03-10 10:55:22.264  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=84cae015-4c5b-44a1-873e-6d4dafae49ff],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=POST],[time=2023-03-10T10:55:22.264638]
2023-03-10 10:55:22.265  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@306074d4,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:55:22.267  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset:org.springframework.web.multipart.support.StandardMultipartHttpServletRequest@3346dfd9,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:55:22.352  INFO 117248 --- [async-service-10] c.h.i.i.e.c.l.CommunicationEventListener : refresh sequence and session ttl: Sequence(id=null, name=null, description=null, sessionId=null, receiverId=1611656761503215617, senderId=1612030664754913281, max=null, step=null, segment=null, version=null, createTime=null, updateTime=null, current=1)
2023-03-10 10:55:22.354  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_chat_message  ( id,
sequence,
message_feature,
message_type,
content,
url,
extra,

create_time,
update_time )  VALUES  ( ?,
?,
?,
?,
?,
?,
?,

?,
? )
2023-03-10 10:55:22.354  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:55:22.359  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_message_flow  ( id,

sender_id,
receiver_id,
chat_type,
message_type,
message_id,
`sequence`,
send_status,
sign_flag,

deleted,
create_time,
update_time )  VALUES  ( ?,

?,
?,
?,
?,
?,
?,
?,
?,

?,
?,
? )
2023-03-10 10:55:22.359  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:55:22.483  INFO 117248 --- [async-service-11] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 10:55:22.484  INFO 117248 --- [async-service-11] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:55:22.634  INFO 117248 --- [async-service-11] c.h.i.i.e.m.l.MessageEventHandler        : Sent message by rocketmq: SendResult [sendStatus=SEND_OK, msgId=7F000001CA0063947C6B30B13FFA000C, offsetMsgId=2F6C928D00002A9F000000000001F997, messageQueue=MessageQueue [topic=chat-topic, brokerName=broker-a, queueId=3], queueOffset=13]
2023-03-10 10:55:22.636  INFO 117248 --- [ConsumeMessageThread_image-message-group_4] c.h.i.s.p.c.SentImageMessageConsumer     : rocketmq on message(chat message image): MessageVO(sender=UserVO(id=1612030664754913281, accessToken=null, expiresIn=3600, username=令狐翅膀, account=1673173034, phone=18171513361, email=p.ohbkyke@qq.com, bigAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g&s=200, miniAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, qrcode=null, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=null, age=null, birthday=null, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是令狐翅膀,请多指教), receiver=null, avatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, senderAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, receiverAvatar=null, friendRemark=令狐翅膀, nickname=令狐翅膀)
2023-03-10 10:55:22.636  INFO 117248 --- [ConsumeMessageThread_image-message-group_4] c.h.i.s.push.worker.MessageSynchronizer  : push message=DataContainer(actionType=1, event=event_talk, message=SimpleImageMessage(super=AbstractMessage(sequenceId=0, messageType=2, messageBO=MessageVO(sender=UserVO(id=1612030664754913281, accessToken=null, expiresIn=3600, username=令狐翅膀, account=1673173034, phone=18171513361, email=p.ohbkyke@qq.com, bigAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g&s=200, miniAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, qrcode=null, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=null, age=null, birthday=null, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是令狐翅膀,请多指教), receiver=null, avatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, senderAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, receiverAvatar=null, friendRemark=令狐翅膀, nickname=令狐翅膀))), extra=null) to Channel=907841fffe2e6da0-0001ca00-00000013-22230cad5103905f-8616edf8
2023-03-10 10:55:22.637  INFO 117248 --- [async-service-12] c.h.i.s.push.worker.MessageSynchronizer  : MessageSynchronizer synchronize message to me=1612030664754913281,message=MessageVO(sender=UserVO(id=1612030664754913281, accessToken=null, expiresIn=3600, username=令狐翅膀, account=1673173034, phone=18171513361, email=p.ohbkyke@qq.com, bigAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g&s=200, miniAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, qrcode=null, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=null, age=null, birthday=null, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是令狐翅膀,请多指教), receiver=null, avatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, senderAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, receiverAvatar=null, friendRemark=令狐翅膀, nickname=令狐翅膀)
2023-03-10 10:55:22.637  INFO 117248 --- [async-service-12] c.h.i.s.push.worker.MessageSynchronizer  : push message=DataContainer(actionType=1, event=event_talk, message=SimpleImageMessage(super=AbstractMessage(sequenceId=0, messageType=2, messageBO=MessageVO(sender=UserVO(id=1612030664754913281, accessToken=null, expiresIn=3600, username=令狐翅膀, account=1673173034, phone=18171513361, email=p.ohbkyke@qq.com, bigAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g&s=200, miniAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, qrcode=null, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=null, age=null, birthday=null, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是令狐翅膀,请多指教), receiver=null, avatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, senderAvatar=https://www.gravatar.com/avatar/4e1d0b589912493fab5ed56d0d1c93e6.png?f=y&d=robohash&r=g, receiverAvatar=null, friendRemark=令狐翅膀, nickname=令狐翅膀))), extra=null) to Channel=907841fffe2e6da0-0001ca00-00000012-11012ef35103ade5-dd6854ad
2023-03-10 10:55:22.742  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=962e720e-decb-4183-87fc-b150353606da],[ip=127.0.0.1],[uri=/admin/talk/unread/clear],[method=OPTIONS],[time=2023-03-10T10:55:22.742659300]
2023-03-10 10:55:22.752  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=50943b46-9cfe-4535-86ab-578d12aadd4d],[ip=127.0.0.1],[uri=/admin/talk/unread/clear],[method=POST],[time=2023-03-10T10:55:22.752642]
2023-03-10 10:55:22.752  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@43cf1066,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:55:22.755  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:55:22.763  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 10:55:22.764  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-4] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:55:23.693  INFO 117248 --- [nioEventLoopGroup-5-9] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":["1634025121553379329"]}}
2023-03-10 10:56:09.805  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=81d8d6dc-7705-43e9-b74d-7f1cc21d902b],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=OPTIONS],[time=2023-03-10T10:56:09.805007600]
2023-03-10 10:56:09.832  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=fdf39a93-7c80-4496-b149-01c71f6f0245],[ip=127.0.0.1],[uri=/admin/message/send/image],[method=POST],[time=2023-03-10T10:56:09.832007400]
2023-03-10 10:56:09.832  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@1a4dda49,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:56:09.834  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset:org.springframework.web.multipart.support.StandardMultipartHttpServletRequest@30878ba8,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:56:09.903  INFO 117248 --- [async-service-13] c.h.i.i.e.c.l.CommunicationEventListener : refresh sequence and session ttl: Sequence(id=null, name=null, description=null, sessionId=null, receiverId=1612030664754913281, senderId=1611656761503215617, max=null, step=null, segment=null, version=null, createTime=null, updateTime=null, current=1)
2023-03-10 10:56:09.904  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_chat_message  ( id,
sequence,
message_feature,
message_type,
content,
url,
extra,

create_time,
update_time )  VALUES  ( ?,
?,
?,
?,
?,
?,
?,

?,
? )
2023-03-10 10:56:09.904  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:56:09.907  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 INSERT INTO tb_message_flow  ( id,

sender_id,
receiver_id,
chat_type,
message_type,
message_id,
`sequence`,
send_status,
sign_flag,

deleted,
create_time,
update_time )  VALUES  ( ?,

?,
?,
?,
?,
?,
?,
?,
?,

?,
?,
? )
2023-03-10 10:56:09.907  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.hk.im.admin.config.MybatisPlusConfig   : start insert fill ....
2023-03-10 10:56:09.987  INFO 117248 --- [async-service-14] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 10:56:09.988  INFO 117248 --- [async-service-14] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:56:10.083  INFO 117248 --- [async-service-14] c.h.i.i.e.m.l.MessageEventHandler        : Sent message by rocketmq: SendResult [sendStatus=SEND_OK, msgId=7F000001CA0063947C6B30B1F952000D, offsetMsgId=2F6C928D00002A9F0000000000020148, messageQueue=MessageQueue [topic=chat-topic, brokerName=broker-a, queueId=3], queueOffset=14]
2023-03-10 10:56:10.085  INFO 117248 --- [ConsumeMessageThread_image-message-group_5] c.h.i.s.p.c.SentImageMessageConsumer     : rocketmq on message(chat message image): MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:56:10.086  INFO 117248 --- [ConsumeMessageThread_image-message-group_5] c.h.i.s.push.worker.MessageSynchronizer  : push message=DataContainer(actionType=1, event=event_talk, message=SimpleImageMessage(super=AbstractMessage(sequenceId=0, messageType=2, messageBO=MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人))), extra=null) to Channel=907841fffe2e6da0-0001ca00-00000012-11012ef35103ade5-dd6854ad
2023-03-10 10:56:10.086  INFO 117248 --- [async-service-15] c.h.i.s.push.worker.MessageSynchronizer  : MessageSynchronizer synchronize message to me=1611656761503215617,message=MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人)
2023-03-10 10:56:10.086  INFO 117248 --- [async-service-15] c.h.i.s.push.worker.MessageSynchronizer  : push message=DataContainer(actionType=1, event=event_talk, message=SimpleImageMessage(super=AbstractMessage(sequenceId=0, messageType=2, messageBO=MessageVO(sender=UserVO(id=1611656761503215617, accessToken=null, expiresIn=3600, username=西门大官人, account=1673083889, phone=null, email=3161880795@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, qrcode=http://47.108.146.141:9000/user//qrcode/public_qrcode_1673083889.jpg, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=1, age=null, birthday=2022-08-17, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是西门大官人,请多指教), receiver=null, avatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, senderAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1611656761503215617.jpg, receiverAvatar=null, friendRemark=西门大官人, nickname=西门大官人))), extra=null) to Channel=907841fffe2e6da0-0001ca00-00000013-22230cad5103905f-8616edf8
2023-03-10 10:56:10.219  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=a3189ee6-cc06-4163-a9ab-9490ced1630e],[ip=127.0.0.1],[uri=/admin/talk/unread/clear],[method=POST],[time=2023-03-10T10:56:10.219566]
2023-03-10 10:56:10.219  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@471ef741,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:56:10.223  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:56:10.228  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_chat_communication  SET belong_user_id=?,

sender_id=?,
receiver_id=?,

last_message_id=?,

last_message_content=?,

last_send_time=?,
session_type=?,

unread_count=?,

top=?,
robot=?,
disturb=?,
online=?,
create_time=?,
update_time=?,
deleted=?  WHERE id=?
2023-03-10 10:56:10.230  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:56:11.140  INFO 117248 --- [nioEventLoopGroup-5-8] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1611656761503215617","msg_id":["1634025320992534529"]}}
2023-03-10 10:56:22.567  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=eff19fe3-6c6b-4bbf-89ae-49a48e5a95fd],[ip=127.0.0.1],[uri=/admin/friend/list/v2],[method=OPTIONS],[time=2023-03-10T10:56:22.567784200]
2023-03-10 10:56:22.580  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=af8549b3-7fb1-4160-b10d-5a123b7469b5],[ip=127.0.0.1],[uri=/admin/friend/list/v2],[method=GET],[time=2023-03-10T10:56:22.580787700]
2023-03-10 10:56:22.580  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@59173754,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:56:22.582  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:56:29.390  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=9ffdf908-3886-4670-99c6-7ec94b9359d5],[ip=127.0.0.1],[uri=/admin/info/detail],[method=OPTIONS],[time=2023-03-10T10:56:29.390168400]
2023-03-10 10:56:29.404  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=d2d13f8c-1ae2-4ed8-88e6-08d51f0ecc21],[ip=127.0.0.1],[uri=/admin/info/detail],[method=GET],[time=2023-03-10T10:56:29.404159100]
2023-03-10 10:56:29.404  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@6cdde050,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:56:29.406  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:56:42.997  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-2] c.h.im.admin.interceptor.LogInterceptor  : [traceId=73a11cf9-20b1-4668-9ac6-f1ad288f55c8],[ip=127.0.0.1],[uri=/admin/minio/upload/avatar],[method=OPTIONS],[time=2023-03-10T10:56:42.997209700]
2023-03-10 10:56:43.021  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=9a01d412-9cf4-4537-aadc-75b8d549275b],[ip=127.0.0.1],[uri=/admin/minio/upload/avatar],[method=POST],[time=2023-03-10T10:56:43.021219900]
2023-03-10 10:56:43.021  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@12100c11,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:56:43.022  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.i.a.i.UserLoginInterceptor           : requeset:org.springframework.web.multipart.support.StandardMultipartHttpServletRequest@2360a635,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:56:45.648  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=4baba5ca-fa96-424c-bdac-3187023edb71],[ip=127.0.0.1],[uri=/admin/info/change/detail],[method=OPTIONS],[time=2023-03-10T10:56:45.648693400]
2023-03-10 10:56:45.658  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.h.im.admin.interceptor.LogInterceptor  : [traceId=30caa619-20f5-4882-a3ef-f7d413cbf383],[ip=127.0.0.1],[uri=/admin/info/change/detail],[method=POST],[time=2023-03-10T10:56:45.658703500]
2023-03-10 10:56:45.658  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@2230815d,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:56:45.660  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:56:45.763  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_user_info  SET nickname=?,





wallet=?,


gender=?,









signature=?,
add_friend_policy=?,


create_time=?,
update_time=?  WHERE user_id=?
2023-03-10 10:56:45.773  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.h.i.a.i.MyBatisSqlUpdateSqlDebugPlugin : =====> SQL日志Update操作:
 UPDATE tb_user  SET username=?,
account=?,
password=?,
phone=?,
email=?,
big_avatar=?,
mini_avatar=?,


create_time=?,
update_time=?  WHERE id=?
2023-03-10 10:56:45.773  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-5] c.hk.im.admin.config.MybatisPlusConfig   : start update fill ....
2023-03-10 10:56:51.884  INFO 117248 --- [nioEventLoopGroup-5-8] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接断开：/127.0.0.1:7154,id=907841fffe2e6da0-0001ca00-00000012-11012ef35103ade5-dd6854ad
2023-03-10 10:56:51.885  INFO 117248 --- [nioEventLoopGroup-5-8] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接断开：/127.0.0.1:7154
2023-03-10 10:56:54.187  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.im.admin.interceptor.LogInterceptor  : [traceId=ee76ad4c-0661-472e-862e-f654d96495bc],[ip=127.0.0.1],[uri=/admin/user/1612030664754913281],[method=GET],[time=2023-03-10T10:56:54.187117400]
2023-03-10 10:56:54.187  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@3f7a0d07,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:56:54.190  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-3] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:56:54.212  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-9] c.h.im.admin.interceptor.LogInterceptor  : [traceId=28c6d751-7f73-402c-911e-c1dade5f0025],[ip=127.0.0.1],[uri=/admin/apply/user/receive],[method=GET],[time=2023-03-10T10:56:54.212116200]
2023-03-10 10:56:54.212  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@122e4412,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:56:54.214  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-9] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:56:54.467  INFO 117248 --- [nioEventLoopGroup-5-10] c.h.i.s.c.s.h.w.ClientMessageHandler     : 链接创建：/127.0.0.1:10617
2023-03-10 10:56:54.468  INFO 117248 --- [nioEventLoopGroup-5-10] c.h.i.s.c.s.h.w.WebSocketCloseHandler    : 链接创建：/127.0.0.1:10617
2023-03-10 10:56:54.469  INFO 117248 --- [nioEventLoopGroup-5-10] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request:uri=/channel:Bearer%20eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,headers=http://localhost:3000,method=GET
2023-03-10 10:56:54.469  INFO 117248 --- [nioEventLoopGroup-5-10] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : request url params:token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:56:54.469  INFO 117248 --- [nioEventLoopGroup-5-10] c.h.i.s.c.s.h.c.WebSocketConnectHandler  : the FullHttpRequest new uri=/channel
2023-03-10 10:56:54.489  INFO 117248 --- [ConsumeMessageThread_chat-connect-group_10] c.h.i.s.p.c.UserConnectedConsumer        : rocketMQ onMessage: ConnectMessage(userId=1612030664754913281, token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ, extend=null)
2023-03-10 10:56:54.496  INFO 117248 --- [ConsumeMessageThread_chat-connect-group_10] c.h.i.s.p.c.UserConnectedConsumer        : connected user:UserVO(id=1612030664754913281, accessToken=null, expiresIn=3600, username=令狐翅膀, account=1673173034, phone=18171513361, email=p.ohbkyke@qq.com, bigAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1612030664754913281.jpg, miniAvatar=http://47.108.146.141:9000/user//user/avatar/public_avatar_mini_1612030664754913281.jpg, qrcode=null, qq=null, wechat=null, github=null, dingtalk=null, wallet=0, status=null, gender=2, age=null, birthday=null, constellation=null, campus=null, major=null, job=null, city=null, interest=null, tag=null, signature=你好，我是令狐翅膀,请多指教)
2023-03-10 10:56:54.797  INFO 117248 --- [nioEventLoopGroup-5-10] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"heartbeat","content":"ping"}
2023-03-10 10:56:54.881  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.im.admin.interceptor.LogInterceptor  : [traceId=d5df4a6a-3f23-4298-8763-bddd2dd594ee],[ip=127.0.0.1],[uri=/admin/talk/list],[method=GET],[time=2023-03-10T10:56:54.881826900]
2023-03-10 10:56:54.882  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@7707b320,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:56:54.883  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:56:54.884  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-8] c.h.i.a.c.CommunicationController        : getCommunicationList, request user=1612030664754913281
2023-03-10 10:56:55.310  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.im.admin.interceptor.LogInterceptor  : [traceId=57654b2b-0b88-4bfa-9b09-08a62ebdfe56],[ip=127.0.0.1],[uri=/admin/info/detail],[method=GET],[time=2023-03-10T10:56:55.310011100]
2023-03-10 10:56:55.310  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@28f0e03b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:56:55.312  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-7] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:57:03.184  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.im.admin.interceptor.LogInterceptor  : [traceId=0dd08809-f4c5-47c0-9cff-101ba987332e],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T10:57:03.184410800]
2023-03-10 10:57:03.185  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@6a2a2993,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:57:03.185  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-4] c.h.im.admin.interceptor.LogInterceptor  : [traceId=9bd676db-3e9f-4de1-a70e-cd859532e541],[ip=127.0.0.1],[uri=/admin/emoticon/user/list],[method=GET],[time=2023-03-10T10:57:03.185423400]
2023-03-10 10:57:03.185  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@4bdad90b,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ
2023-03-10 10:57:03.187  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-10] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:57:03.187  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-4] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1036eaaa,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjEyMDMwNjY0NzU0OTEzMjgxIiwiZXhwIjoxNjc4NDIzODkyfQ.Gvamz88nKy79QkWc9Ch8cH8KXKUBxjywiqhdCs2m5OWAmR4xLYRv9IGNTT3nDA7WbLrO_FXudHMtnDXsIOzelQ,user=1612030664754913281
2023-03-10 10:57:03.273  INFO 117248 --- [nioEventLoopGroup-5-10] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1611656761503215617","msg_id":["1631545265607507969","1631545409157562370","1631545527147528193","1631547263044124673","1631549589595115521","1631549636093169666","1633009057675644929","1633029761007677442","1633033758145835009","1633107494089826306","1633360292828172290","1633752041069252610","1634007735336988674","1634009318841962498","1634011620046835713","1634013278881456129","1634013813894291458","1634024046859448321","1634024939898073090","1634025320992534529"]}}
2023-03-10 10:57:57.930  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-6] c.h.im.admin.interceptor.LogInterceptor  : [traceId=d451e0b4-f179-4b6c-b71f-14e4268ed2e9],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=OPTIONS],[time=2023-03-10T10:57:57.930441400]
2023-03-10 10:57:57.941  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.im.admin.interceptor.LogInterceptor  : [traceId=f217bfd9-6a98-4e05-9885-5a334ff1a6d6],[ip=127.0.0.1],[uri=/admin/message/records/latest],[method=GET],[time=2023-03-10T10:57:57.941452900]
2023-03-10 10:57:57.942  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset interceptor:org.apache.tomcat.util.http.NamesEnumerator@3aa86ed9,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ
2023-03-10 10:57:57.943  INFO 117248 --- [http-nio-127.0.0.1-9090-exec-1] c.h.i.a.i.UserLoginInterceptor           : requeset:org.apache.catalina.connector.RequestFacade@1e2d8d23,token=Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJzdWIiOiIxNjExNjU2NzYxNTAzMjE1NjE3IiwiZXhwIjoxNjc4NDIyNTcwfQ.xviJOnGvjZKpFZzIbRrr9z6XUDWwHaLEW8lWqutmZhHZugJ8bA7jfHjZ0jv5vATFwliVPJSMaMDFoDVKiFThyQ,user=1611656761503215617
2023-03-10 10:57:58.020  INFO 117248 --- [nioEventLoopGroup-5-9] c.h.i.s.c.s.h.d.HandlerDispatcher        : chat server receive message:{"event":"event_talk_read","data":{"receiver_id":"1612030664754913281","msg_id":["1630117054164103170","1630118875163127810","1630119255745884162","1630119687062843394","1630121566790512641","1630121910618681345","1630124550480064514","1630125121740054530","1630125362539241473","1630156667502997505","1630156985452212225","1630158680160743426","1630166382639329282","1630167575428083713","1630176890545303554"]}}
